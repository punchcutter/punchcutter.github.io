<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>OpenType Feature File Specification | afdko</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="OpenType Feature File Specification" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Adobe Font Development Kit for OpenType" />
<meta property="og:description" content="Adobe Font Development Kit for OpenType" />
<link rel="canonical" href="http://localhost:4000/OpenTypeFeatureFileSpecification.html" />
<meta property="og:url" content="http://localhost:4000/OpenTypeFeatureFileSpecification.html" />
<meta property="og:site_name" content="afdko" />
<script type="application/ld+json">
{"headline":"OpenType Feature File Specification","description":"Adobe Font Development Kit for OpenType","@type":"WebPage","url":"http://localhost:4000/OpenTypeFeatureFileSpecification.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=c7cf498e7b54a71d789595dba477d4960c9d8b84">
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">afdko</a></h1>
      

      <h2 id="opentype-feature-file-specification">OpenType™ Feature File Specification</h2>

<p>Copyright 2015-2020 Adobe. All Rights Reserved. This software is licensed as
OpenSource, under the Apache License, Version 2.0. This license is available at:
http://opensource.org/licenses/Apache-2.0.</p>

<p>Document version 1.25.0
Last updated 22 May 2020</p>

<p><strong>Caution: Portions of the syntax unimplemented by Adobe are subject to change.</strong></p>

<h2 id="contents">Contents</h2>

<ul>
  <li><a href="#1">1. Introduction</a></li>
  <li><a href="#2">2. Syntax</a>
    <ul>
      <li><a href="#2.a">a. Comments</a></li>
      <li><a href="#2.b">b. White space</a></li>
      <li><a href="#2.c">c. Keywords</a></li>
      <li><a href="#2.d">d. Special characters</a></li>
      <li><a href="#2.e">e. Numbers and other metrics</a>
        <ul>
          <li><a href="#2.e.i">i.   Number</a></li>
          <li><a href="#2.e.ii">ii.  Metric</a></li>
          <li><a href="#2.e.iii">iii. Device table</a></li>
          <li><a href="#2.e.iv">iv.  Value record</a></li>
          <li><a href="#2.e.v">v.   Named value record</a></li>
          <li><a href="#2.e.vi">vi.  Contour point</a></li>
          <li><a href="#2.e.vii">vii. Anchor</a></li>
        </ul>
      </li>
      <li><a href="#2.f">f. Glyphs</a>
        <ul>
          <li><a href="#2.f.i">i.  Glyph name</a></li>
          <li><a href="#2.f.ii">ii. CID</a></li>
        </ul>
      </li>
      <li><a href="#2.g">g. Glyph classes</a>
        <ul>
          <li><a href="#2.g.i">i.  Ranges</a></li>
          <li><a href="#2.g.ii">ii. Named glyph classes</a></li>
        </ul>
      </li>
      <li><a href="#2.h">h. Tags</a></li>
      <li><a href="#2.i">i. Lookup block labels</a></li>
    </ul>
  </li>
  <li><a href="#3">3. Including files</a></li>
  <li><a href="#4">4. Specifying features</a>
    <ul>
      <li><a href="#4.a">a. feature</a></li>
      <li><a href="#4.b">b. Language system</a>
        <ul>
          <li><a href="#4.b.i">i.  languagesystem</a></li>
          <li><a href="#4.b.ii">ii. script and language</a></li>
        </ul>
      </li>
      <li><a href="#4.c">c. parameters</a></li>
      <li><a href="#4.d">d. lookupflag</a></li>
      <li><a href="#4.e">e. lookup</a></li>
      <li><a href="#4.f">f. markClass</a></li>
      <li><a href="#4.g">g. subtable</a></li>
      <li><a href="#4.h">h. Examples</a></li>
    </ul>
  </li>
  <li><a href="#5">5. Glyph substitution (GSUB) rules</a>
    <ul>
      <li><a href="#5.a">a. [GSUB LookupType 1] Single substitution</a></li>
      <li><a href="#5.b">b. [GSUB LookupType 2] Multiple substitution</a></li>
      <li><a href="#5.c">c. [GSUB LookupType 3] Alternate substitution</a></li>
      <li><a href="#5.d">d. [GSUB LookupType 4] Ligature substitution</a></li>
      <li><a href="#5.e">e. [GSUB LookupType 5] Contextual substitution</a></li>
      <li><a href="#5.f">f. [GSUB LookupType 6] Chaining contextual substitution</a>
        <ul>
          <li><a href="#5.f.i">i.  Specifying a Chain Sub rule and marking sub-runs</a></li>
          <li><a href="#5.f.ii">ii. Specifying exceptions to the Chain Sub rule</a></li>
        </ul>
      </li>
      <li><a href="#5.g">g. [GSUB LookupType 7] Extension substitution</a></li>
      <li><a href="#5.h">h. [GSUB LookupType 8] Reverse Chaining Single Substitution</a></li>
    </ul>
  </li>
  <li><a href="#6">6. Glyph positioning (GPOS) rules</a>
    <ul>
      <li><a href="#6.a">a. [GPOS LookupType 1] Single adjustment positioning</a></li>
      <li><a href="#6.b">b. [GPOS LookupType 2] Pair adjustment positioning</a>
        <ul>
          <li><a href="#6.b.i">i.   Specific and class pair kerning</a></li>
          <li><a href="#6.b.ii">ii.  Enumerating pairs</a></li>
          <li><a href="#6.b.iii">iii. Subtable breaks</a></li>
        </ul>
      </li>
      <li><a href="#6.c">c. [GPOS LookupType 3] Cursive attachment positioning</a></li>
      <li><a href="#6.d">d. [GPOS LookupType 4] Mark-to-Base attachment positioning</a></li>
      <li><a href="#6.e">e. [GPOS LookupType 5] Mark-to-Ligature attachment positioning</a></li>
      <li><a href="#6.f">f. [GPOS LookupType 6] Mark-to-Mark attachment positioning</a></li>
      <li><a href="#6.g">g. [GPOS LookupType 7] Contextual positioning</a></li>
      <li><a href="#6.h">h. [GPOS LookupType 8] Chaining contextual positioning</a>
        <ul>
          <li><a href="#6.h.i">i.   Specifying a Chain Pos rule and marking sub-runs</a></li>
          <li><a href="#6.h.ii">ii.  Specifying Contextual Positioning with explicit lookup references</a></li>
          <li><a href="#6.h.iii">iii. Specifying Contextual Positioning with with in-line single positioning rules</a></li>
          <li><a href="#6.h.iv">iv.  Specifying Contextual Positioning with with in-line cursive positioning rules</a></li>
          <li><a href="#6.h.v">v.   Specifying Contextual Positioning with with in-line in-line mark attachment positioning rules</a></li>
          <li><a href="#6.h.vi">vi.  Specifying exceptions to the Chain Pos rule</a></li>
        </ul>
      </li>
      <li><a href="#6.i">i. [GPOS LookupType 9] Extension positioning</a></li>
    </ul>
  </li>
  <li><a href="#7">7. Ordering of lookups and rules in the feature file</a>
    <ul>
      <li><a href="#7.a">a. An OpenType Layout engine’s layout algorithm</a></li>
      <li><a href="#7.b">b. Ordering of lookups and subtables</a></li>
      <li><a href="#7.c">c. Ordering of rules within a lookup</a></li>
    </ul>
  </li>
  <li><a href="#8">8. Specially handled features</a>
    <ul>
      <li><a href="#8.a">a. The all alternates feature (<code class="language-plaintext highlighter-rouge">aalt</code>)</a></li>
      <li><a href="#8.b">b. The optical size feature (<code class="language-plaintext highlighter-rouge">size</code>)</a></li>
      <li><a href="#8.c">c. Descriptive names for Stylistic Set features (<code class="language-plaintext highlighter-rouge">ss01</code> - <code class="language-plaintext highlighter-rouge">ss20</code>)</a></li>
      <li><a href="#8.d">d. UI names Character Variation features (<code class="language-plaintext highlighter-rouge">cv01</code> - <code class="language-plaintext highlighter-rouge">cv99</code>)</a></li>
    </ul>
  </li>
  <li><a href="#9">9. Specifying or overriding table values</a>
    <ul>
      <li><a href="#9.a">a. BASE table</a></li>
      <li><a href="#9.b">b. GDEF table</a></li>
      <li><a href="#9.c">c. head table</a></li>
      <li><a href="#9.d">d. hhea table</a></li>
      <li><a href="#9.e">e. name table</a></li>
      <li><a href="#9.f">f. OS/2 table</a></li>
      <li><a href="#9.g">g. vhea table</a></li>
      <li><a href="#9.h">h. vmtx table</a></li>
      <li><a href="#9.i">i. STAT table</a></li>
    </ul>
  </li>
  <li><a href="#10">10. Specifying anonymous data blocks</a></li>
  <li><a href="#11">11. Document revisions</a></li>
</ul>

<p><a name="1"></a></p>
<h2 id="1-introduction">1. Introduction</h2>

<p>An OpenType feature file is a text file that contains the typographic layout
feature specifications for an OpenType font in an easy-to-read format. It may
also contain override values for certain fields in the font tables. It is read
in during the creation or editing of an OpenType font. This document specifies
the feature file grammar.</p>

<p>This is an example of a complete feature file:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Script and language coverage</span><span class="w">
</span><span class="k">languagesystem</span><span class="w"> </span><span class="n">DFLT</span><span class="w"> </span><span class="n">dflt</span><span class="p">;</span><span class="w">
</span><span class="k">languagesystem</span><span class="w"> </span><span class="n">latn</span><span class="w"> </span><span class="n">dflt</span><span class="p">;</span><span class="w">

</span><span class="c"># Ligature formation</span><span class="w">
</span><span class="k">feature</span> <span class="nf">liga</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">substitute</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">f_i</span><span class="p">;</span><span class="w">
    </span><span class="k">substitute</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">f_l</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">liga</span><span class="p">;</span><span class="w">

</span><span class="c"># Kerning</span><span class="w">
</span><span class="k">feature</span> <span class="nf">kern</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">position</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="p">-</span><span class="mi">100</span><span class="p">;</span><span class="w">
    </span><span class="k">position</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="p">-</span><span class="mi">80</span><span class="p">;</span><span class="w">
    </span><span class="k">position</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="n">f</span><span class="p">'</span><span class="w"> </span><span class="p">&lt;</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;</span><span class="w"> </span><span class="n">t</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">kern</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>This file specifies the formation of the “f_i” and “f_l” ligatures, and the kern
values of the glyph pairs “A” “Y” and “a” “y”. It also specifies a contextual
positioning adjustment for “f” when preceded by “s” and followed by “t”. It also
specifies that all features will be applied under all languages in the latn
script, and for all scripts not named in the feature file.</p>

<p><strong>Note:</strong> All “Implementation Notes” and “Currently not implemented” comments
in the rest of the specification below refer to the Adobe implementation of the
feature file grammar in the makeotf program, unless otherwise indicated.</p>

<p><a name="2"></a></p>
<h2 id="2-syntax">2. Syntax</h2>

<p><a name="2.a"></a></p>
<h3 id="2a-comments">2.a. Comments</h3>

<p>The <code class="language-plaintext highlighter-rouge">#</code> character indicates the start of a comment; the comment extends until
the end of the line. Text on a line after the comment is discarded before
processing.</p>

<p><a name="2.b"></a></p>
<h3 id="2b-white-space">2.b. White space</h3>

<p>White space is not significant except for delimiting tokens. You can have
multiple line endings, spaces, and tabs between tokens. Macintosh, UNIX and PC
line endings are all supported.</p>

<p><a name="2.c"></a></p>
<h3 id="2c-keywords">2.c. Keywords</h3>

<p>This is a complete list of keywords in the feature file language. Note that all
keywords have a global scope. Although many keywords may be used only in
specific contexts, the same keyword is never used in different ways in different
contexts.</p>

<p><a href="#2.e.vii"><code class="language-plaintext highlighter-rouge">anchor</code></a><br />
<a href="#2.e.viii"><code class="language-plaintext highlighter-rouge">anchorDef</code></a><br />
<a href="#10"><code class="language-plaintext highlighter-rouge">anon</code></a><br />
<a href="#10"><code class="language-plaintext highlighter-rouge">anonymous</code></a><br />
<a href="#5.a"><code class="language-plaintext highlighter-rouge">by</code></a><br />
<a href="#2.e.vi"><code class="language-plaintext highlighter-rouge">contourpoint</code></a><br />
<a href="#6.c"><code class="language-plaintext highlighter-rouge">cursive</code></a><br />
<a href="#2.e.iii"><code class="language-plaintext highlighter-rouge">device</code></a>  <em>[ Not implemented ]</em><br />
<a href="#6.b.ii"><code class="language-plaintext highlighter-rouge">enum</code></a><br />
<a href="#6.b.ii"><code class="language-plaintext highlighter-rouge">enumerate</code></a><br />
<a href="#4.b.ii"><code class="language-plaintext highlighter-rouge">exclude_dflt</code></a><br />
<code class="language-plaintext highlighter-rouge">feature</code> (used as a <a href="#4.a">block</a> and as a <a href="#8.a">statement</a>)<br />
<a href="#5.c"><code class="language-plaintext highlighter-rouge">from</code></a><br />
<code class="language-plaintext highlighter-rouge">ignore</code> (used with <a href="#5.f.ii">substitute</a> and <a href="#6.h.vi">position</a>)<br />
<a href="#4.d"><code class="language-plaintext highlighter-rouge">IgnoreBaseGlyphs</code></a><br />
<a href="#4.d"><code class="language-plaintext highlighter-rouge">IgnoreLigatures</code></a><br />
<a href="#4.d"><code class="language-plaintext highlighter-rouge">IgnoreMarks</code></a><br />
<a href="#3"><code class="language-plaintext highlighter-rouge">include</code></a><br />
<a href="#4.b.ii"><code class="language-plaintext highlighter-rouge">include_dflt</code></a><br />
<a href="#4.b.ii"><code class="language-plaintext highlighter-rouge">language</code></a><br />
<a href="#4.b.i"><code class="language-plaintext highlighter-rouge">languagesystem</code></a><br />
<a href="#4.e"><code class="language-plaintext highlighter-rouge">lookup</code></a><br />
<a href="#4.d"><code class="language-plaintext highlighter-rouge">lookupflag</code></a><br />
<a href="#6.d"><code class="language-plaintext highlighter-rouge">mark</code></a><br />
<a href="#4.d"><code class="language-plaintext highlighter-rouge">MarkAttachmentType</code></a><br />
<a href="#4.f"><code class="language-plaintext highlighter-rouge">markClass</code></a><br />
<a href="#9.e"><code class="language-plaintext highlighter-rouge">nameid</code></a><br />
<code class="language-plaintext highlighter-rouge">NULL</code> (used in <a href="#2.e.iii">device</a>, <a href="#2.e.iv">value record</a>, <a href="#2.e.vii">anchor</a>)<br />
<a href="#4.c"><code class="language-plaintext highlighter-rouge">parameters</code></a><br />
<a href="#6"><code class="language-plaintext highlighter-rouge">pos</code></a><br />
<a href="#6"><code class="language-plaintext highlighter-rouge">position</code></a><br />
<a href="#4.b.ii"><code class="language-plaintext highlighter-rouge">required</code></a>  <em>[ Not implemented ]</em><br />
<a href="#5.h"><code class="language-plaintext highlighter-rouge">reversesub</code></a><br />
<a href="#4.d"><code class="language-plaintext highlighter-rouge">RightToLeft</code></a><br />
<a href="#5.h"><code class="language-plaintext highlighter-rouge">rsub</code></a><br />
<a href="#4.b.ii"><code class="language-plaintext highlighter-rouge">script</code></a><br />
<a href="#5"><code class="language-plaintext highlighter-rouge">sub</code></a><br />
<a href="#5"><code class="language-plaintext highlighter-rouge">substitute</code></a><br />
<a href="#4.g"><code class="language-plaintext highlighter-rouge">subtable</code></a><br />
<a href="#9"><code class="language-plaintext highlighter-rouge">table</code></a><br />
<a href="#4.e"><code class="language-plaintext highlighter-rouge">useExtension</code></a><br />
<a href="#4.d"><code class="language-plaintext highlighter-rouge">UseMarkFilteringSet</code></a><br />
<a href="#2.e.v"><code class="language-plaintext highlighter-rouge">valueRecordDef</code></a><br />
<code class="language-plaintext highlighter-rouge">excludeDFLT</code> (deprecated)<br />
<code class="language-plaintext highlighter-rouge">includeDFLT</code> (deprecated)<br /></p>

<p>The following are keywords only in their corresponding table/feature blocks:</p>

<table>
  <thead>
    <tr>
      <th>keyword</th>
      <th>table</th>
      <th>implemented</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="#9.a"><code class="language-plaintext highlighter-rouge">HorizAxis.BaseScriptList</code></a></td>
      <td>BASE table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.a"><code class="language-plaintext highlighter-rouge">HorizAxis.BaseTagList</code></a></td>
      <td>BASE table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.a"><code class="language-plaintext highlighter-rouge">HorizAxis.MinMax</code></a></td>
      <td>BASE table</td>
      <td>❌</td>
    </tr>
    <tr>
      <td><a href="#9.a"><code class="language-plaintext highlighter-rouge">VertAxis.BaseScriptList</code></a></td>
      <td>BASE table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.a"><code class="language-plaintext highlighter-rouge">VertAxis.BaseTagList</code></a></td>
      <td>BASE table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.a"><code class="language-plaintext highlighter-rouge">VertAxis.MinMax</code></a></td>
      <td>BASE table</td>
      <td>❌</td>
    </tr>
    <tr>
      <td><a href="#9.b"><code class="language-plaintext highlighter-rouge">Attach</code></a></td>
      <td>GDEF table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.b"><code class="language-plaintext highlighter-rouge">GlyphClassDef</code></a></td>
      <td>GDEF table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.b"><code class="language-plaintext highlighter-rouge">LigatureCaretByDev</code></a></td>
      <td>GDEF table</td>
      <td>❌</td>
    </tr>
    <tr>
      <td><a href="#9.b"><code class="language-plaintext highlighter-rouge">LigatureCaretByIndex</code></a></td>
      <td>GDEF table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.b"><code class="language-plaintext highlighter-rouge">LigatureCaretByPos</code></a></td>
      <td>GDEF table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.b"><code class="language-plaintext highlighter-rouge">MarkAttachClass</code></a></td>
      <td>GDEF table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.c"><code class="language-plaintext highlighter-rouge">FontRevision</code></a></td>
      <td>head table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.d"><code class="language-plaintext highlighter-rouge">Ascender</code></a></td>
      <td>hhea table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.d"><code class="language-plaintext highlighter-rouge">CaretOffset</code></a></td>
      <td>hhea table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.d"><code class="language-plaintext highlighter-rouge">Descender</code></a></td>
      <td>hhea table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.d"><code class="language-plaintext highlighter-rouge">LineGap</code></a></td>
      <td>hhea table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.f"><code class="language-plaintext highlighter-rouge">CapHeight</code></a></td>
      <td>OS/2 table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.f"><code class="language-plaintext highlighter-rouge">CodePageRange</code></a></td>
      <td>OS/2 table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.f"><code class="language-plaintext highlighter-rouge">Panose</code></a></td>
      <td>OS/2 table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.f"><code class="language-plaintext highlighter-rouge">TypoAscender</code></a></td>
      <td>OS/2 table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.f"><code class="language-plaintext highlighter-rouge">TypoDescender</code></a></td>
      <td>OS/2 table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.f"><code class="language-plaintext highlighter-rouge">TypoLineGap</code></a></td>
      <td>OS/2 table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.f"><code class="language-plaintext highlighter-rouge">UnicodeRange</code></a></td>
      <td>OS/2 table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.f"><code class="language-plaintext highlighter-rouge">Vendor</code></a></td>
      <td>OS/2 table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.f"><code class="language-plaintext highlighter-rouge">winAscent</code></a></td>
      <td>OS/2 table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.f"><code class="language-plaintext highlighter-rouge">winDescent</code></a></td>
      <td>OS/2 table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.f"><code class="language-plaintext highlighter-rouge">XHeight</code></a></td>
      <td>OS/2 table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#8.b"><code class="language-plaintext highlighter-rouge">sizemenuname</code></a></td>
      <td>size feature</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.g"><code class="language-plaintext highlighter-rouge">VertTypoAscender</code></a></td>
      <td>vhea table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.g"><code class="language-plaintext highlighter-rouge">VertTypoDescender</code></a></td>
      <td>vhea table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.g"><code class="language-plaintext highlighter-rouge">VertTypoLineGap</code></a></td>
      <td>vhea table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.h"><code class="language-plaintext highlighter-rouge">VertAdvanceY</code></a></td>
      <td>vmtx table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.h"><code class="language-plaintext highlighter-rouge">VertOriginY</code></a></td>
      <td>vmtx table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.i"><code class="language-plaintext highlighter-rouge">ElidedFallbackName</code></a></td>
      <td>STAT table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.i"><code class="language-plaintext highlighter-rouge">ElidedFallbackNameID</code></a></td>
      <td>STAT table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.i"><code class="language-plaintext highlighter-rouge">DesignAxis</code></a></td>
      <td>STAT table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.i"><code class="language-plaintext highlighter-rouge">AxisValue</code></a></td>
      <td>STAT table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.i"><code class="language-plaintext highlighter-rouge">flag</code></a></td>
      <td>STAT table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.i"><code class="language-plaintext highlighter-rouge">location</code></a></td>
      <td>STAT table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.i"><code class="language-plaintext highlighter-rouge">ElidableAxisValueName</code></a></td>
      <td>STAT table</td>
      <td>✅</td>
    </tr>
    <tr>
      <td><a href="#9.i"><code class="language-plaintext highlighter-rouge">OlderSiblingFontAttribute</code></a></td>
      <td>STAT table</td>
      <td>✅</td>
    </tr>
  </tbody>
</table>

<p>The following are keywords only where a tag is expected:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">DFLT</span><span class="w">  </span><span class="c"># can be used only with the script keyword and as the script value with the languagesystem keyword.</span><span class="w">
</span><span class="n">dflt</span><span class="w">  </span><span class="c"># can be used only with the language keyword and as the language value with the languagesystem keyword.</span><span class="w">
</span></code></pre></div></div>

<p><a name="2.d"></a></p>
<h3 id="2d-special-characters">2.d. Special characters</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#    pound sign       Denotes start of comment
;    semicolon        Terminates a statement
,    comma            Separator in various lists
@    at sign          Identifies glyph class names
\    backslash        Identifies CIDs. Distinguishes glyph names from an identical keyword
-    hyphen           Denotes glyph ranges in a glyph class
=    equal sign       Glyph class assignment operator
'    single quote     Marks a glyph or glyph class for contextual substitution or positioning
" "  double quotes    Enclose a name table string
{ }  braces           Enclose a feature, lookup, table, or anonymous block
[ ]  square brackets  Enclose components of a glyph class
&lt; &gt;  angle brackets   Enclose a device, value record, contour point, anchor, or caret
( )  parentheses      Enclose the file name to be included
</code></pre></div></div>

<p><a name="2.e"></a></p>
<h2 id="2e-numbers-and-other-metrics">2.e. Numbers and other metrics</h2>

<p><a name="2.e.i"></a></p>
<h4 id="2ei-number">2.e.i. Number</h4>

<p>A <code class="language-plaintext highlighter-rouge">&lt;number&gt;</code> is a signed decimal integer (without leading zeros). For example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-150
1000
</code></pre></div></div>

<p>It is used in device tables [§<a href="#2.e.iii">2.e.iii</a>] and contour points
[§<a href="#2.e.vi">2.e.vi</a>], as well as the values of various table fields [§<a href="#9">9</a>].</p>

<p><a name="2.e.ii"></a></p>
<h4 id="2eii-metric">2.e.ii. Metric</h4>

<p>A <code class="language-plaintext highlighter-rouge">&lt;metric&gt;</code> value is simply a <code class="language-plaintext highlighter-rouge">&lt;number&gt;</code> in font design units. It is used in
value records [§<a href="#2.e.iv">2.e.iv</a>] for positioning rules, as well as to express
the values of various table fields [§<a href="#9">9</a>].</p>

<p><em>[ Note: Multiple master support has been withdrawn as of OpenType specification 1.3. ]</em></p>

<p><a name="2.e.iii"></a></p>
<h4 id="2eiii-device-table--currently-not-implemented-">2.e.iii. Device table <em>[ Currently not implemented. ]</em></h4>

<p>A <code class="language-plaintext highlighter-rouge">&lt;device&gt;</code> represents a single device table or a null offset to it. It is used
in value records [§<a href="#2.e.iv">2.e.iv</a>], anchors [§<a href="#2.e.vii">2.e.vii</a>], and
the GDEF table LigatureCaret statements [§<a href="#9.b">9.b</a>].</p>

<h5 id="device-format-a">Device format A:</h5>

<p>This specifies a comma-separated list of <code class="language-plaintext highlighter-rouge">&lt;number&gt;</code> pairs. The first <code class="language-plaintext highlighter-rouge">&lt;number&gt;</code>
in a pair represents a ppem size and the second the number of pixels to adjust
at that ppem size:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="k">device</span><span class="w"> </span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;,</span><span class="w">   </span><span class="c"># ppem size, number of pixels to adjust</span><span class="w">
       </span><span class="p">(&lt;</span><span class="n">number</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;)&gt;;</span><span class="w"> </span><span class="c"># zero or more such pairs</span><span class="w">
</span></code></pre></div></div>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="k">device</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="p">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="p">-</span><span class="mi">1</span><span class="p">&gt;</span><span class="w">  </span><span class="c"># Adjust by -1 at 11 ppem and 12 ppem</span><span class="w">
</span></code></pre></div></div>

<h5 id="device-format-b-the-null-device">Device format B, the null device:</h5>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="k">device</span><span class="w"> </span><span class="k">NULL</span><span class="p">&gt;</span><span class="w">
</span></code></pre></div></div>

<p>This format is used when an undefined <code class="language-plaintext highlighter-rouge">&lt;device&gt;</code> is needed in a list of <code class="language-plaintext highlighter-rouge">&lt;device&gt;</code> tables.</p>

<p><a name="2.e.iv"></a></p>
<h4 id="2eiv-value-record">2.e.iv. Value record</h4>

<p>A <code class="language-plaintext highlighter-rouge">&lt;valuerecord&gt;</code> is used in some positioning rules [§<a href="#6">6</a>].</p>

<p>Except for format A, a <code class="language-plaintext highlighter-rouge">&lt;valuerecord&gt;</code> must be enclosed by angle brackets.
Note that the <code class="language-plaintext highlighter-rouge">&lt;metric&gt;</code> adjustments indicate values (in
design units) to add to (positive values) or subtract from (negative values) the
placement and advance values provided in the font (in the <code class="language-plaintext highlighter-rouge">hmtx</code> and <code class="language-plaintext highlighter-rouge">vmtx</code>
tables).</p>

<h5 id="value-record-format-a">Value record format A:</h5>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;</span><span class="w">  </span><span class="c"># Angle brackets around value are not allowed.</span><span class="w">
</span></code></pre></div></div>

<p>Here the <code class="language-plaintext highlighter-rouge">&lt;metric&gt;</code> represents an x advance adjustment, except when used in the
<code class="language-plaintext highlighter-rouge">vkrn</code>, <code class="language-plaintext highlighter-rouge">vpal</code>, <code class="language-plaintext highlighter-rouge">vhal</code>, or <code class="language-plaintext highlighter-rouge">valt</code> features, in which case it represents a y
advance adjustment. All other adjustments are implicitly set to 0. This is the
simplest feature file <code class="language-plaintext highlighter-rouge">&lt;valuerecord&gt;</code> format, and is provided since it
represents the most commonly used adjustment (i.e. for kerning). For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">-</span><span class="mi">3</span><span class="w">  </span><span class="c"># without &lt;&gt;</span><span class="w">
</span></code></pre></div></div>

<p>Note that the use of a single value as y advance can only be triggered when the
value record definition is contained within a <code class="language-plaintext highlighter-rouge">vkrn</code>, <code class="language-plaintext highlighter-rouge">vpal</code>, <code class="language-plaintext highlighter-rouge">vhal</code>, or <code class="language-plaintext highlighter-rouge">valt</code>
feature definition. If it is in a standalone lookup, then the value will be
interpreted as an x advance, even if the lookup is referenced from within one of
the vertical metric features.</p>

<h5 id="value-record-format-b">Value record format B:</h5>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;&lt;</span><span class="n">metric</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;&gt;</span><span class="w">
</span></code></pre></div></div>

<p>Here, the <code class="language-plaintext highlighter-rouge">&lt;metric&gt;</code> values represent adjustments for x placement, y placement, x
advance, and y advance, in that order. For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;-</span><span class="mi">80</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">-</span><span class="mi">160</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;</span><span class="w">       </span><span class="c"># x placement adjustment: -80; x advance adjustment: -160</span><span class="w">
</span></code></pre></div></div>

<h5 id="value-record-format-c--currently-not-implemented-">Value record format C: <em>[ Currently not implemented. ]</em></h5>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;&lt;</span><span class="n">metric</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">device</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">device</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">device</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">device</span><span class="p">&gt;&gt;</span><span class="w">
</span></code></pre></div></div>

<p>Here, the <code class="language-plaintext highlighter-rouge">&lt;metric&gt;</code> values represent the same adjustments as in format B. The
<code class="language-plaintext highlighter-rouge">&lt;device&gt;</code> values represent device tables [§<a href="#2.e.iii">2.e.iii</a>] for x placement, y
placement, x advance, and y advance, in that order. This format lets the editor
express the full functionality of an OpenType value record. For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;-</span><span class="mi">80</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">-</span><span class="mi">160</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">&lt;</span><span class="k">device</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="p">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="p">-</span><span class="mi">1</span><span class="p">&gt;</span><span class="w">
              </span><span class="p">&lt;</span><span class="k">device</span><span class="w"> </span><span class="k">NULL</span><span class="p">&gt;</span><span class="w">

              </span><span class="p">&lt;</span><span class="k">device</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="p">-</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="p">-</span><span class="mi">2</span><span class="p">&gt;</span><span class="w">
              </span><span class="p">&lt;</span><span class="k">device</span><span class="w"> </span><span class="k">NULL</span><span class="p">&gt;&gt;</span><span class="w">
</span></code></pre></div></div>

<p>This example specifies adjustments for x placement and x advance, as well as
device adjustments at 11 and 12 ppem sizes for x placement and x advance.</p>

<h5 id="value-record-format-d-the-null-value-record--currently-not-implemented-">Value record format D, the null value record: <em>[ Currently not implemented. ]</em></h5>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="k">NULL</span><span class="p">&gt;</span><span class="w"> </span><span class="c"># Value record not defined</span><span class="w">
</span></code></pre></div></div>

<h5 id="value-record-format-e-the-named-value-record">Value record format E, the named value record:</h5>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="k">name</span><span class="p">&gt;</span><span class="w">
</span></code></pre></div></div>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="n">KERN_POS_1</span><span class="p">&gt;</span><span class="w">
</span></code></pre></div></div>

<p>The name must have been defined with a <code class="language-plaintext highlighter-rouge">valueRecordDef</code> statement before being used.</p>

<p><a name="2.e.v"></a></p>
<h4 id="2ev-named-value-record">2.e.v. Named value record</h4>

<p>The <code class="language-plaintext highlighter-rouge">valueRecordDef</code> keyword is used to define a named value record. This name
can then be used in value records instead of coordinates. It offers the
advantage of being able to change the coordinates in the named value record
definition only, and having that single edit change the coordinates used in all
the rules in which the named value record is used. The format is:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">valueRecordDef</span><span class="w"> </span><span class="p">&lt;</span><span class="n">coordinates</span><span class="p">&gt;</span><span class="w"> </span><span class="k">name</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>where the coordinates can be in value record formats A or B. The anchor name
follows the same rules as are used to form glyph names. For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">valueRecordDef</span><span class="w"> </span><span class="p">-</span><span class="mi">10</span><span class="w"> </span><span class="n">FIRST_KERN</span><span class="p">;</span><span class="w">
</span><span class="k">valueRecordDef</span><span class="w"> </span><span class="p">&lt;</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;</span><span class="w"> </span><span class="n">SECOND_KERN</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>These named value coordinates can then be used in value records. For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pos</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="p">&lt;</span><span class="n">SECOND_KERN</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>Note than when the value record name is used, it must be enclosed by angle
brackets, whether it is a single value or four value record. The
<code class="language-plaintext highlighter-rouge">valueRecordDef</code> is a top level statement, and must be defined outside of
feature blocks. It also must be defined before it is used.</p>

<p><a name="2.e.vi"></a></p>
<h4 id="2evi-contour-point">2.e.vi. Contour point</h4>

<p>A <code class="language-plaintext highlighter-rouge">&lt;contour point&gt;</code> is used in anchors [§<a href="#2.e.vii">2.e.vii</a>] and the GDEF table
LigatureCaret statements [§<a href="#9.b">9.b</a>]. It takes the format:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">contourpoint</span><span class="w"> </span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;</span><span class="w">
</span></code></pre></div></div>

<p>where <code class="language-plaintext highlighter-rouge">&lt;number&gt;</code> specifies a contour point index. For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">contourpoint</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span></code></pre></div></div>

<p><strong>Note:</strong> Since OpenType-CFF fonts do not specify contour point indexes, a
<code class="language-plaintext highlighter-rouge">&lt;contour point&gt;</code> may be used only with TrueType OpenType fonts.</p>

<p><a name="2.e.vii"></a></p>
<h4 id="2evii-anchor">2.e.vii. Anchor</h4>

<p>An <code class="language-plaintext highlighter-rouge">&lt;anchor&gt;</code> is used in some positioning rules [§<a href="#6">6</a>]. It takes 5 formats:</p>

<h5 id="anchor-format-a">Anchor format A:</h5>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;&gt;</span><span class="w">  </span><span class="c"># x coordinate, y coordinate</span><span class="w">
</span></code></pre></div></div>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">120</span><span class="w"> </span><span class="p">-</span><span class="mi">20</span><span class="p">&gt;</span><span class="w">
</span></code></pre></div></div>

<h5 id="anchor-format-b">Anchor format B:</h5>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;</span><span class="w">  </span><span class="c"># x coordinate, y coordinate</span><span class="w">
        </span><span class="p">&lt;</span><span class="k">contour</span><span class="w"> </span><span class="n">point</span><span class="p">&gt;&gt;</span><span class="w">
</span></code></pre></div></div>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">120</span><span class="w"> </span><span class="p">-</span><span class="mi">20</span><span class="w"> </span><span class="n">contourpoint</span><span class="w"> </span><span class="mi">5</span><span class="p">&gt;</span><span class="w">
</span></code></pre></div></div>

<h5 id="anchor-format-c">Anchor format C:</h5>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;</span><span class="w">   </span><span class="c"># x coordinate, y coordinate</span><span class="w">
        </span><span class="p">&lt;</span><span class="k">device</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">device</span><span class="p">&gt;&gt;</span><span class="w">  </span><span class="c"># x coordinate device, y coordinate device</span><span class="w">
</span></code></pre></div></div>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">120</span><span class="w"> </span><span class="p">-</span><span class="mi">20</span><span class="w"> </span><span class="p">&lt;</span><span class="k">device</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="mi">1</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">device</span><span class="w"> </span><span class="k">NULL</span><span class="p">&gt;&gt;</span><span class="w">
</span></code></pre></div></div>

<h5 id="anchor-format-d-the-null-anchor">Anchor format D, the null anchor:</h5>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="k">NULL</span><span class="p">&gt;</span><span class="w"> </span><span class="c"># Anchor not defined</span><span class="w">
</span></code></pre></div></div>

<h5 id="anchor-format-e-the-named-anchor">Anchor format E, the named anchor:</h5>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="p">&lt;</span><span class="k">name</span><span class="p">&gt;&gt;</span><span class="w">
</span></code></pre></div></div>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="n">TOP_ANCHOR_1</span><span class="p">&gt;</span><span class="w">
</span></code></pre></div></div>

<p>An anchor name must be defined before it is used – see the following section on
the <code class="language-plaintext highlighter-rouge">anchorDef</code> keyword.</p>

<p><a name="2.e.viii"></a></p>
<h4 id="2eviii-named-anchor-definition">2.e.viii. Named anchor definition</h4>

<p>The <code class="language-plaintext highlighter-rouge">anchorDef</code> keyword is used to define a named anchor. This name can then be
used in anchor definitions instead of coordinates. It offers the advantage of
being able to change the coordinates in the named anchor definition only, and
having that single edit change the coordinates used in all the rules in which
the named anchor is used. The format is:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">anchorDef</span><span class="w"> </span><span class="p">&lt;</span><span class="n">coordinates</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">name</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>where the coordinates can be in Anchor Format A or B. The anchor name follows
the same rules as are used to form glyph names. For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">anchorDef</span><span class="w"> </span><span class="mi">300</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">ANCHOR_1</span><span class="p">;</span><span class="w">
</span><span class="k">anchorDef</span><span class="w"> </span><span class="mi">120</span><span class="w"> </span><span class="p">-</span><span class="mi">20</span><span class="w"> </span><span class="n">contourpoint</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">ANCHOR_2</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>These named anchors can then be used in anchor definitions. For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="n">ANCHOR_2</span><span class="p">&gt;</span><span class="w">
</span></code></pre></div></div>

<p><a name="2.f"></a></p>
<h3 id="2f-glyphs">2.f. Glyphs</h3>

<p>These are represented by one of:</p>

<p><a name="2.f.i"></a></p>
<h4 id="2fi-glyph-name">2.f.i. Glyph name</h4>

<p>There are two different contexts for glyph naming: final production names and
development names.</p>

<p>For production glyph names, names that are used in shipping font files, the
specification is set by the PostScript and Type1 specifications, which define
what is expected by existing PostScript interpreters. These limitations are as
follows.</p>

<p>A glyph name may be up to 63 characters in length, must be entirely comprised of
characters from the following set:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ABCDEFGHIJKLMNOPQRSTUVWXYZ
abcdefghijklmnopqrstuvwxyz
0123456789
.  # period
_  # underscore
</code></pre></div></div>

<p>and must not start with a digit or period. The only exception is the special
character “.notdef”.</p>

<p>“twocents”, “a1”, and “_” are valid glyph names. “2cents” and “.twocents” are
“not.</p>

<p>Development glyph names, names used in source data during the development of a
font, have a larger supported character set. In addition to the characters
allowed for production glyph names, the following characters must also be
supported for development glyph names:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>U+002A * Asterisk
U+002B + Plus sign
U+002D - Hyphen-minus
U+003A : Colon
U+005E ^ Circumflex accent
U+007C | Vertical bar
U+007E ~ Tilde
</code></pre></div></div>

<p>For glyphs where the development glyph name differs from the final production
glyph name, an implementation of the feature file syntax must be able to accept
either name in source files, but must produce output data which contains either
only development glyph names or only final production glyph names.</p>

<p>A glyph name alias database may be used by the implementation of the feature
file grammar to map from development glyph names in the source font data to
final production glyph names. If it is used, then it is the responsibility of
the implementation to correlate the development glyph names used in the feature
file with the final glyph names in the font.</p>

<p>In order disambiguate whether a text token is a range argument or a glyph name
which contains a hyphen, the implementation should first assume that the token
is a glyph name. If there is no glyph in the source data with a name that
matches the token, then the implementation should interpret the token as a range
argument.</p>

<p>An initial backslash serves to differentiate a glyph name from an identical
keyword in the feature file language. (See §<a href="#2.c">2.c</a> for a list of keywords.)
For example, a glyph named “table” must be specified in the feature file as:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">\</span><span class="k">table</span>
</code></pre></div></div>

<p><a name="2.f.ii"></a></p>
<h4 id="2fii-cid">2.f.ii. CID</h4>

<p>CIDs are represented by a non-negative <code class="language-plaintext highlighter-rouge">&lt;number&gt;</code> [§<a href="#2.e.i">2.e.i</a>] preceded by
a backslash. For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">\</span><span class="mi">101</span><span class="w">
</span><span class="err">\</span><span class="mi">0</span><span class="w">
</span></code></pre></div></div>

<p><a name="2.g"></a></p>
<h3 id="2g-glyph-classes">2.g. Glyph classes</h3>

<p><strong>Note:</strong> The feature file glyph classes described in this section are not to be
confused with glyph classes of OpenType Layout ClassDefs. The latter are
described in the chapter <a href="https://docs.microsoft.com/en-us/typography/opentype/spec/chapter2">“Common Table Formats”</a>
in the OpenType specification.</p>

<p>A feature file glyph class, <code class="language-plaintext highlighter-rouge">&lt;glyphclass&gt;</code>, represents a single glyph position
in a sequence and is denoted by a list of glyphs enclosed in square brackets.
For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">endash</span><span class="w"> </span><span class="n">emdash</span><span class="w"> </span><span class="n">figuredash</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>An example of a sequence which contains a glyph class is:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">space</span><span class="w"> </span><span class="p">[</span><span class="n">endash</span><span class="w"> </span><span class="n">emdash</span><span class="w"> </span><span class="n">figuredash</span><span class="p">]</span><span class="w"> </span><span class="n">space</span><span class="w">
</span></code></pre></div></div>

<p>This would match any of the 3 sequences “space endash space”, “space emdash
space”, or “space figuredash space” during OpenType layout.</p>

<p>A feature file glyph class that contains only one single glyph is known as a
singleton glyph class.</p>

<p>A feature file glyph class is also used to represent the set of alternate glyphs
in an alternate substitution lookup type rule.</p>

<p><a name="2.g.i"></a></p>
<h4 id="2gi-ranges">2.g.i. Ranges</h4>

<p>A range of glyphs is denoted by a hyphen:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[&lt;</span><span class="n">firstGlyph</span><span class="p">&gt;</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="p">&lt;</span><span class="n">lastGlyph</span><span class="p">&gt;]</span><span class="w">
</span></code></pre></div></div>

<p>Spaces around the hyphen are not required since hyphens are not permitted in
feature file glyph names. For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="err">\</span><span class="mi">0</span><span class="p">-</span><span class="err">\</span><span class="mi">31</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="n">A</span><span class="p">-</span><span class="n">Z</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>For CID fonts, the ordering is the CID ordering.</p>

<p>For non-CID fonts, the ordering is independent of the ordering of glyphs in the
font. <code class="language-plaintext highlighter-rouge">&lt;firstGlyph&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;lastGlyph&gt;</code> must be the same length and can differ:</p>

<ol>
  <li>
    <p>By a single letter from A-Z, either uppercase or lowercase. For example:</p>

    <div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">A</span><span class="p">.</span><span class="n">swash</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="n">Z</span><span class="p">.</span><span class="n">swash</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="n">z</span><span class="p">]</span><span class="w">
</span></code></pre></div>    </div>

    <p>The range is expanded by incrementing the letter that differs, while keeping
the rest of the glyph name the same.</p>
  </li>
  <li>
    <p>By up to 3 decimal digits in a contiguous run. For example:</p>

    <div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">ampersand</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="n">ampersand</span><span class="p">.</span><span class="mi">58</span><span class="p">]</span><span class="w">
</span></code></pre></div>    </div>

    <p>The range is expanded by incrementing the number values, while keeping the rest
of the glyph name the same.</p>

    <div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">ampersand</span><span class="p">.</span><span class="mi">1</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="n">ampersand</span><span class="p">.</span><span class="mi">58</span><span class="p">]</span><span class="w">  </span><span class="c"># invalid</span><span class="w">
</span></code></pre></div>    </div>

    <p>is not a valid glyph class since the length of the glyph names differ.</p>
  </li>
</ol>

<p>Note that</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">zero</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="n">nine</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>is not a valid glyph range, as the intended range is not in alphabetic order. It
must be enumerated explicitly:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">@digits</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">zero</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">three</span><span class="w"> </span><span class="n">four</span><span class="w"> </span><span class="n">five</span><span class="w"> </span><span class="n">six</span><span class="w"> </span><span class="n">seven</span><span class="w"> </span><span class="n">eight</span><span class="w"> </span><span class="n">nine</span><span class="p">];</span><span class="w">
</span></code></pre></div></div>

<p><a name="2.g.ii"></a></p>
<h4 id="2gii-named-glyph-classes">2.g.ii. Named glyph classes</h4>

<p>A glyph class can be named by assigning it to a glyph class name, which begins
with the “@” character, and then referred to later on by the glyph class name.
For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">@dash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">endash</span><span class="w"> </span><span class="n">emdash</span><span class="w"> </span><span class="n">figuredash</span><span class="p">];</span><span class="w">     </span><span class="c"># Assignment</span><span class="w">
</span><span class="n">space</span><span class="w"> </span><span class="nc">@dash</span><span class="w"> </span><span class="n">space</span><span class="w">                       </span><span class="c"># Usage</span><span class="w">
</span></code></pre></div></div>

<p>The part of the glyph class name after the “@” is subject to the same name
restrictions that apply to a glyph name.</p>

<p>Glyph class assignments can appear anywhere in the feature file. A glyph class
name may be used in the feature file only after its definition.</p>

<p>When a glyph class name occurs within square brackets, its elements are simply
added onto the other elements in the glyph class being defined. For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">@Vowels</span><span class="p">.</span><span class="n">lc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="n">u</span><span class="p">];</span><span class="w">
</span><span class="nc">@Vowels</span><span class="p">.</span><span class="n">uc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">A</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">O</span><span class="w"> </span><span class="n">U</span><span class="p">];</span><span class="w">
</span><span class="nc">@Vowels</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="nc">@Vowels</span><span class="p">.</span><span class="n">lc</span><span class="w"> </span><span class="nc">@Vowels</span><span class="p">.</span><span class="n">uc</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">Y</span><span class="p">];</span><span class="w">
</span></code></pre></div></div>

<p>Here the last statement is equivalent to:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">@Vowels</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">O</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">Y</span><span class="p">];</span><span class="w">
</span></code></pre></div></div>

<p>No square brackets are needed if a glyph class name is assigned to another
single glyph class name. For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">@Figures_lining_tabular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nc">@FIGSDEFAULT</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>Ranges, glyphs, and glyph class names can be combined in a glyph class.
For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">A</span><span class="p">.</span><span class="n">oldstyle</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="n">Z</span><span class="p">.</span><span class="n">oldstyle</span><span class="w"> </span><span class="n">ampersand</span><span class="p">.</span><span class="n">oldstyle</span><span class="w">  </span><span class="nc">@smallCaps</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p><strong>Implementation note:</strong> When feature file glyph sequences (including glyph
classes) are converted into OpenType Layout ClassDefs or Coverages in the font,
the Adobe implementation ensures that ClassDefs or Coverages that are identical
are shared, even if they are in different features. This happens regardless of
whether ranges, glyphs or glyph class names were used to express the feature
file glyph classes. (The only exception to this is for lookups that use the
Extension lookup types: such lookups will not share their ClassDefs and
Coverages with non-extension lookups.)</p>

<p><a name="2.h"></a></p>
<h3 id="2h-tags">2.h. Tags</h3>

<p>Tags are four-letter identifiers. These are denoted simply by tag name, without
any final spaces, and are distinguished from glyph names by context. For
example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">DEU</span><span class="w">
</span></code></pre></div></div>

<p>Note that the final space in the example is implicit.</p>

<p>The special language tag <code class="language-plaintext highlighter-rouge">dflt</code> denotes the default language system of the
corresponding script.</p>

<p><a name="2.i"></a></p>
<h3 id="2i-lookup-block-labels">2.i. Lookup block labels</h3>

<p>The same length and name restrictions that apply to a glyph name apply to a
lookup block label.</p>

<p><a name="3"></a></p>
<h2 id="3-including-files">3. Including files</h2>

<p>Including files is indicated by the directive:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">include</span><span class="p">(</span><span class="err">&lt;</span><span class="s">filename</span><span class="err">&gt;</span><span class="p">);</span><span class="w">
</span></code></pre></div></div>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">include</span><span class="p">(</span><span class="s">../family.fea</span><span class="p">);</span><span class="w">
</span></code></pre></div></div>

<p>The implementation software is responsible for handling the search paths for the
location of the included files.</p>

<p>Because of variations in implementations over time, a relative include path
should be resolved in the order described below; the first which matches should
be used.</p>

<ol>
  <li>If the source font is UFO format, then relative to the UFO’s font directory</li>
  <li>relative to the top-level include file</li>
  <li>relative to the parent include file</li>
</ol>

<p>A maximum include depth of 50 ensures against infinite include loops (files that
include each other).</p>

<p><a name="4"></a></p>
<h2 id="4-specifying-features">4. Specifying features</h2>

<p><a name="4.a"></a></p>
<h3 id="4a-feature">4.a. feature</h3>

<p>Each feature is specified in a feature block:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">feature</span> <span class="err">&lt;</span><span class="nf">feature</span><span class="w"> </span><span class="n">tag</span><span class="p">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c"># specifications go here</span><span class="w">
</span><span class="p">}</span> <span class="err">&lt;</span><span class="nf">feature</span><span class="w"> </span><span class="n">tag</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">feature</span> <span class="nf">liga</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c"># ...</span><span class="w">
</span><span class="p">}</span> <span class="nf">liga</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">aalt</code> feature is treated specially; see §<a href="#8.a">8.a</a>. For example, the
<code class="language-plaintext highlighter-rouge">useExtension</code> keyword may optionally precede <code class="language-plaintext highlighter-rouge">{</code> in its feature block syntax,
and other features can be referred to with a <code class="language-plaintext highlighter-rouge">feature</code> statement within its
feature block. The <code class="language-plaintext highlighter-rouge">size</code> feature is also treated specially; see §<a href="#8.b">8.b</a>.</p>

<p>A feature file “rule” is a statement that specifies glyph substitution or
glyph positioning. A feature block may contain glyph substitution rules
[§<a href="#5">5</a>], glyph positioning rules [§<a href="#6">6</a>], or both.</p>

<p>A lookup is a group of rules of the same type. See §<a href="#4.e">4.e</a>.</p>

<p><a name="4.b"></a></p>
<h3 id="4b-language-system">4.b. Language system</h3>

<p>An OpenType language system is any combination of a script tag
and a language tag. (In the text of this document, the notation <code class="language-plaintext highlighter-rouge">&lt;script
tag&gt;</code>/<code class="language-plaintext highlighter-rouge">&lt;language tag&gt;</code> is used to refer to a language system; for example,
<code class="language-plaintext highlighter-rouge">script latn</code>/<code class="language-plaintext highlighter-rouge">language dflt</code> denotes the default language of the Latin script.)</p>

<p>The lookups in every OpenType feature must be registered under
one or more language systems. The lookups of a particular feature may vary across
the language systems under which the feature is registered.</p>

<p>There are two ways to specify language system in the feature
file: with the <code class="language-plaintext highlighter-rouge">languagesystem</code> keyword outside of feature definition blocks,
and by the <code class="language-plaintext highlighter-rouge">script</code> and <code class="language-plaintext highlighter-rouge">language</code> keywords within feature definition blocks.</p>

<p><a name="4.b.i"></a></p>
<h4 id="4bi-languagesystem">4.b.i. languagesystem</h4>

<p>In practice, most or all of the features in a font will be registered under the
same set of language systems, and a particular feature’s lookups will be
identical across the language systems under which the feature is registered.</p>

<p>The <code class="language-plaintext highlighter-rouge">languagesystem</code> statement provides a simple directive to use in this case.
It is the simplest way to specify language system in the feature file. (For the
<code class="language-plaintext highlighter-rouge">aalt</code> and <code class="language-plaintext highlighter-rouge">size</code> features, it is the only way to specify language system.) One
or more such statements may be present in the feature file at global scope (i.e.
outside of the feature blocks or any other blocks) and before any of the feature
blocks:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">languagesystem</span><span class="w"> </span><span class="p">&lt;</span><span class="k">script</span><span class="w"> </span><span class="n">tag</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">language</span><span class="w"> </span><span class="n">tag</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>When these statements are present, then all the lookups in each feature that
does not contain an explicit <code class="language-plaintext highlighter-rouge">script</code> or <code class="language-plaintext highlighter-rouge">language</code> statement (see
<a href="#4.b.ii">4.b.ii</a> below) will be registered under every language system
specified by the <code class="language-plaintext highlighter-rouge">languagesystem</code> statement(s). If a feature block does contain
<code class="language-plaintext highlighter-rouge">script</code> or <code class="language-plaintext highlighter-rouge">language</code> tags, then all lookups that occur before the first
<code class="language-plaintext highlighter-rouge">script</code> or <code class="language-plaintext highlighter-rouge">language</code> tag will also be applied under all the specified
language systems.</p>

<p>If no <code class="language-plaintext highlighter-rouge">languagesystem</code> statement is present, then the implementation must behave
exactly as though the following statement were present at the beginning of the
feature file:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">languagesystem</span><span class="w"> </span><span class="n">DFLT</span><span class="w"> </span><span class="n">dflt</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>If any <code class="language-plaintext highlighter-rouge">languagesystem</code> statement is used, then the statement specifying:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">languagesystem</span><span class="w"> </span><span class="n">DFLT</span><span class="w"> </span><span class="n">dflt</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>must be specified explicitly; if not, this language system will not be included
in the font. This <code class="language-plaintext highlighter-rouge">script</code>/<code class="language-plaintext highlighter-rouge">language</code> pair is special: it is used if a program
cannot find a match in the font to the current writing script and language.
If it is not in your font, then all the rules may be invisible to the program
if your font does not have a match for the current script and language.
It is strongly recommended to use the statement <code class="language-plaintext highlighter-rouge">languagesystem DFLT dflt;</code>.</p>

<p>If the statement <code class="language-plaintext highlighter-rouge">languagesystem DFLT dflt;</code> is present, it must be the first
of the <code class="language-plaintext highlighter-rouge">languagesystem</code> statements. Any other <code class="language-plaintext highlighter-rouge">language</code> statements using the
<code class="language-plaintext highlighter-rouge">DFLT</code> script tag must precede all other <code class="language-plaintext highlighter-rouge">language</code> statements.</p>

<p>Please see example 1 in §<a href="#4.h">4.h</a> below.</p>

<p><a name="4.b.ii"></a></p>
<h4 id="4bii-script-and-language">4.b.ii. script and language</h4>

<p>Occasionally a feature may need to be specified whose lookups vary across the
language systems of the feature, or whose language systems vary from the set
of language systems of the rest of the features in the file, as specified by
the <code class="language-plaintext highlighter-rouge">languagesystem</code> statements. In these cases, <code class="language-plaintext highlighter-rouge">script</code> and <code class="language-plaintext highlighter-rouge">language</code>
statements will need to be used within the feature block itself.
Such statements affect only that feature. <strong>Note</strong>: you may not use the <code class="language-plaintext highlighter-rouge">script</code>
or <code class="language-plaintext highlighter-rouge">language</code> keywords within a standalone lookup block.</p>

<p>Rules that are specified after the start of a feature and before the first
<code class="language-plaintext highlighter-rouge">script</code> and/or <code class="language-plaintext highlighter-rouge">language</code> statement will be included in all the language
systems specified by the <code class="language-plaintext highlighter-rouge">languagesystem</code> statements. If you do not want any of
the rules in the feature to be registered under the language systems specified
by the <code class="language-plaintext highlighter-rouge">languagesystem</code> statements, then a <code class="language-plaintext highlighter-rouge">script</code> and/or <code class="language-plaintext highlighter-rouge">language</code> statement
for a script must be present before the first rule in the feature.</p>

<p>Once the first script or language statement occurs within a feature block,
subsequent lookups and rules are registered only within the currently specified
script and language. To register a rule or lookup under more than one script
and language, you must explicitly include it following each script and language
specification.</p>

<p>The one exception to this rule are the default lookups. There are two levels of
default lookups. Rules specified between the start of a feature definition and
the first <code class="language-plaintext highlighter-rouge">script</code> are added to all language-systems, unless a language
statement specifies the <code class="language-plaintext highlighter-rouge">exclude_dflt</code> keyword. Rules specified between the
occurrence of the <code class="language-plaintext highlighter-rouge">script</code> statement and the first language statement other than
<code class="language-plaintext highlighter-rouge">dflt</code> are added to explicitly specified languages for the current script, but
not to other scripts, nor to other languages of the same script that are not
named in the feature. If your font has several languages for a given script, and
you need language specific rules for only some of the languages, you should
still explicitly name all of the languages so that they will inherit the
script-level default rules.</p>

<p>The current script and language attributes may be changed as follows:</p>

<h5 id="script-statement">script statement:</h5>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">script</span><span class="w"> </span><span class="p">&lt;</span><span class="k">script</span><span class="w"> </span><span class="n">tag</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">script</span><span class="w"> </span><span class="n">kana</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>When a <code class="language-plaintext highlighter-rouge">script</code> statement is seen, the language attribute is implicitly set to
<code class="language-plaintext highlighter-rouge">dflt</code>, and the <code class="language-plaintext highlighter-rouge">lookupflag</code> attribute is implicitly set to 0. The script
attribute stays the same until explicitly changed by another <code class="language-plaintext highlighter-rouge">script</code> statement
or until the end of the feature.</p>

<h5 id="language-statement">language statement:</h5>
<p>The language attribute stays the same until explicitly changed, until the script
is changed, or until the end of the feature. To change the language attribute,
use the <code class="language-plaintext highlighter-rouge">language</code> statement:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">language</span><span class="w"> </span><span class="p">&lt;</span><span class="k">language</span><span class="w"> </span><span class="n">tag</span><span class="p">&gt;</span><span class="w"> </span><span class="p">[</span><span class="k">exclude_dflt</span><span class="err">|</span><span class="k">include</span><span class="s">_dflt</span><span class="err">]</span><span class="w"> </span><span class="err">[</span><span class="s">required</span><span class="err">];</span><span class="w">
</span></code></pre></div></div>

<p>To exclude a set of rules from only one or a few languages, you must define the
set of rules as a lookup, and explicitly include the lookup in under the
languages that should include it, and omit it from the rules included under the
languages where it should be excluded.</p>

<p><strong>Note:</strong> the <code class="language-plaintext highlighter-rouge">excludeDFLT</code> and <code class="language-plaintext highlighter-rouge">includeDFLT</code> keywords still work, but are
deprecated and will cause a warning to appear.</p>

<p>Here is an example statement:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">language</span><span class="w"> </span><span class="n">DEU</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>As a result of this statement, (a) the language attribute is changed to <code class="language-plaintext highlighter-rouge">DEU </code>,
and (b) the current default lookups are automatically included into the language
system specified by the current script and language DEU.</p>

<p>If (b) is not desired, as may occasionally be the case, then the keyword
<code class="language-plaintext highlighter-rouge">exclude_dflt</code> must follow the language tag. For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">language</span><span class="w"> </span><span class="n">DEU</span><span class="w"> </span><span class="k">exclude_dflt</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>The keyword <code class="language-plaintext highlighter-rouge">include_dflt</code> may be used to explicitly indicate the default default
lookup-inheriting behavior. For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">language</span><span class="w"> </span><span class="n">DEU</span><span class="w"> </span><span class="k">include</span><span class="s">_dflt</span><span class="err">;</span><span class="w">
</span><span class="err">#</span><span class="w"> </span><span class="s">Same</span><span class="w"> </span><span class="s">as</span><span class="err">:</span><span class="w">    </span><span class="s">language</span><span class="w"> </span><span class="s">DEU</span><span class="err">;</span><span class="w">
</span></code></pre></div></div>

<p>The keyword <code class="language-plaintext highlighter-rouge">required</code>, when present, specifies the current feature as the
required feature for the specified language system.</p>

<p><em>[ The keyword <code class="language-plaintext highlighter-rouge">required</code> is currently not implemented. ]</em></p>

<p>Since the <code class="language-plaintext highlighter-rouge">aalt</code> and <code class="language-plaintext highlighter-rouge">size</code> features are treated specially, <code class="language-plaintext highlighter-rouge">script</code> and
<code class="language-plaintext highlighter-rouge">language</code> statements are not allowed within these features.</p>

<p>Special notes:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">DFLT</code> is a valid value for the <code class="language-plaintext highlighter-rouge">script</code> tag, and <code class="language-plaintext highlighter-rouge">dflt</code> is not.</li>
  <li><code class="language-plaintext highlighter-rouge">dflt</code> is a valid value for the <code class="language-plaintext highlighter-rouge">language</code> tag, and <code class="language-plaintext highlighter-rouge">DFLT</code> is not.</li>
  <li>There is no such thing as a <code class="language-plaintext highlighter-rouge">dflt</code> language tag in the actual OpenType data
structures; the data structures hold these rules in a special record, rather
than referencing them from the list of language tags for the current script. The
<code class="language-plaintext highlighter-rouge">dflt</code> language tag is just a convenience in the feature file syntax for setting
the current language to be the default language system.</li>
</ul>

<p>Please see §<a href="#4.h">4.h</a> below for detailed examples.</p>

<p><a name="4.c"></a></p>
<h3 id="4c-parameters">4.c. parameters</h3>

<p>The <code class="language-plaintext highlighter-rouge">parameters</code> statement specifies the feature parameters for the currently
defined language system. It is currently supported only for the <code class="language-plaintext highlighter-rouge">size</code>, <code class="language-plaintext highlighter-rouge">ssXX</code>,
and <code class="language-plaintext highlighter-rouge">cvXX</code> features; see § <a href="#8.b">8.b</a>, <a href="#8.c">8.c</a> and <a href="#8.d">8.d</a>.</p>

<p><a name="4.d"></a></p>
<h3 id="4d-lookupflag">4.d. lookupflag</h3>

<p>The chapter <a href="https://docs.microsoft.com/en-us/typography/opentype/spec/chapter2">“Common Table Formats”</a>
in the OpenType specification describes the LookupFlag field in the Lookup table.</p>

<p>The <code class="language-plaintext highlighter-rouge">lookupflag</code> attribute defaults to 0 at the start of a feature or named
lookup block.</p>

<p>The <code class="language-plaintext highlighter-rouge">lookupflag</code> attribute stays the same until explicitly changed, until a
lookup reference statement is encountered that changes it, until the script is
changed, or until the end of the feature.</p>

<p>To change the <code class="language-plaintext highlighter-rouge">lookupflag</code> attribute explicitly, use the <code class="language-plaintext highlighter-rouge">lookupflag</code> statement,
which takes two formats:</p>

<h5 id="lookupflag-format-a">lookupflag format A:</h5>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">lookupflag</span><span class="w"> </span><span class="p">&lt;</span><span class="n">named</span><span class="w"> </span><span class="k">lookupflag</span><span class="w"> </span><span class="n">value</span><span class="p">&gt;</span><span class="w"> </span><span class="p">(&lt;</span><span class="n">named</span><span class="w"> </span><span class="k">lookupflag</span><span class="w"> </span><span class="n">value</span><span class="p">&gt;)*;</span><span class="w">
</span></code></pre></div></div>

<p>Here, the individual lookup flag values to be set are expressed in a list of one
or more <code class="language-plaintext highlighter-rouge">&lt;named lookupflag value&gt;</code>s, in no particular order, separated by
spaces. A <code class="language-plaintext highlighter-rouge">&lt;named lookupflag value&gt;</code> is one of the following:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">RightToLeft</span><span class="w">
</span><span class="k">IgnoreBaseGlyphs</span><span class="w">
</span><span class="k">IgnoreLigatures</span><span class="w">
</span><span class="k">IgnoreMarks</span><span class="w">
</span><span class="k">MarkAttachmentType</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="w"> </span><span class="n">class</span><span class="w"> </span><span class="k">name</span><span class="p">&gt;</span><span class="w">
</span><span class="k">UseMarkFilteringSet</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="w"> </span><span class="n">class</span><span class="w"> </span><span class="k">name</span><span class="p">&gt;</span><span class="w">
</span></code></pre></div></div>

<p>At most one of each of the above 6 kinds of <code class="language-plaintext highlighter-rouge">&lt;named lookupflag&gt;</code> values may be
present in a lookupflag statement. For example, to skip over base glyphs
and ligature glyphs:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">lookupflag</span><span class="w"> </span><span class="k">IgnoreBaseGlyphs</span><span class="w"> </span><span class="k">IgnoreLigatures</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>Base, ligature, and mark glyphs are specified in the glyph class definition
of the GDEF table.</p>

<p>To skip over all mark glyphs except for those of mark class @TOP_MARKS:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">lookupflag</span><span class="w"> </span><span class="k">MarkAttachmentType</span><span class="w"> </span><span class="nc">@TOP_MARKS</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>The class name used with <code class="language-plaintext highlighter-rouge">MarkAttachmentType</code> can be either a regular glyph
class name or a mark class name. The glyph sets of the referenced classes must
not overlap, and the MarkAttachmentType statement can reference at most 15
different classes.</p>

<p>The flag <code class="language-plaintext highlighter-rouge">UseMarkFilteringSet</code> was added in OpenType spec 1.6. This works the
same as the <code class="language-plaintext highlighter-rouge">MarkAttachmentType</code>, but allows you to use up to 16K different mark
classes, and allows the glyph sets of the referenced classes to overlap.</p>

<h5 id="lookupflag-format-b">lookupflag format B:</h5>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">lookupflag</span><span class="w"> </span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>Here the entire lookup flag value is specified simply as a <code class="language-plaintext highlighter-rouge">&lt;number&gt;</code>.
The format A example above could equivalently be expressed as:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">lookupflag</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>Format A is clearly a superior choice for human readability when the
<code class="language-plaintext highlighter-rouge">lookupflag</code> value is not 0. However, a <code class="language-plaintext highlighter-rouge">lookupflag</code> value of 0 can be set only
with format B, not with format A:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">lookupflag</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>The base glyphs, ligatures, and mark classes are defined in the <code class="language-plaintext highlighter-rouge">GlyphClassDef</code>
of the GDEF table block [§<a href="#9.b">9.b</a>].</p>

<p><a name="4.e"></a></p>
<h3 id="4e-lookup">4.e. lookup</h3>

<p>A lookup is a group of rules of the same type. The font editor can label a run
of rules and refer to it explicitly later on, in order to have different parts
of the font tables refer to the same lookup. This decreases the size of the font
in addition to freeing the editor from maintaining duplicate sets of rules.</p>

<p>A lookup in the OpenType font will be created from each named lookup block or
each run of rules with the same feature, script, language, lookupflag and lookup
type attribute.</p>

<p>To define and label a lookup, use a named lookup block:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">lookup</span> <span class="err">&lt;</span><span class="nf">label</span><span class="p">&gt;</span><span class="w"> </span><span class="p">[</span><span class="k">useExtension</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c"># rules to be grouped</span><span class="w">
</span><span class="p">}</span> <span class="err">&lt;</span><span class="nf">label</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>A named lookup block may be defined either inside or outside of a feature block.
In either case, it may be referenced in different feature blocks. If it is
defined outside a feature block, is is referred to as a ‘standalone’ lookup.</p>

<p>The lookup will be created with a GSUB or GPOS Extension lookup type if and only
if the optional <code class="language-plaintext highlighter-rouge">useExtension</code> keyword is used.</p>

<p>A lookup block may be defined either inside or outside of feature blocks.
<strong>Note</strong>: you may not use the <code class="language-plaintext highlighter-rouge">script</code> or <code class="language-plaintext highlighter-rouge">language</code> keywords within a standalone
lookup block.</p>

<p>The <code class="language-plaintext highlighter-rouge">useExtension</code> keyword has two effects: all the records of all types that
are referenced by a lookup qualifier are placed in one contiguous block of data,
and the offset to the lookup may be 32 bits rather than limited to 16 bits.</p>

<p>When your font cannot be built because of an offset overflow error (meaning that
the offset from one record to another record exceeds the 64 Kbyte limit imposed
by the maximum size possible for a 16-bit offset field), then add this qualifier
to the largest lookup. Keep adding it to more lookups until your font will
build.</p>

<p>(Note: Extension lookup types were added in OpenType specification v1.3).</p>

<p>(See also §<a href="#8.a">8.a</a> for how to specify the entire <code class="language-plaintext highlighter-rouge">aalt</code> feature be made with
the Extension lookup type.)</p>

<p>To refer to the lookup later on, use a lookup reference statement:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">lookup</span> <span class="err">&lt;</span><span class="nf">label</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">lookup</span> <span class="nf">SHARED</span><span class="w"> </span><span class="p">{</span><span class="w">      </span><span class="c"># lookup definition</span><span class="w">
    </span><span class="c"># ...</span><span class="w">
</span><span class="p">}</span> <span class="nf">SHARED</span><span class="p">;</span><span class="w">

</span><span class="c"># ...</span><span class="w">
</span><span class="k">lookup</span> <span class="nf">SHARED</span><span class="p">;</span><span class="w">       </span><span class="c"># lookup reference</span><span class="w">
</span></code></pre></div></div>

<p>An example of a lookup that uses the Extension lookup type:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">lookup</span> <span class="nf">EXTENDED_KERNING</span><span class="w"> </span><span class="k">useExtension</span><span class="w"> </span><span class="p">{</span><span class="w">       </span><span class="c"># lookup definition</span><span class="w">
    </span><span class="c"># ...</span><span class="w">
</span><span class="p">}</span> <span class="nf">EXTENDED_KERNING</span><span class="p">;</span><span class="w">

</span><span class="c"># ...</span><span class="w">
</span><span class="k">lookup</span> <span class="nf">EXTENDED_KERNING</span><span class="p">;</span><span class="w">    </span><span class="c"># lookup reference. useExtension not needed</span><span class="w">
</span></code></pre></div></div>

<p>Since the labeled block literally defines a single lookup in the font, the rules
within the lookup block must be of the same lookup type and have the same
<code class="language-plaintext highlighter-rouge">lookupflag</code> attribute. A lookup block may not contain any other kind of block.
The order of lookups within a font is defined by the order of the lookup
definitions in the feature file.</p>

<p>For contextual rules, the rules of the lookup are ordered in the font file in
the same order that they are written in the feature file. For non-contextual
rules, the implementation sorts the rules to avoid conflict; for example, the
ligature substitution rule for f_f_i will be written before the ligature
substitution rule for f_i, no matter what their order is in the feature file.</p>

<p><a name="4.f"></a></p>
<h3 id="4f-markclass">4.f. markClass</h3>

<p>The <code class="language-plaintext highlighter-rouge">markClass</code> keyword is used to identify a mark glyph class definition
statement.</p>

<p>A mark glyph class name is defined differently than a regular glyph class. The
mark class definition is built up by a one or more of statements in the form:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">markClass</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="err">|</span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">mark</span><span class="w"> </span><span class="n">glyph</span><span class="w"> </span><span class="n">class</span><span class="w"> </span><span class="k">name</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>Each additional mark statement for a mark class adds the referenced glyphs to
that mark class.</p>

<p>The <code class="language-plaintext highlighter-rouge">&lt;anchor&gt;</code> [§<a href="#2.e.vii">2.e.vii</a>] indicates the point on the mark glyph(s)
by which it is attached to a matching anchor point on a base glyph.
If a mark glyph has an anchor point at <code class="language-plaintext highlighter-rouge">&lt;anchor 300, 0&gt;</code> and the base glyph
has an anchor point at <code class="language-plaintext highlighter-rouge">&lt;anchor 400 300&gt;</code>, then the mark glyph will be shifted
so that the point x = 300, y = 0 in its design space will be superimposed on
the point x = 300, y = 400 in the design space of the base glyph.</p>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">markClass</span><span class="w"> </span><span class="p">[</span><span class="n">acute</span><span class="w"> </span><span class="n">grave</span><span class="w"> </span><span class="n">dieresis</span><span class="p">]</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">350</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;</span><span class="w"> </span><span class="nc">@MARK_TOP_ACCENTS</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>If all the mark glyphs which belong to a mark class have the same anchor, then
the mark class can be defined with a single statement, as above.
However, a single mark statement can define only a single anchor point, so
when glyphs in a mark class have different anchor points, more than one mark
statement must be used to define the mark class. For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">markClass</span><span class="w"> </span><span class="p">[</span><span class="n">acute</span><span class="w"> </span><span class="n">grave</span><span class="p">]</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">350</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;</span><span class="w"> </span><span class="nc">@MARK_TOP_ACCENTS</span><span class="p">;</span><span class="w">
</span><span class="k">markClass</span><span class="w"> </span><span class="p">[</span><span class="n">dieresis</span><span class="w"> </span><span class="n">umlaut</span><span class="p">]</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">400</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;</span><span class="w"> </span><span class="nc">@MARK_TOP_ACCENTS</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><strong>Note:</strong> All mark class definition statements must precede any use of a mark
class in the feature file. Once any position statement has referenced a mark
class, no more mark statements are allowed.</p>

<p><strong>Note:</strong> The mark classes used within a single lookup must be disjoint: none
may include a glyph which is in another mark class that is used within the same
lookup.</p>

<p><strong>Note:</strong> If a GDEF table is not explicitly defined in the feature file, then an
implementation of this syntax will create one. In this case, it will use the set
of defined mark classes to define the mark glyphs for the GDEF GlyphClass. In
this case, the assignment of a glyph to the GDEF GlyphClass mark class may
conflict with other assignments to the other GDEF GlyphClass classes. In this
case, an implementation should warn the user of the conflict.</p>

<p>The set of mark classes has an implicit order. An implementation should order
the mark classes in the order of occurrence of the first definition statement
for a mark glyph class. In the example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">markClass</span><span class="w"> </span><span class="p">[</span><span class="n">acute</span><span class="w"> </span><span class="n">grave</span><span class="p">]</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">350</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;</span><span class="w"> </span><span class="nc">@MARK_TOP_ACCENTS</span><span class="p">;</span><span class="w">
</span><span class="k">markClass</span><span class="w"> </span><span class="p">[</span><span class="n">cedilla</span><span class="w"> </span><span class="n">hook</span><span class="p">]</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">300</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;</span><span class="w"> </span><span class="nc">@MARK_BOTTOM_ACCENTS</span><span class="p">;</span><span class="w">
</span><span class="k">markClass</span><span class="w"> </span><span class="p">[</span><span class="n">dieresis</span><span class="w"> </span><span class="n">umlaut</span><span class="p">]</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">400</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;</span><span class="w"> </span><span class="nc">@MARK_TOP_ACCENTS</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>the mark class order will be:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">@MARK_TOP_ACCENTS</span><span class="w"> </span><span class="c"># mark class index 0</span><span class="w">
</span><span class="nc">@MARK_BOTTOM_ACCENTS</span><span class="w"> </span><span class="c"># mark class index 1</span><span class="w">
</span></code></pre></div></div>

<p><a name="4.g"></a></p>
<h3 id="4g-subtable">4.g. subtable</h3>

<p>The feature file implementation must insert subtable breaks among the rules for
a particular lookup if needed. For example, if a set of alternate substitution
rules specified in the feature file exceeds the subtable size limit, several
subtables must be automatically created.</p>

<p>The <code class="language-plaintext highlighter-rouge">subtable</code> statement may be used as follows:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">subtable</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>to explicitly force a subtable break after the previous rule.</p>

<p>This statement must be respected in Pair Adjustment Positioning Format 2 (i.e.
pair class kerning) but in other cases may be ignored and the implementation
software may insert its own subtable breaks. See <a href="#6.b.iii"><em>6.b.iii</em></a> for
details. This hint to the compiler is required for class kerning, as it is
difficult for a compiler to determine where to best place a subtable break in
this lookup type, in order to reduce lookup size.</p>

<p><a name="4.h"></a></p>
<h3 id="4h-examples">4.h. Examples</h3>

<h6 id="example-1">Example 1:</h6>
<p>The following is an example of an entire feature file and demonstrates the two
ways to register features under language systems (see §<a href="#4.b">4.b</a> above):</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">languagesystem</span><span class="w"> </span><span class="n">DFLT</span><span class="w"> </span><span class="n">dflt</span><span class="p">;</span><span class="w">
</span><span class="k">languagesystem</span><span class="w"> </span><span class="n">latn</span><span class="w"> </span><span class="n">dflt</span><span class="p">;</span><span class="w">
</span><span class="k">languagesystem</span><span class="w"> </span><span class="n">latn</span><span class="w"> </span><span class="n">DEU</span><span class="p">;</span><span class="w">
</span><span class="k">languagesystem</span><span class="w"> </span><span class="n">latn</span><span class="w"> </span><span class="n">TRK</span><span class="p">;</span><span class="w">
</span><span class="k">languagesystem</span><span class="w"> </span><span class="n">cyrl</span><span class="w"> </span><span class="n">dflt</span><span class="p">;</span><span class="w">

</span><span class="k">feature</span> <span class="nf">smcp</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">sub</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">-</span><span class="n">z</span><span class="p">]</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="p">[</span><span class="n">A</span><span class="p">.</span><span class="n">sc</span><span class="p">-</span><span class="n">Z</span><span class="p">.</span><span class="n">sc</span><span class="p">];</span><span class="w">
    </span><span class="c"># Since all the rules in this feature are of the same type, they will be grouped in a single lookup.</span><span class="w">
    </span><span class="c"># Since no script or language keyword has been specified yet,</span><span class="w">
    </span><span class="c"># the lookup will be registered for this feature under all the language systems.</span><span class="w">
</span><span class="p">}</span> <span class="nf">smcp</span><span class="p">;</span><span class="w">

</span><span class="k">feature</span> <span class="nf">liga</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">sub</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">f_f</span><span class="p">;</span><span class="w">
    </span><span class="k">sub</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">f_i</span><span class="p">;</span><span class="w">
    </span><span class="k">sub</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">f_l</span><span class="p">;</span><span class="w">
    </span><span class="c"># Since all the rules in this feature are of the same type, they will be</span><span class="w">
    </span><span class="c"># grouped in a single lookup.</span><span class="w">
    </span><span class="c"># Since no script or language keyword has been specified yet,</span><span class="w">
    </span><span class="c"># the lookup will be registered for this feature under all the language systems.</span><span class="w">

    </span><span class="k">script</span><span class="w"> </span><span class="n">latn</span><span class="p">;</span><span class="w">
        </span><span class="k">language</span><span class="w"> </span><span class="n">dflt</span><span class="p">;</span><span class="w">
        </span><span class="c"># lookupflag 0;      (implicit)</span><span class="w">
            </span><span class="k">sub</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">c_t</span><span class="p">;</span><span class="w">
            </span><span class="k">sub</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">c_s</span><span class="p">;</span><span class="w">
        </span><span class="c"># The rules above will be placed in a lookup that is registered for all</span><span class="w">
        </span><span class="c"># the specified languages for the script latn, but not any other scripts.</span><span class="w">

        </span><span class="k">language</span><span class="w"> </span><span class="n">DEU</span><span class="p">;</span><span class="w">
        </span><span class="c"># script latn;       (stays the same)</span><span class="w">
        </span><span class="c"># lookupflag 0;      (stays the same)</span><span class="w">
            </span><span class="k">sub</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">c_h</span><span class="p">;</span><span class="w">
            </span><span class="k">sub</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">c_k</span><span class="p">;</span><span class="w">
        </span><span class="c"># The rules above will be placed in a lookup that is registered only</span><span class="w">
        </span><span class="c"># under the script 'latn', 'language DEU'.</span><span class="w">

        </span><span class="k">language</span><span class="w"> </span><span class="n">TRK</span><span class="p">;</span><span class="w">
        </span><span class="c"># This will inherit both the top level default rules - the rules defined</span><span class="w">
        </span><span class="c"># before the first 'script' statement, and the script-level default</span><span class="w">
        </span><span class="c"># rules for 'latn: all the lookups of this feature defined after the</span><span class="w">
        </span><span class="c"># 'script latn' statement, and before the 'language DEU' statement.</span><span class="w">
        </span><span class="c"># If 'TRK' were not named here, it would not inherit the default rules</span><span class="w">
        </span><span class="c"># for the script 'latn'.</span><span class="w">
</span><span class="p">}</span> <span class="nf">liga</span><span class="p">;</span><span class="w">

</span><span class="k">feature</span> <span class="nf">kern</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">pos</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="p">-</span><span class="mi">150</span><span class="p">;</span><span class="w">
    </span><span class="c"># [more pos statements]</span><span class="w">
    </span><span class="c"># All the rules in this feature will be grouped in a single lookup</span><span class="w">
    </span><span class="c"># that is registered under all the languagesystems.</span><span class="w">
</span><span class="p">}</span> <span class="nf">kern</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>In the above example feature file, the <code class="language-plaintext highlighter-rouge">smcp</code> and <code class="language-plaintext highlighter-rouge">kern</code> features will be
registered under the <code class="language-plaintext highlighter-rouge">DFLT</code>/<code class="language-plaintext highlighter-rouge">dflt</code>, <code class="language-plaintext highlighter-rouge">latn</code>/<code class="language-plaintext highlighter-rouge">dflt</code>, <code class="language-plaintext highlighter-rouge">latn</code>/<code class="language-plaintext highlighter-rouge">DEU </code>, <code class="language-plaintext highlighter-rouge">latn</code>/<code class="language-plaintext highlighter-rouge">TRK</code>
and <code class="language-plaintext highlighter-rouge">cyrl</code>/<code class="language-plaintext highlighter-rouge">dflt</code> language systems since no explicit <code class="language-plaintext highlighter-rouge">script</code> or <code class="language-plaintext highlighter-rouge">language</code>
statements are present in those features.</p>

<p>In the <code class="language-plaintext highlighter-rouge">liga</code> feature, the f_f, f_i and f_l ligature substitutions will be
applied under all language systems. The c_t and c_s ligature substitutions
will be applied under all languages of the script latn, but not under any other
scripts. The c_h and c_k ligature substitutions will be applied when the
language is German (i.e. they are registered only under <code class="language-plaintext highlighter-rouge">latn</code>/<code class="language-plaintext highlighter-rouge">DEU </code>).</p>

<h6 id="example-2">Example 2:</h6>
<p>The following example illustrates labeled lookup blocks and the use of the
<code class="language-plaintext highlighter-rouge">exclude_dflt</code> keyword:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">languagesystem</span><span class="w"> </span><span class="n">DFLT</span><span class="w"> </span><span class="n">dflt</span><span class="p">;</span><span class="w">
</span><span class="k">languagesystem</span><span class="w"> </span><span class="n">latn</span><span class="w"> </span><span class="n">dflt</span><span class="p">;</span><span class="w">
</span><span class="k">languagesystem</span><span class="w"> </span><span class="n">latn</span><span class="w"> </span><span class="n">DEU</span><span class="p">;</span><span class="w">
</span><span class="k">languagesystem</span><span class="w"> </span><span class="n">cyrl</span><span class="w"> </span><span class="n">dflt</span><span class="p">;</span><span class="w">
</span><span class="k">languagesystem</span><span class="w"> </span><span class="n">cyrl</span><span class="w"> </span><span class="n">SRB</span><span class="p">;</span><span class="w">
</span><span class="k">languagesystem</span><span class="w"> </span><span class="n">grek</span><span class="w"> </span><span class="n">dflt</span><span class="p">;</span><span class="w">

</span><span class="k">feature</span> <span class="nf">liga</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c"># start of default rules that are applied under all language systems.</span><span class="w">
    </span><span class="k">lookup</span> <span class="nf">HAS_I</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="k">sub</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">f_f_i</span><span class="p">;</span><span class="w">
        </span><span class="k">sub</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">f_i</span><span class="p">;</span><span class="w">
    </span><span class="p">}</span> <span class="nf">HAS_I</span><span class="p">;</span><span class="w">

    </span><span class="k">lookup</span> <span class="nf">NO_I</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="k">sub</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">f_f_l</span><span class="p">;</span><span class="w">
        </span><span class="k">sub</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">f_f</span><span class="p">;</span><span class="w">
    </span><span class="p">}</span> <span class="nf">NO_I</span><span class="p">;</span><span class="w">

    </span><span class="c"># end of default rules that are applied under all language systems.</span><span class="w">

    </span><span class="k">script</span><span class="w"> </span><span class="n">latn</span><span class="p">;</span><span class="w">
        </span><span class="k">language</span><span class="w"> </span><span class="n">dflt</span><span class="p">;</span><span class="w">
        </span><span class="c"># default lookup for latn included under all languages for the latn script</span><span class="w">
        </span><span class="k">sub</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">f_l</span><span class="p">;</span><span class="w">

        </span><span class="k">language</span><span class="w"> </span><span class="n">DEU</span><span class="p">;</span><span class="w">
        </span><span class="c"># default lookups included under the DEU language.</span><span class="w">
        </span><span class="k">sub</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">c_h</span><span class="p">;</span><span class="w">
        </span><span class="k">sub</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">c_k</span><span class="p">;</span><span class="w">

        </span><span class="k">language</span><span class="w"> </span><span class="n">TRK</span><span class="w"> </span><span class="k">exclude_dflt</span><span class="p">;</span><span class="w">   </span><span class="c"># default lookups are excluded.</span><span class="w">
            </span><span class="k">lookup</span> <span class="nf">NO_I</span><span class="p">;</span><span class="w">             </span><span class="c"># Only this lookup is included under the TRK language</span><span class="w">

    </span><span class="k">script</span><span class="w"> </span><span class="n">cyrl</span><span class="p">;</span><span class="w">
        </span><span class="k">language</span><span class="w"> </span><span class="n">SRB</span><span class="p">;</span><span class="w">
            </span><span class="k">sub</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">c_t</span><span class="p">;</span><span class="w"> </span><span class="c"># this rule will apply only under script cyrl language SRB.</span><span class="w">
</span><span class="p">}</span> <span class="nf">liga</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<ul>
  <li>
    <p>The <code class="language-plaintext highlighter-rouge">DFLT</code>/<code class="language-plaintext highlighter-rouge">dflt</code>, <code class="language-plaintext highlighter-rouge">cyrl</code>/<code class="language-plaintext highlighter-rouge">dflt</code>, and <code class="language-plaintext highlighter-rouge">grek</code>/<code class="language-plaintext highlighter-rouge">dflt</code> language systems will
all contain the default rules for <code class="language-plaintext highlighter-rouge">liga</code> functionality, the rules in the
lookups HAS_I and NO_I.</p>
  </li>
  <li>
    <p>Under the <code class="language-plaintext highlighter-rouge">latn</code> script, all languages but TRK will contain the default
lookups, and the f_l ligature rule.</p>
  </li>
  <li>
    <p>The c_h and c_k ligatures will apply only for the <code class="language-plaintext highlighter-rouge">latn</code>/<code class="language-plaintext highlighter-rouge">DEU </code> language
system.</p>
  </li>
  <li>
    <p>The <code class="language-plaintext highlighter-rouge">latn</code>/<code class="language-plaintext highlighter-rouge">TRK </code> language system will contain only the NO_I lookup.</p>
  </li>
  <li>
    <p>The <code class="language-plaintext highlighter-rouge">cyrl</code>/<code class="language-plaintext highlighter-rouge">SRB </code> language system will contain all the default rules, and the
c_t ligature rule.</p>
  </li>
</ul>

<p>Note that if you specify no explicit rules or lookup references after a script
and language statement, then the effect is to include all the default rules for
all scripts for the feature. Note also that lookup HAS_I must be placed before
lookup NO_I since the f_f_i substitution must precede the f_f substitution when
both are applied. (See <a href="#7">7: Ordering of lookups and rules in the feature file</a>).</p>

<p>The ordering of ligature rules within a particular lookup does not matter,
excepting contextual rules, as the implementation will sort non-contextual rules
in order to avoid conflict. For example, in lookup HAS_I, the f_i substitution
may be placed before the f_f_i substitution, because the implementation will
sort the f_f_i substitution first when writing the lookup to the font.
(See <a href="#5.d">5.d: Ligature substitution</a>).</p>

<p><a name="5"></a></p>
<h2 id="5-glyph-substitution-gsub-rules">5. Glyph substitution (GSUB) rules</h2>

<p>Glyph substitution rules begin with the keyword <code class="language-plaintext highlighter-rouge">substitute</code>; this keyword may
be abbreviated as <code class="language-plaintext highlighter-rouge">sub</code>. (The <code class="language-plaintext highlighter-rouge">ignore</code> keyword may precede the <code class="language-plaintext highlighter-rouge">substitute</code>
keyword in some cases.) The GSUB lookup type is auto-detected from the format
of the rest of the rule.</p>

<p><a name="5.a"></a></p>
<h3 id="5a-gsub-lookuptype-1-single-substitution">5.a. [GSUB LookupType 1] Single substitution</h3>

<p>A Single Sub rule is specified in one of the following formats:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">substitute</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="p">&gt;</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="p">&gt;;</span><span class="w">            </span><span class="c"># format A</span><span class="w">
</span><span class="k">substitute</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="p">&gt;;</span><span class="w">       </span><span class="c"># format B</span><span class="w">
</span><span class="k">substitute</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyphclass</span><span class="p">&gt;;</span><span class="w">  </span><span class="c"># format C</span><span class="w">
</span></code></pre></div></div>

<p>Format B specifies that any glyph in the target glyph class must be replaced by
the same replacement glyph.</p>

<p>Format C specifies that any of the glyphs in the target glyph class must be
replaced by its corresponding glyph (in the order of glyphs in the glyph
classes) in the replacement glyph class. If the replacement is a singleton glyph
class, then the rule will be treated identically to a format B rule. If the
replacement class has more than one glyph, then the number of elements in the
target and replacement glyph classes must be the same.</p>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">sub</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">sc</span><span class="p">;</span><span class="w">                                                 </span><span class="c"># format A</span><span class="w">
</span><span class="k">substitute</span><span class="w"> </span><span class="p">[</span><span class="n">one</span><span class="p">.</span><span class="n">fitted</span><span class="w"> </span><span class="n">one</span><span class="p">.</span><span class="n">oldstyle</span><span class="w"> </span><span class="n">one</span><span class="p">.</span><span class="n">tab</span><span class="p">.</span><span class="n">oldstyle</span><span class="p">]</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">one</span><span class="p">;</span><span class="w">  </span><span class="c"># format B</span><span class="w">
</span><span class="k">substitute</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="n">z</span><span class="p">]</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="p">[</span><span class="n">A</span><span class="p">.</span><span class="n">sc</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="n">Z</span><span class="p">.</span><span class="n">sc</span><span class="p">];</span><span class="w">                           </span><span class="c"># format C</span><span class="w">
</span><span class="k">substitute</span><span class="w"> </span><span class="nc">@Capitals</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="nc">@CapSwashes</span><span class="p">;</span><span class="w">                           </span><span class="c"># format C</span><span class="w">
</span></code></pre></div></div>

<p>The third line in the above example produces an identical representation in the
font as:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">substitute</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">sc</span><span class="p">;</span><span class="w">
</span><span class="k">substitute</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">B</span><span class="p">.</span><span class="n">sc</span><span class="p">;</span><span class="w">
</span><span class="k">substitute</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">C</span><span class="p">.</span><span class="n">sc</span><span class="p">;</span><span class="w">
</span><span class="c"># ...</span><span class="w">
</span><span class="k">substitute</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">Z</span><span class="p">.</span><span class="n">sc</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><a name="5.b"></a></p>
<h3 id="5b-gsub-lookuptype-2-multiple-substitution">5.b. [GSUB LookupType 2] Multiple substitution</h3>

<p>A Multiple Sub rule is specified as:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">substitute</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="p">&gt;</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="w"> </span><span class="n">sequence</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">&lt;glyph sequence&gt;</code> contains two or more glyphs. It may not contain glyph
classes. (If it did, the rule would be ambiguous as to which replacement
sequence were required.) For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">substitute</span><span class="w"> </span><span class="n">f_f_i</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w">            </span><span class="c"># Ligature decomposition</span><span class="w">
</span></code></pre></div></div>

<p><a name="5.c"></a></p>
<h3 id="5c-gsub-lookuptype-3-alternate-substitution">5.c. [GSUB LookupType 3] Alternate substitution</h3>

<p>An Alternate Sub rule is specified as:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">substitute</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="p">&gt;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyphclass</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">substitute</span><span class="w"> </span><span class="n">ampersand</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">[</span><span class="n">ampersand</span><span class="p">.</span><span class="mi">1</span><span class="w"> </span><span class="n">ampersand</span><span class="p">.</span><span class="mi">2</span><span class="w"> </span><span class="n">ampersand</span><span class="p">.</span><span class="mi">3</span><span class="p">];</span><span class="w">
</span></code></pre></div></div>

<p><a name="5.d"></a></p>
<h3 id="5d-gsub-lookuptype-4-ligature-substitution">5.d. [GSUB LookupType 4] Ligature substitution</h3>

<p>A Ligature Sub rule is specified as:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">substitute</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="w"> </span><span class="n">sequence</span><span class="p">&gt;</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">&lt;glyph sequence&gt;</code> must contain two or more of <code class="language-plaintext highlighter-rouge">&lt;glyph|glyphclass&gt;</code>. For
example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">substitute</span><span class="w"> </span><span class="p">[</span><span class="n">one</span><span class="w"> </span><span class="n">one</span><span class="p">.</span><span class="n">oldstyle</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">slash</span><span class="w"> </span><span class="n">fraction</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">two</span><span class="w"> </span><span class="n">two</span><span class="p">.</span><span class="n">oldstyle</span><span class="p">]</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">onehalf</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>Since the OpenType specification does not allow ligature substitutions to be
specified on target sequences that contain glyph classes, the implementation
software will enumerate all specific glyph sequences if glyph classes are
detected in <code class="language-plaintext highlighter-rouge">&lt;glyph sequence&gt;</code>. Thus, the above example produces an identical
representation in the font as if all the sequences were manually enumerated by
the font editor:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">substitute</span><span class="w">  </span><span class="n">one</span><span class="w">           </span><span class="n">slash</span><span class="w">     </span><span class="n">two</span><span class="w">           </span><span class="k">by</span><span class="w">  </span><span class="n">onehalf</span><span class="p">;</span><span class="w">
</span><span class="k">substitute</span><span class="w">  </span><span class="n">one</span><span class="p">.</span><span class="n">oldstyle</span><span class="w">  </span><span class="n">slash</span><span class="w">     </span><span class="n">two</span><span class="w">           </span><span class="k">by</span><span class="w">  </span><span class="n">onehalf</span><span class="p">;</span><span class="w">
</span><span class="k">substitute</span><span class="w">  </span><span class="n">one</span><span class="w">           </span><span class="n">fraction</span><span class="w">  </span><span class="n">two</span><span class="w">           </span><span class="k">by</span><span class="w">  </span><span class="n">onehalf</span><span class="p">;</span><span class="w">
</span><span class="k">substitute</span><span class="w">  </span><span class="n">one</span><span class="p">.</span><span class="n">oldstyle</span><span class="w">  </span><span class="n">fraction</span><span class="w">  </span><span class="n">two</span><span class="w">           </span><span class="k">by</span><span class="w">  </span><span class="n">onehalf</span><span class="p">;</span><span class="w">
</span><span class="k">substitute</span><span class="w">  </span><span class="n">one</span><span class="w">           </span><span class="n">slash</span><span class="w">     </span><span class="n">two</span><span class="p">.</span><span class="n">oldstyle</span><span class="w">  </span><span class="k">by</span><span class="w">  </span><span class="n">onehalf</span><span class="p">;</span><span class="w">
</span><span class="k">substitute</span><span class="w">  </span><span class="n">one</span><span class="p">.</span><span class="n">oldstyle</span><span class="w">  </span><span class="n">slash</span><span class="w">     </span><span class="n">two</span><span class="p">.</span><span class="n">oldstyle</span><span class="w">  </span><span class="k">by</span><span class="w">  </span><span class="n">onehalf</span><span class="p">;</span><span class="w">
</span><span class="k">substitute</span><span class="w">  </span><span class="n">one</span><span class="w">           </span><span class="n">fraction</span><span class="w">  </span><span class="n">two</span><span class="p">.</span><span class="n">oldstyle</span><span class="w">  </span><span class="k">by</span><span class="w">  </span><span class="n">onehalf</span><span class="p">;</span><span class="w">
</span><span class="k">substitute</span><span class="w">  </span><span class="n">one</span><span class="p">.</span><span class="n">oldstyle</span><span class="w">  </span><span class="n">fraction</span><span class="w">  </span><span class="n">two</span><span class="p">.</span><span class="n">oldstyle</span><span class="w">  </span><span class="k">by</span><span class="w">  </span><span class="n">onehalf</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>A contiguous set of ligature rules does not need to be ordered in any particular
way by the font editor; the implementation software must do the appropriate
sorting. So:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">sub</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">f</span><span class="w">     </span><span class="k">by</span><span class="w"> </span><span class="n">f_f</span><span class="p">;</span><span class="w">
</span><span class="k">sub</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="w">     </span><span class="k">by</span><span class="w"> </span><span class="n">f_i</span><span class="p">;</span><span class="w">
</span><span class="k">sub</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="w">   </span><span class="k">by</span><span class="w"> </span><span class="n">f_f_i</span><span class="p">;</span><span class="w">
</span><span class="k">sub</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">o_f_f_i</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>will produce an identical representation in the font as:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">sub</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">o_f_f_i</span><span class="p">;</span><span class="w">
</span><span class="k">sub</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="w">   </span><span class="k">by</span><span class="w"> </span><span class="n">f_f_i</span><span class="p">;</span><span class="w">
</span><span class="k">sub</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">f</span><span class="w">     </span><span class="k">by</span><span class="w"> </span><span class="n">f_f</span><span class="p">;</span><span class="w">
</span><span class="k">sub</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="w">     </span><span class="k">by</span><span class="w"> </span><span class="n">f_i</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><a name="5.e"></a></p>
<h3 id="5e-gsub-lookuptype-5-contextual-substitution">5.e. [GSUB LookupType 5] Contextual substitution</h3>

<p>This LookupType is a functional subset of GSUB LookupType 6, chaining contextual
substitution. Thus, all desired rules of this LookupType can be expressed in
terms of chaining contextual substitution rules.</p>

<p><a name="5.f"></a></p>
<h3 id="5f-gsub-lookuptype-6-chaining-contextual-substitution">5.f. [GSUB LookupType 6] Chaining contextual substitution</h3>

<p><a name="5.f.i"></a></p>
<h4 id="5fi-specifying-a-chain-sub-rule-and-marking-sub-runs">5.f.i. Specifying a Chain Sub rule and marking sub-runs</h4>

<p>A Chain Substitution rule target sequence has three parts: backtrack, input,
and lookahead glyph sequences. A glyph sequence comprises one or more glyphs
or glyph classes.</p>

<p>The most important is input glyph sequence. This is the sequence of glyphs and
glyph classes to which substitution operations are applied. Optionally, a prefix
(also known as backtrack) glyph sequence may be specified, as well as a suffix
(also known as lookahead) glyph sequence. The entire sequence of glyphs — prefix
plus input plus suffix — must match in the current context for the rule to be
applied. The match sequence is aligned to the current context by aligning the
first glyph of the input sequence with the current glyph of the text being
processed. If the rule is matched, then the current context moves the current
glyph pointer ahead in the original text by the length of the input sequence.
Note that in the FEA syntax, the entire context string (backtrack sequence +
input sequence + look-ahead sequence) are all written in the text string order.
This is worth emphasis, as inside the lookup rule, the glyphs of the backtrack
sequence are written in reverse order from the text to be matched. Developers of
font editing tools who know this are sometimes confused by the FEA syntax.</p>

<p>For each glyph or glyph class in the input sequence, the contextual rule may
specify one or more lookups (§<a href="#4.e">4.e</a>) to be applied at that position.
Note that the specified lookups may contain many rules; the implementation
must ensure that only one rule in a referenced lookup will match at that
position in the input sequence. Lookups cannot be specified for the glyphs
or glyph classes in the backtrack and lookahead sequences.</p>

<p>The input sequence is defined by appending the mark (<code class="language-plaintext highlighter-rouge">'</code>) character to all the
glyph names and class names within the input sequence.</p>

<p>The most general form of the contextual substitution rule is to explicitly
reference named lookups in the rule.</p>

<h6 id="example-1-1">Example 1:</h6>
<p>Define two standalone lookups (§<a href="#4.e">4.e</a>), and then reference them in the
input sequence of contextual substitution rules with the keyword <code class="language-plaintext highlighter-rouge">lookup</code> and
the lookup name.</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">lookup</span> <span class="nf">CNTXT_LIGS</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">substitute</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">f_i</span><span class="p">;</span><span class="w">
    </span><span class="k">substitute</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">c_t</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">CNTXT_LIGS</span><span class="p">;</span><span class="w">

</span><span class="k">lookup</span> <span class="nf">CNTXT_SUB</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">substitute</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">n</span><span class="p">.</span><span class="n">end</span><span class="p">;</span><span class="w">
    </span><span class="k">substitute</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">end</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">CNTXT_SUB</span><span class="p">;</span><span class="w">

</span><span class="k">feature</span> <span class="nf">test</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">substitute</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="n">u</span><span class="p">]</span><span class="w"> </span><span class="n">f</span><span class="p">'</span><span class="w"> </span><span class="k">lookup</span> <span class="nf">CNTXT_LIGS</span><span class="w"> </span><span class="n">i</span><span class="p">'</span><span class="w"> </span><span class="n">n</span><span class="p">'</span><span class="w"> </span><span class="k">lookup</span> <span class="nf">CNTXT_SUB</span><span class="p">;</span><span class="w">
    </span><span class="k">substitute</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="n">u</span><span class="p">]</span><span class="w"> </span><span class="n">c</span><span class="p">'</span><span class="w"> </span><span class="k">lookup</span> <span class="nf">CNTXT_LIGS</span><span class="w"> </span><span class="n">t</span><span class="p">'</span><span class="w"> </span><span class="n">s</span><span class="p">'</span><span class="w"> </span><span class="k">lookup</span> <span class="nf">CNTXT_SUB</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">test</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>Note that both the contextual substitution rules use the same lookups. This is
because there is more than one rule in each referenced lookup, and different
rules within the referenced lookups will match in the different contexts. In the
first contextual substitution rule, the lookup <code class="language-plaintext highlighter-rouge">CNTXT_LIGS</code>will be applied at
the input sequence glyph “f”, and the glyphs “f” and “i” will be replaced by
“f_i”. The lookup <code class="language-plaintext highlighter-rouge">CNTXT_SUB</code>will be applied at the input sequence glyph “n”,
and the glyph “n” will be replaced by “n.end”. This will happen only when the
sequence “f i n” is preceded by any one of the glyphs “a e i o u”. Likewise, in
the second contextual substitution rule the glyphs “c” and “t” will be replaced
by “c_t”, and the glyph “s” will be replaced by “s.end”. This will happen only
when the sequence “c t s” is preceded by any one of the glyphs “a e i o u”.</p>

<p>This form of the contextual substitution rule is the most flexible. You can
specify a substitution lookup for more than one input sequence glyph or glyph
class, the referenced lookups can be of different types, and the referenced
lookups can have different lookup flags that the parent contextual lookup. The
drawback is that it is difficult to understand what substitution rule will be
applied, and the implementation may not warn if the referenced lookup does not
contain a rule that matches the context.</p>

<p>If there is only a single substitution operation, and it is either single
substitution or ligature substitution, then the operation can be specified
in-line and its type will be auto-detected from the input and replacement
sequence in the same way as in their corresponding standalone (i.e.
non-contextual) statements.</p>

<h6 id="example-2-1">Example 2:</h6>
<p>This calls a Single Sub rule. The rule below means: in sequences “a d” or “e d”
or “n d”, substitute “d” by “d.alt”.</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">substitute</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="n">n</span><span class="p">]</span><span class="w"> </span><span class="n">d</span><span class="p">'</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">alt</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>This format requires that there be only one glyph or glyph class in the input
sequence.</p>

<h6 id="example-3">Example 3:</h6>
<p>This also calls a Single Sub rule. The rule below means: if a capital letter is
followed by a small capital, then replace the small capital by its corresponding
lowercase letter.</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">substitute</span><span class="w"> </span><span class="p">[</span><span class="n">A</span><span class="p">-</span><span class="n">Z</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">A</span><span class="p">.</span><span class="n">sc</span><span class="p">-</span><span class="n">Z</span><span class="p">.</span><span class="n">sc</span><span class="p">]'</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">-</span><span class="n">z</span><span class="p">];</span><span class="w">
</span></code></pre></div></div>

<p>This format requires that there be only one glyph or glyph class in the input
sequence.</p>

<h6 id="example-4">Example 4:</h6>
<p>This calls a Ligature Sub lookup. The rule below means: in sequences “e t c” or
“e.begin t c”, substitute the first two glyphs by the ampersand.</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">substitute</span><span class="w"> </span><span class="p">[</span><span class="n">e</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">begin</span><span class="p">]'</span><span class="w"> </span><span class="n">t</span><span class="p">'</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">ampersand</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>This format will assume that the entire input sequence is a sequence of ligature
components.</p>

<h6 id="example-5">Example 5:</h6>
<p>In this example two Multiple Sub lookups are applied to the same input. The rule below means: 
in lookup <code class="language-plaintext highlighter-rouge">REORDER_CHAIN</code> the sequence “ka ka.pas_cakra.ns” is first substituted 
by “ka” and then a second lookup subsitutes the remaining “ka” by the sequence “ka.pas_cakra ka”.</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">lookup</span> <span class="nf">REMOVE_CAKRA</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">sub</span><span class="w"> </span><span class="n">ka</span><span class="w"> </span><span class="n">ka</span><span class="p">.</span><span class="n">pas_cakra</span><span class="p">.</span><span class="n">ns</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">ka</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">REMOVE_CAKRA</span><span class="p">;</span><span class="w">

</span><span class="k">lookup</span> <span class="nf">REORDER_CAKRA</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">sub</span><span class="w"> </span><span class="n">ka</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">ka</span><span class="p">.</span><span class="n">pas_cakra</span><span class="w"> </span><span class="n">ka</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">REORDER_CAKRA</span><span class="p">;</span><span class="w">

</span><span class="k">lookup</span> <span class="nf">REORDER_CHAIN</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">sub</span><span class="w"> </span><span class="n">ka</span><span class="p">'</span><span class="w"> </span><span class="k">lookup</span> <span class="nf">REMOVE_CAKRA</span><span class="w"> </span><span class="k">lookup</span> <span class="nf">REORDER_CAKRA</span><span class="w"> </span><span class="n">ka</span><span class="p">.</span><span class="n">pas_cakra</span><span class="p">.</span><span class="n">ns</span><span class="p">'</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">REORDER_CHAIN</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><a name="5.f.ii"></a></p>
<h4 id="5fii-specifying-exceptions-to-the-chain-sub-rule">5.f.ii. Specifying exceptions to the Chain Sub rule</h4>

<p>Exceptions to a chaining contextual substitution rule are expressed by inserting
a statement of the following form anywhere before the chaining contextual rule
and in the same lookup as it:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ignore</span><span class="w"> </span><span class="k">substitute</span><span class="w"> </span><span class="p">&lt;</span><span class="n">backtrack</span><span class="w"> </span><span class="n">glyph</span><span class="w"> </span><span class="n">sequence</span><span class="p">&gt;*</span><span class="w">
</span><span class="p">&lt;</span><span class="n">marked</span><span class="w"> </span><span class="n">glyph</span><span class="w"> </span><span class="n">sequence</span><span class="p">&gt;</span><span class="w">
</span><span class="p">&lt;</span><span class="n">lookahead</span><span class="w"> </span><span class="n">glyph</span><span class="w"> </span><span class="n">sequence</span><span class="p">&gt;*;</span><span class="w">
</span></code></pre></div></div>

<p>The backtrack and lookahead sequences may be omitted, but there must be at least
one marked glyph or glyph class.</p>

<p>For convenience, several ignore statements may be collapsed into one by
separating the matching sequences with a comma. See Example 3. The following
three statements:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ignore</span><span class="w"> </span><span class="k">substitute</span><span class="w"> </span><span class="p">&lt;</span><span class="n">match</span><span class="w"> </span><span class="n">sequence1</span><span class="p">&gt;;</span><span class="w">
</span><span class="k">ignore</span><span class="w"> </span><span class="k">substitute</span><span class="w"> </span><span class="p">&lt;</span><span class="n">match</span><span class="w"> </span><span class="n">sequence2</span><span class="p">&gt;;</span><span class="w">
</span><span class="k">ignore</span><span class="w"> </span><span class="k">substitute</span><span class="w"> </span><span class="p">&lt;</span><span class="n">match</span><span class="w"> </span><span class="n">sequence3</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>can be written as:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ignore</span><span class="w"> </span><span class="k">substitute</span><span class="w"> </span><span class="p">&lt;</span><span class="n">match</span><span class="w"> </span><span class="n">sequence1</span><span class="p">&gt;,</span><span class="w"> </span><span class="p">&lt;</span><span class="n">match</span><span class="w"> </span><span class="n">sequence2</span><span class="p">&gt;,</span><span class="w"> </span><span class="p">&lt;</span><span class="n">match</span><span class="w"> </span><span class="n">sequence3</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>Note that each match sequence is in effect a complete ignore statement, and
contains its own independent backtrack, marked glyph, and lookahead sequences.</p>

<p>The <code class="language-plaintext highlighter-rouge">ignore substitute</code> statement works by creating subtables in the GSUB that
tell the OT layout engine simply to match the specified sequences, and not to
perform any substitutions on them. As a result of the match, remaining rules
(i.e. subtables) in the lookup will be skipped when the rule matches.
(See <a href="#7.a">OT layout algorithm</a>.)</p>

<h6 id="example-1-2">Example 1:</h6>
<p>Ignoring specific sequences:
The <code class="language-plaintext highlighter-rouge">ignore substitute</code> rules below will block any subsequent rules that specify
a substitution for “d” when the context around “d” matches any of the sequences
“f a d”, “f e d”, or “a d d”.</p>

<p>Note that the marked glyphs in the exception sequences indicate where a
substitution would have occurred; this is necessary for the OpenType layout
engine to correctly handle skipping this sequence.</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ignore</span><span class="w"> </span><span class="k">substitute</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="n">e</span><span class="p">]</span><span class="w"> </span><span class="n">d</span><span class="p">';</span><span class="w">
</span><span class="k">ignore</span><span class="w"> </span><span class="k">substitute</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">d</span><span class="p">'</span><span class="w"> </span><span class="n">d</span><span class="p">;</span><span class="w">
</span><span class="k">substitute</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="n">n</span><span class="p">]</span><span class="w"> </span><span class="n">d</span><span class="p">'</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">alt</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>Matching a beginning-of-word boundary:</p>
<h6 id="example-2-2">Example 2:</h6>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ignore</span><span class="w"> </span><span class="k">substitute</span><span class="w"> </span><span class="nc">@LETTER</span><span class="w"> </span><span class="n">f</span><span class="p">'</span><span class="w"> </span><span class="n">i</span><span class="p">';</span><span class="w">
</span><span class="k">substitute</span><span class="w"> </span><span class="n">f</span><span class="p">'</span><span class="w"> </span><span class="n">i</span><span class="p">'</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">f_i</span><span class="p">.</span><span class="n">begin</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>The example above shows how a ligature may be substituted at a word boundary.
@LETTER must be defined to include all glyphs considered to be part of a word.
The substitute statement will get applied only if the sequence doesn’t match
“@LETTER f i”; i.e. only at the beginning of a word.</p>

<h6 id="example-3-1">Example 3:</h6>
<p>Matching a whole word boundary:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ignore</span><span class="w"> </span><span class="k">substitute</span><span class="w"> </span><span class="nc">@LETTER</span><span class="w"> </span><span class="n">a</span><span class="p">'</span><span class="w"> </span><span class="n">n</span><span class="p">'</span><span class="w"> </span><span class="n">d</span><span class="p">',</span><span class="w"> </span><span class="n">a</span><span class="p">'</span><span class="w"> </span><span class="n">n</span><span class="p">'</span><span class="w"> </span><span class="n">d</span><span class="p">'</span><span class="w"> </span><span class="nc">@LETTER</span><span class="p">;</span><span class="w">
</span><span class="k">substitute</span><span class="w"> </span><span class="n">a</span><span class="p">'</span><span class="w"> </span><span class="n">n</span><span class="p">'</span><span class="w"> </span><span class="n">d</span><span class="p">'</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">a_n_d</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>In this example, the a_n_d ligature will apply only if the sequence “a n d” is
neither preceded nor succeeded by a @LETTER. Also, note the use of the comma in
the <code class="language-plaintext highlighter-rouge">ignore</code> statement: this is equivalent to writing:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ignore</span><span class="w"> </span><span class="k">substitute</span><span class="w"> </span><span class="nc">@LETTER</span><span class="w"> </span><span class="n">a</span><span class="p">'</span><span class="w"> </span><span class="n">n</span><span class="p">'</span><span class="w"> </span><span class="n">d</span><span class="p">';</span><span class="w">
</span><span class="k">ignore</span><span class="w"> </span><span class="k">substitute</span><span class="w"> </span><span class="n">a</span><span class="p">'</span><span class="w"> </span><span class="n">n</span><span class="p">'</span><span class="w"> </span><span class="n">d</span><span class="p">'</span><span class="w"> </span><span class="nc">@LETTER</span><span class="p">;</span><span class="w">
</span><span class="k">substitute</span><span class="w"> </span><span class="n">a</span><span class="p">'</span><span class="w"> </span><span class="n">n</span><span class="p">'</span><span class="w"> </span><span class="n">d</span><span class="p">'</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">a_n_d</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<h6 id="example-4-1">Example 4:</h6>
<p>This shows a specification for the contextual swashes feature:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">feature</span> <span class="nf">cswh</span><span class="w"> </span><span class="p">{</span><span class="w">

    </span><span class="c"># --- Glyph classes used in this feature:</span><span class="w">
    </span><span class="nc">@BEGINNINGS</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">A</span><span class="p">-</span><span class="n">N</span><span class="w"> </span><span class="n">P</span><span class="p">-</span><span class="n">Z</span><span class="w"> </span><span class="n">Th</span><span class="w"> </span><span class="n">m</span><span class="p">];</span><span class="w">
    </span><span class="nc">@BEGINNINGS_SWASH</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">A</span><span class="p">.</span><span class="n">swash</span><span class="p">-</span><span class="n">N</span><span class="p">.</span><span class="n">swash</span><span class="w"> </span><span class="n">P</span><span class="p">.</span><span class="n">swash</span><span class="p">-</span><span class="n">Z</span><span class="p">.</span><span class="n">swash</span><span class="w"> </span><span class="n">T_h</span><span class="p">.</span><span class="n">swash</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">begin</span><span class="p">];</span><span class="w">
    </span><span class="nc">@ENDINGS</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="n">z</span><span class="p">];</span><span class="w">
    </span><span class="nc">@ENDINGS_SWASH</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">.</span><span class="n">end</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">end</span><span class="w"> </span><span class="n">z</span><span class="p">.</span><span class="n">end</span><span class="p">];</span><span class="w">

    </span><span class="c"># --- Beginning-of-word swashes:</span><span class="w">
    </span><span class="k">ignore</span><span class="w"> </span><span class="k">substitute</span><span class="w"> </span><span class="nc">@LETTER</span><span class="w"> </span><span class="nc">@BEGINNINGS</span><span class="p">';</span><span class="w">
    </span><span class="k">substitute</span><span class="w"> </span><span class="nc">@BEGINNINGS</span><span class="p">'</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="nc">@BEGINNINGS_SWASH</span><span class="p">;</span><span class="w">

    </span><span class="c"># --- End-of-word swashes:</span><span class="w">
    </span><span class="k">ignore</span><span class="w"> </span><span class="k">substitute</span><span class="w"> </span><span class="nc">@ENDINGS</span><span class="p">'</span><span class="w"> </span><span class="nc">@LETTER</span><span class="p">;</span><span class="w">
    </span><span class="k">substitute</span><span class="w"> </span><span class="nc">@ENDINGS</span><span class="p">'</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="nc">@ENDINGS_SWASH</span><span class="p">;</span><span class="w">

</span><span class="p">}</span> <span class="nf">cswh</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>If a feature only targets glyphs at the beginning or ending of a word, such as
the <code class="language-plaintext highlighter-rouge">init</code> and <code class="language-plaintext highlighter-rouge">fina</code> features, then the application could be made responsible
for detecting the word boundary; the feature itself would be simply defined as
the appropriate substitutions without regard for word boundary. Such application
responsibilities must be described in the feature tag registry.</p>

<p><a name="5.g"></a></p>
<h3 id="5g-gsub-lookuptype-7-extension-substitution">5.g. [GSUB LookupType 7] Extension substitution</h3>

<p>The <code class="language-plaintext highlighter-rouge">useExtension</code> keyword specifies creating lookups of this lookup type. See
§<a href="#4.e">4.e</a> and §<a href="#8.a">8.a</a>.</p>

<p><a name="5.h"></a></p>
<h3 id="5h-gsub-lookuptype-8-reverse-chaining-single-substitution">5.h. [GSUB LookupType 8] Reverse Chaining Single Substitution</h3>

<p>A Reverse Chaining Single Substitution shares the same syntax as a Chaining
Contextual Substitution rule. The syntactic differences are that it can specify
only single substitutions, the marked target sequence can consist of only a
single glyph or glyph class, and the rule is specified with the keyword
reversesub or rsub. An application’s layout engine will also treat this rule
differently than any other rule type; the lookup is applied to the text string
in the reverse of the logical reading order.</p>

<p>The rule is specified as follows:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">reversesub</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="n">n</span><span class="p">]</span><span class="w"> </span><span class="n">d</span><span class="p">'</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">alt</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><a name="6"></a></p>
<h2 id="6-glyph-positioning-gpos-rules">6. Glyph positioning (GPOS) rules</h2>

<p>Glyph positioning rules begin with the keyword <code class="language-plaintext highlighter-rouge">position</code>; this keyword may be
abbreviated as <code class="language-plaintext highlighter-rouge">pos</code>. (The <code class="language-plaintext highlighter-rouge">enumerate</code> or <code class="language-plaintext highlighter-rouge">ignore</code> keywords may precede the
<code class="language-plaintext highlighter-rouge">position</code> keyword in some cases.) The GPOS lookup type is auto-detected from
the format of the rest of the rule.</p>

<p>Glyph positioning is specified in terms of metrics [§<a href="#2.e.ii">2.e.ii</a>], device
tables [§<a href="#2.e.iii">2.e.iii</a>], value records [§<a href="#2.e.iv">2.e.iv</a>], and anchors
[§<a href="#2.e.vii">2.e.vii</a>]. In all positioning rules, these are inserted immediately
after the glyph(s) they apply to, with the exception of Pair Pos format B.</p>

<p><a name="6.a"></a></p>
<h3 id="6a-gpos-lookuptype-1-single-adjustment-positioning">6.a. [GPOS LookupType 1] Single adjustment positioning</h3>

<p>A Single Pos rule is specified as:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="err">|</span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">valuerecord</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>Here, the <code class="language-plaintext highlighter-rouge">&lt;glyph|glyphclass&gt;</code> is adjusted by the
<code class="language-plaintext highlighter-rouge">&lt;valuerecord&gt;</code>[§<a href="#2.e.iv">2.e.iv</a>]. For example, to reduce the left and right
side-bearings of a glyph each by 80 design units:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="p">&lt;-</span><span class="mi">80</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">-</span><span class="mi">160</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p><a name="6.b"></a></p>
<h3 id="6b-gpos-lookuptype-2-pair-adjustment-positioning">6.b. [GPOS LookupType 2] Pair adjustment positioning</h3>

<p><a name="6.b.i"></a></p>
<h4 id="6bi-specific-and-class-pair-kerning">6.b.i. Specific and class pair kerning</h4>

<p>Rules for this LookupType are usually used for kerning, and may be in either of
2 formats:</p>

<h5 id="pair-pos-format-a">Pair Pos format A:</h5>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="err">|</span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">valuerecord</span><span class="p">&gt;</span><span class="w">
         </span><span class="p">&lt;</span><span class="n">glyph</span><span class="err">|</span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">valuerecord</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>The first <code class="language-plaintext highlighter-rouge">&lt;valuerecord&gt;</code>[§<a href="#2.e.iv">2.e.iv</a>] corresponds to the first
<code class="language-plaintext highlighter-rouge">&lt;glyph|glyphclass&gt;</code>, and the second <code class="language-plaintext highlighter-rouge">&lt;valuerecord&gt;</code> corresponds to the second
<code class="language-plaintext highlighter-rouge">&lt;glyph|glyphclass&gt;</code>. The following example illustrates an unusual way to
specify a kern value of -100:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="p">-</span><span class="mi">60</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">&lt;-</span><span class="mi">40</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">-</span><span class="mi">40</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<h5 id="pair-pos-format-b">Pair Pos format B:</h5>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="err">|</span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="err">|</span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w">
         </span><span class="p">&lt;</span><span class="n">valuerecord</span><span class="p">&gt;;</span><span class="w">     </span><span class="c"># for first &lt;glyph|glyphclass&gt;</span><span class="w">
</span></code></pre></div></div>

<p>This format is provided since it closely parallels the way kerning is expressed
in AFM files. Thus, it is a shorter way of expressing:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="err">|</span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">valuerecord</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">A</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="err">|</span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">NULL</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>Kerning can most easily be expressed with this format. This will result in
adjusting the first glyph’s x advance, except when in the <code class="language-plaintext highlighter-rouge">vrkn</code> feature, in
which case it will adjust the first glyph’s y advance. Some examples:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pos</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">-</span><span class="mi">100</span><span class="p">;</span><span class="w">        </span><span class="c"># specific pair (no glyph class present)</span><span class="w">
</span><span class="k">pos</span><span class="w"> </span><span class="p">[</span><span class="n">T</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">-</span><span class="mi">100</span><span class="p">;</span><span class="w">      </span><span class="c"># class pair (singleton glyph class present)</span><span class="w">
</span><span class="k">pos</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="nc">@a</span><span class="w"> </span><span class="p">-</span><span class="mi">100</span><span class="p">;</span><span class="w">       </span><span class="c"># class pair (glyph class present, even if singleton)</span><span class="w">
</span><span class="k">pos</span><span class="w"> </span><span class="nc">@T</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="n">u</span><span class="p">]</span><span class="w"> </span><span class="p">-</span><span class="mi">80</span><span class="p">;</span><span class="w">  </span><span class="c"># class pair</span><span class="w">
</span></code></pre></div></div>

<p>Note that in both formats A and B, if at least one glyph class is present (even
if it is a singleton glyph class), then the rule is interpreted as a class pair;
otherwise, the rule is interpreted as a specific pair.</p>

<p>In the <code class="language-plaintext highlighter-rouge">kern</code> feature, the specific glyph pairs should precede the glyph class
pairs in the feature file, mirroring the way that they will be stored in the
font. Otherwise, depending on the implementation, the specific glyph pairs
following any class pair may never be applied. (See §<a href="#7">7</a>, “Ordering of
lookups and rules in the feature file,” below.)</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">feature</span> <span class="nf">kern</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c"># specific pairs for all scripts</span><span class="w">
    </span><span class="c"># class pairs for all scripts</span><span class="w">
</span><span class="p">}</span> <span class="nf">kern</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><a name="6.b.ii"></a></p>
<h4 id="6bii-enumerating-pairs">6.b.ii. Enumerating pairs</h4>

<p>If some specific pairs are more conveniently represented as a class pair, but
the editor does not want the pairs to be in a class kerning subtable, then the
class pair must be preceded by the keyword <code class="language-plaintext highlighter-rouge">enumerate</code> (which can be abbreviated
as <code class="language-plaintext highlighter-rouge">enum</code>). The implementation software will enumerate such pairs as specific
pairs. Thus, these pairs can be thought of as “class exceptions” to class pairs.
For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">@Y_LC</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">y</span><span class="w"> </span><span class="n">yacute</span><span class="w"> </span><span class="n">ydieresis</span><span class="p">];</span><span class="w">
</span><span class="nc">@SMALL_PUNC</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="n">comma</span><span class="w"> </span><span class="n">semicolon</span><span class="w"> </span><span class="n">period</span><span class="p">];</span><span class="w">

</span><span class="k">enum</span><span class="w"> </span><span class="k">pos</span><span class="w"> </span><span class="nc">@Y_LC</span><span class="w"> </span><span class="n">semicolon</span><span class="w"> </span><span class="p">-</span><span class="mi">80</span><span class="p">;</span><span class="w">     </span><span class="c"># specific pairs</span><span class="w">
</span><span class="k">pos</span><span class="w">      </span><span class="n">f</span><span class="w"> </span><span class="n">quoteright</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span><span class="w">         </span><span class="c"># specific pair</span><span class="w">
</span><span class="k">pos</span><span class="w">      </span><span class="nc">@Y_LC</span><span class="w"> </span><span class="nc">@SMALL_PUNC</span><span class="w"> </span><span class="p">-</span><span class="mi">100</span><span class="p">;</span><span class="w">  </span><span class="c"># class pair</span><span class="w">
</span></code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">enum</code> rule above can be replaced by:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pos</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">semicolon</span><span class="w"> </span><span class="p">-</span><span class="mi">80</span><span class="p">;</span><span class="w">
</span><span class="k">pos</span><span class="w"> </span><span class="n">yacute</span><span class="w"> </span><span class="n">semicolon</span><span class="w"> </span><span class="p">-</span><span class="mi">80</span><span class="p">;</span><span class="w">
</span><span class="k">pos</span><span class="w"> </span><span class="n">ydieresis</span><span class="w"> </span><span class="n">semicolon</span><span class="w"> </span><span class="p">-</span><span class="mi">80</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>without changing the representation in the font. Since this representation is
convenient for generating a large number of specific pairs, it may be used even
when some of the pairs generated by the <code class="language-plaintext highlighter-rouge">enum</code> rules are incorrect. Specific
pairs generated by an <code class="language-plaintext highlighter-rouge">enum</code> rule may be overridden by specifying preceding
single pairs. Because of this case, it is not an error when specific kern pairs
conflict because they have the same glyphs. When specific kern pair rules
conflict, the first rule specified is used, and later conflicting rule are
skipped.</p>

<p><a name="6.b.iii"></a></p>
<h4 id="6biii-subtable-breaks">6.b.iii. Subtable breaks</h4>

<p>The implementation software will insert a subtable break within a run of class
pair rules if a single subtable cannot be created due to class overlap. A
warning will be emitted. For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pos</span><span class="w"> </span><span class="p">[</span><span class="n">Ygrave</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">colon</span><span class="w"> </span><span class="n">semicolon</span><span class="p">]</span><span class="w"> </span><span class="p">-</span><span class="mi">55</span><span class="p">;</span><span class="w">   </span><span class="c"># [line 99]   In first subtable</span><span class="w">
</span><span class="k">pos</span><span class="w"> </span><span class="p">[</span><span class="n">Y</span><span class="w"> </span><span class="n">Yacute</span><span class="p">]</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="p">-</span><span class="mi">50</span><span class="p">;</span><span class="w">            </span><span class="c"># [line 100]  In first subtable</span><span class="w">
</span><span class="k">pos</span><span class="w"> </span><span class="p">[</span><span class="n">Y</span><span class="w"> </span><span class="n">Yacute</span><span class="w"> </span><span class="n">Ygrave</span><span class="p">]</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="p">-</span><span class="mi">60</span><span class="p">;</span><span class="w">     </span><span class="c"># [line 101]  In second subtable</span><span class="w">
</span></code></pre></div></div>

<p>will produce a warning that a new subtable has been started at line 101, and
that some kern pairs within this subtable may never be accessed. Note that this
allows the font to be built, but the result will not match the developer’s
intention. The kerning feature will not work as expected until the causes for
all such errors are removed. The pair “Ygrave period” will have a value of 0 if
the above example comprised the entire lookup, since “Ygrave” is in the coverage
(i.e. union of the first glyphs) of the first subtable. One way to understand
this is to imagine a lookup table of kern class pairs as a spreadsheet of all
possible pairs of kern left-side classes that are used in the lookup table with
all the kern right-side classes that are used in the lookup table. Imagine each
left side class is the title of a row in the spreadsheet, and each right side
class is the title of a column. A glyph can be put in only one row title, and in
only one column title. All glyphs not named in a row title get put together in a
special row title. All glyphs not named in a column title get put together in a
special column title. When you specify the value of a class pair, you are
specifying the value in only one cell of the spreadsheet. When you specify a
series of kern pair rules between a particular left side class and a series of
right side classes, you are filling in a series of cells in the row for the
specific left side class. All cells for which no values are specified are set to</p>
<ol>
  <li>When programs look for a kern value between “Ygrave” and something else, they
look through the list of left side class definitions to find the first
occurrence of “Ygrave”. By definition, the first spreadsheet row which includes
“Ygrave” will define the kern pair value of “Ygrave” with all other right-side
classes, e.g spreadsheet columns. Since a pair value with a right-side period
has not been explicitly defined at this point, the default value is 0. Since the
programs will not look further than this row, the kern class pair:</li>
</ol>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pos</span><span class="w"> </span><span class="p">[</span><span class="n">Y</span><span class="w"> </span><span class="n">Yacute</span><span class="w"> </span><span class="n">Ygrave</span><span class="p">]</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="p">-</span><span class="mi">60</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>will never be used.</p>

<p>Sometimes the class kerning subtable may get too large. The editor can make it
smaller by forcing subtable breaks at any point by inserting the statement:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">subtable</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>between two class kerning rules. The new subtable created will still be in the
same lookup, so the editor must ensure that the coverages of the subtables thus
created do not overlap, since the processing rules will not find and report a
conflict.</p>

<p>When seeking to decrease the class table size, it is best to place subtable
breaks between blocks of rules where there is no cross linking, such that no
left side class in one block is used with any right side class in the other
block. However, in most large Western fonts, such groups are so small that
breaking them into separate subtables does not yield much decrease in the
overall lookup size. In this common case, an adequate strategy is to first
divide the entire list of kern class rules in two roughly equal blocks with a
subtable break. If this does not make the class kern tables small enough, then
continue to subdivide each block of rules in two with a subtable break. Because
the class definitions must be repeated for each subtable, a point of diminishing
returns usually comes with around 6 subtable breaks.</p>

<p><a name="6.c"></a></p>
<h3 id="6c-gpos-lookuptype-3-cursive-attachment-positioning">6.c. [GPOS LookupType 3] Cursive attachment positioning</h3>

<p>A Cursive Pos rule is specified as:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="k">cursive</span><span class="w">
    </span><span class="p">&lt;</span><span class="n">glyph</span><span class="err">|</span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w">
    </span><span class="p">&lt;</span><span class="k">anchor</span><span class="p">&gt;</span><span class="w">   </span><span class="c"># Entry anchor</span><span class="w">
    </span><span class="p">&lt;</span><span class="k">anchor</span><span class="p">&gt;;</span><span class="w">  </span><span class="c"># Exit anchor</span><span class="w">
</span></code></pre></div></div>

<p>The first <code class="language-plaintext highlighter-rouge">&lt;anchor&gt;</code> [§<a href="#2.e.vii">2.e.vii</a>] indicates the entry anchor point for
<code class="language-plaintext highlighter-rouge">&lt;glyph|glyphclass&gt;</code>; the second, the exit anchor point.</p>

<p>For example, to define the entry point of glyph meem.medial to be at x=500,
y=20, and the exit point to be at x=0, y=-20:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="k">cursive</span><span class="w"> </span><span class="n">meem</span><span class="p">.</span><span class="n">medial</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="mi">20</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">-</span><span class="mi">20</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>A glyph may have a defined entry point, exit point, or both. <code class="language-plaintext highlighter-rouge">&lt;anchor&gt;</code> format
D, the null anchor, must be used to indicate that an <code class="language-plaintext highlighter-rouge">&lt;anchor&gt;</code> is not defined.</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="k">cursive</span><span class="w"> </span><span class="n">meem</span><span class="p">.</span><span class="n">end</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="mi">20</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="k">NULL</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p><a name="6.d"></a></p>
<h3 id="6d-gpos-lookuptype-4-mark-to-base-attachment-positioning">6.d. [GPOS LookupType 4] Mark-to-Base attachment positioning</h3>

<p>A Mark-to-Base Pos rule is specified as:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="err">|</span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w"> </span><span class="c"># base glyph(s)</span><span class="w">
    </span><span class="c"># Anchor and mark glyph class, repeated for each</span><span class="w">
    </span><span class="c"># attachment point on the base glyph(s)</span><span class="w">
    </span><span class="p">&lt;</span><span class="k">anchor</span><span class="p">&gt;</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="p">&lt;</span><span class="n">named</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w"> </span><span class="err">+</span><span class="w">
    </span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>Each <code class="language-plaintext highlighter-rouge">&lt;anchor&gt;</code> [§<a href="#2.e.vii">2.e.vii</a>] indicates the anchor point on the base
glyph(s) to which the mark class’ anchor point should be attached.</p>

<p>A single Mark-To-Base statement must specify all the anchor points and their
attaching mark classes.</p>

<p>This rule type does not actually support base glyph classes; the feature file
syntax allows this in order to compactly specify Mark-To-Base rules for the set
of glyphs which have the same anchor points. A feature file rule which uses a
glyph class for the base glyph is expanded in the font to a separate rule for
each glyph in the base class, although they will share the same anchor and mark
class records.</p>

<p>The named mark glyph classes and the anchor points of all the mark glyphs in the
named mark classes must have been previously defined in the feature file by
markClass statements [§<a href="#4.f">4.f</a>].</p>

<p><strong>Note:</strong> The mark classes used within a single lookup must be disjoint: none
may include a glyph which is in another mark class that is used within the same
lookup.</p>

<p>For example, to specify that the anchor of mark glyphs acute and grave is at
x=30, y=600, and that the anchor of mark glyphs dieresis and umlaut is at x=60,
y=600, and to position the anchor point of the four mark glyphs at anchor point
x=250, y=450 of glyphs a, e, o and u:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">markClass</span><span class="w"> </span><span class="p">[</span><span class="n">acute</span><span class="w"> </span><span class="n">grave</span><span class="p">]</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">150</span><span class="w"> </span><span class="p">-</span><span class="mi">10</span><span class="p">&gt;</span><span class="w"> </span><span class="nc">@TOP_MARKS</span><span class="p">;</span><span class="w">
</span><span class="k">markClass</span><span class="w"> </span><span class="p">[</span><span class="n">dieresis</span><span class="w"> </span><span class="n">umlaut</span><span class="p">]</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">300</span><span class="w"> </span><span class="p">-</span><span class="mi">10</span><span class="p">&gt;</span><span class="w"> </span><span class="nc">@TOP_MARKS</span><span class="p">;</span><span class="w">
</span><span class="k">markClass</span><span class="w"> </span><span class="p">[</span><span class="n">cedilla</span><span class="p">]</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">300</span><span class="w"> </span><span class="mi">600</span><span class="p">&gt;</span><span class="w"> </span><span class="nc">@BOTTOM_MARKS</span><span class="p">;</span><span class="w">

</span><span class="k">position</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="n">u</span><span class="p">]</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">250</span><span class="w"> </span><span class="mi">450</span><span class="p">&gt;</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="nc">@TOP_MARKS</span><span class="w">
                        </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">250</span><span class="w"> </span><span class="p">-</span><span class="mi">10</span><span class="p">&gt;</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="nc">@BOTTOM_MARKS</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><a name="6.e"></a></p>
<h3 id="6e-gpos-lookuptype-5-mark-to-ligature-attachment-positioning">6.e. [GPOS LookupType 5] Mark-to-Ligature attachment positioning</h3>

<p>A Mark-to-Ligature Pos rule is specified as:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="n">ligature</span><span class="w"> </span><span class="p">&lt;</span><span class="n">ligature</span><span class="w"> </span><span class="n">glyph</span><span class="err">|</span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w">   </span><span class="c"># ligature glyph or glyph class</span><span class="w">
    </span><span class="c"># Anchor and named mark glyph class, repeated for</span><span class="w">
    </span><span class="c"># each anchor point on the first component glyph:</span><span class="w">
    </span><span class="p">&lt;</span><span class="k">anchor</span><span class="p">&gt;</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="p">&lt;</span><span class="n">named</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="n">glyph</span><span class="w"> </span><span class="n">class</span><span class="p">&gt;</span><span class="w"> </span><span class="err">+</span><span class="w">

    </span><span class="c"># Start of anchor and mark info for the next ligature component</span><span class="w">
    </span><span class="n">ligComponent</span><span class="w">

    </span><span class="c"># Anchor and named mark glyph class, repeated for</span><span class="w">
    </span><span class="c"># each anchor point on the next component glyph:</span><span class="w">
    </span><span class="p">&lt;</span><span class="k">anchor</span><span class="p">&gt;</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="p">&lt;</span><span class="n">named</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="n">glyph</span><span class="w"> </span><span class="n">class</span><span class="p">&gt;</span><span class="w"> </span><span class="err">+</span><span class="w">

    </span><span class="c"># Additional blocks of ligComponent plus anchor and named mark glyph class</span><span class="w">
    </span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>The statement must specify all the anchor-mark class pairs for all the ligature
components. It follows the form of the Mark-To-Base rule, except that a set of
anchor-mark class pairs must be specified for each component glyph in the
ligature. The set of anchor-mark class pairs for one component is separated for
the set of the next component by the <code class="language-plaintext highlighter-rouge">ligComponent</code> keyword. If there are no
anchor points on a component, it must still specify at least one anchor, which
should be the NULL anchor. It is not required that each component have the same
number of anchor points.</p>

<p>The named mark glyph classes and the anchor points of all the mark glyphs in the
named mark classes must have been previously defined in the feature file by
markClass statements [§<a href="#4.f">4.f</a>].</p>

<p>The example in the OpenType specification for this LookupType could be expressed
as:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. Define mark anchors:</span><span class="w">
</span><span class="k">markClass</span><span class="w"> </span><span class="n">sukun</span><span class="w">    </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">261</span><span class="w"> </span><span class="mi">488</span><span class="p">&gt;</span><span class="w"> </span><span class="nc">@TOP_MARKS</span><span class="p">;</span><span class="w">
</span><span class="k">markClass</span><span class="w"> </span><span class="n">kasratan</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">346</span><span class="w"> </span><span class="p">-</span><span class="mi">98</span><span class="p">&gt;</span><span class="w"> </span><span class="nc">@BOTTOM_MARKS</span><span class="p">;</span><span class="w">

</span><span class="c"># 2. Define mark-to-ligature rules:</span><span class="w">
</span><span class="k">position</span><span class="w"> </span><span class="n">ligature</span><span class="w"> </span><span class="n">lam_meem_jeem</span><span class="w">
    </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">625</span><span class="w"> </span><span class="mi">1800</span><span class="p">&gt;</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="nc">@TOP_MARKS</span><span class="w">     </span><span class="c"># mark above lam</span><span class="w">
    </span><span class="n">ligComponent</span><span class="w">                          </span><span class="c"># start specifying marks for meem</span><span class="w">
    </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">376</span><span class="w"> </span><span class="p">-</span><span class="mi">368</span><span class="p">&gt;</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="nc">@BOTTOM_MARKS</span><span class="w">  </span><span class="c"># mark below meem</span><span class="w">
    </span><span class="n">ligComponent</span><span class="w">                          </span><span class="c"># start specifying marks for jeem</span><span class="w">
    </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="k">NULL</span><span class="p">&gt;;</span><span class="w">                        </span><span class="c"># jeem has no marks</span><span class="w">
</span></code></pre></div></div>

<p>Note that a NULL anchor needs to be specified for a ligature component only when
it has no non-NULL anchors. Otherwise, the implementation will supply a NULL
anchor for each mark class that is not used by a ligature component.</p>

<p>If a glyph class is used, each ligature in the glyph class must have the same
number of components and the same anchor positions on each component.</p>

<p><a name="6.f"></a></p>
<h3 id="6f-gpos-lookuptype-6-mark-to-mark-attachment-positioning">6.f. [GPOS LookupType 6] Mark-to-Mark attachment positioning</h3>

<p>A Mark-to-Mark Pos rule is specified as:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="err">|</span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w"> </span><span class="c"># mark glyph(s)</span><span class="w">
    </span><span class="c"># Anchor and mark glyph class, repeated for each</span><span class="w">
    </span><span class="c"># attachment point on the mark glyph(s)</span><span class="w">
    </span><span class="p">&lt;</span><span class="k">anchor</span><span class="p">&gt;</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="p">&lt;</span><span class="n">named</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w"> </span><span class="err">+</span><span class="w">
    </span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>This rule is distinguished from a Mark-to-Base Pos rule [§<a href="#6.d">6.d</a>] by the
first <code class="language-plaintext highlighter-rouge">mark</code> keyword. Otherwise, it has the same syntax and restrictions.</p>

<p>The example in the OpenType specification for this LookupType could be expressed
as:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. Define name mark class:</span><span class="w">
</span><span class="k">markClass</span><span class="w"> </span><span class="n">damma</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">189</span><span class="w"> </span><span class="p">-</span><span class="mi">103</span><span class="p">&gt;</span><span class="w"> </span><span class="nc">@MARK_CLASS_1</span><span class="p">;</span><span class="w">
</span><span class="c"># 2. Define mark-to-mark rule:</span><span class="w">
</span><span class="k">position</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="n">hamza</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">221</span><span class="w"> </span><span class="mi">301</span><span class="p">&gt;</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="nc">@MARK_CLASS_1</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><a name="6.g"></a></p>
<h3 id="6g-gpos-lookuptype-7-contextual-positioning">6.g. [GPOS LookupType 7] Contextual positioning</h3>

<p>This LookupType is a functional subset of GPOS LookupType 8, chaining contextual
positioning. Thus, all desired rules of this LookupType can be expressed in
terms of chaining contextual positioning rules.</p>

<p><a name="6.h"></a></p>
<h3 id="6h-gpos-lookuptype-8-chaining-contextual-positioning">6.h. [GPOS LookupType 8] Chaining contextual positioning</h3>

<p><a name="6.h.i"></a></p>
<h4 id="6hi-specifying-a-chain-positioning-rule-and-marking-sub-run">6.h.i. Specifying a Chain Positioning rule and marking sub-run</h4>

<p>A Chain Positioning rule target sequence has three parts: backtrack, input, and
lookahead glyph sequences. A glyph sequence comprises one or more glyphs or
glyph classes.</p>

<p>The most important is input glyph sequence. This is the sequence of glyphs and
glyph classes to which positioning operations are applied. Optionally, a prefix
(also known as backtrack) glyph sequence may be specified, as well as a suffix
(also known as lookahead) glyph sequence. The entire sequence of glyphs — prefix
plus input plus suffix — must match in the current context for the rule to be
applied. The match sequence is aligned to the current context by aligning the
first glyph of the input sequence with the current glyph of the text being
processed. If the rule is matched, then the current context moves the current
glyph pointer ahead in the original text by the length of the input sequence.
Note that in the FEA syntax, the entire context string (backtrack sequence +
input sequence + look-ahead sequence) are all written in the text string order.
This is worth emphasis, as inside the lookup rule, the glyphs of the backtrack
sequence are written in reverse order from the text to be matched. Developers of
font editing tools who know this are sometimes confused by the FEA syntax.</p>

<p>For each glyph or glyph class in the input sequence, the contextual rule may
specify one or more lookups (§<a href="#4.e">4.e</a>) to be applied at that position. Note
that the specified lookups may contain many rules; the implementation must
ensure that only one rule in a referenced lookup will match at that position
in the input sequence. Lookups cannot be specified for the glyphs or glyph
classes in the backtrack and lookahead sequences.</p>

<p>The input sequence is defined by appending the mark (<code class="language-plaintext highlighter-rouge">'</code>) character to all the
glyph names and class names (and only these names) within the input sequence.
Applying the mark (<code class="language-plaintext highlighter-rouge">'</code>) character to keywords such as anchor and mark or a value
record will result in a syntax error.</p>

<p><a name="6.h.ii"></a></p>
<h4 id="6hii-specifying-contextual-positioning-with-explicit-lookup-references">6.h.ii. Specifying Contextual Positioning with explicit lookup references</h4>

<p>The most general form of the contextual substitution rule is to explicitly
reference named lookups in the rule.</p>

<h6 id="example">Example:</h6>
<p>Define two standalone lookups (§<a href="#4.e">4.e</a>), and then reference them in the
input sequence of contextual positioning rules with the keyword <code class="language-plaintext highlighter-rouge">lookup</code> and the
lookup name.</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">markClass</span><span class="w"> </span><span class="p">[</span><span class="n">acute</span><span class="w"> </span><span class="n">grave</span><span class="p">]</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">150</span><span class="w"> </span><span class="p">-</span><span class="mi">10</span><span class="p">&gt;</span><span class="w"> </span><span class="nc">@ALL_MARKS</span><span class="p">;</span><span class="w">

</span><span class="k">lookup</span> <span class="nf">CNTXT_PAIR_POS</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="k">position</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="p">-</span><span class="mi">10</span><span class="p">;</span><span class="w">
     </span><span class="k">position</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">-</span><span class="mi">12</span><span class="p">;</span><span class="w">
 </span><span class="p">}</span> <span class="nf">CNTXT_PAIR_POS</span><span class="p">;</span><span class="w">

</span><span class="k">lookup</span> <span class="nf">CNTXT_MARK_TO_BASE</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="k">position</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">250</span><span class="w"> </span><span class="mi">450</span><span class="p">&gt;</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="nc">@ALL_MARKS</span><span class="p">;</span><span class="w">
     </span><span class="k">position</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">250</span><span class="w"> </span><span class="mi">450</span><span class="p">&gt;</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="nc">@ALL_MARKS</span><span class="p">;</span><span class="w">
 </span><span class="p">}</span> <span class="nf">CNTXT_MARK_TO_BASE</span><span class="p">;</span><span class="w">

</span><span class="k">feature</span> <span class="nf">test</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="k">position</span><span class="w"> </span><span class="n">T</span><span class="p">'</span><span class="w"> </span><span class="k">lookup</span> <span class="nf">CNTXT_PAIR_POS</span><span class="w"> </span><span class="p">[</span><span class="n">o</span><span class="w"> </span><span class="n">c</span><span class="p">]'</span><span class="w"> </span><span class="nc">@ALL_MARKS</span><span class="p">'</span><span class="w"> </span><span class="k">lookup</span> <span class="nf">CNTXT_MARK_TO_BASE</span><span class="p">;</span><span class="w">
 </span><span class="p">}</span> <span class="nf">test</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>This rule has only an input sequence, and no backtrack or lookahead sequence. It
will match when the current glyph is ‘T’, followed by either ‘o’ or ‘c’,
followed by any mark glyph. The lookup CNTXT_PAIR_POS will applied to the ‘T’,
and the lookup CNTXT_MARK_TO_BASE will be applied to the glyphs in the class
@ALL_MARKS.</p>

<p>This form of the contextual positioning rule is the most flexible. You can
specify a positioning lookup for more than one input sequence glyph or glyph
class, the referenced lookups can be of different types, and the referenced
lookups can have different lookup flags that the parent contextual lookup. The
drawback is that it is difficult to understand what position rule will be
applied, and the implementation may not warn if the referenced lookup does not
contain a rule that matches the context.</p>

<p>When it is acceptable to specify a positioning rule for only one input glyph or
glyph class in the input sequence, and that the referenced lookup have the same
lookup flag as the parent contextual lookup, then you can specify a contextual
rule with the positioning rule in-line. This is much easier to understand.</p>

<p><a name="6.h.iii"></a></p>
<h4 id="6hiii-specifying-contextual-positioning-with-in-line-single-positioning-rules">6.h.iii. Specifying Contextual Positioning with in-line single positioning rules</h4>

<h6 id="example-1-3">Example 1:</h6>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="p">[</span><span class="n">quoteleft</span><span class="w"> </span><span class="n">quotedblleft</span><span class="w"> </span><span class="p">][</span><span class="n">Y</span><span class="w"> </span><span class="n">T</span><span class="p">]'</span><span class="w"> </span><span class="p">&lt;</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;</span><span class="w"> </span><span class="p">[</span><span class="n">quoteright</span><span class="w"> </span><span class="n">quotedblright</span><span class="p">];</span><span class="w">
</span><span class="k">position</span><span class="w"> </span><span class="p">[</span><span class="n">quoteleft</span><span class="w"> </span><span class="n">quotedblleft</span><span class="w"> </span><span class="p">][</span><span class="n">Y</span><span class="w"> </span><span class="n">T</span><span class="p">]'</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="p">[</span><span class="n">quoteright</span><span class="w"> </span><span class="n">quotedblright</span><span class="p">];</span><span class="w">
</span></code></pre></div></div>

<p>Both of these rules have an input sequence of a single glyph position, for which
the glyph class [Y T] is specified. The marked glyph class is followed by a
value record. The first form shows a full value record which allows you to alter
both the (x,y) coordinates of the origin and the (x,y) coordinates of the
advance width. The second rule shows the simple form of the value record, which
specifies a value for only a change to the x value of the advance width. Note
that the value record modifies the glyph which it follows. These both increase
the advance width of Y or T by 20, when preceded by either quoteleft or
quotedblleft, and followed by quoteright or quotedblright. Note that not all
marked glyphs or glyph classes in the input sequence must be followed by a value
record; if this is omitted, then the item’s positioning info will not be
affected.</p>

<h6 id="example-2-3">Example 2:</h6>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="n">f</span><span class="p">'</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="n">t</span><span class="p">;</span><span class="w">
</span><span class="k">position</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="n">f</span><span class="p">'</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="n">t</span><span class="p">'</span><span class="w"> </span><span class="p">-</span><span class="mi">5</span><span class="w"> </span><span class="n">period</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>The first example specifies a kern pair “ft” when preceded by “s”, and increases
the x-advance of f by 10. The second specifies a kern triplet “ft.”, when
preceded by “s”. The x-advance of f is increased by 10, and the x-advance of t
is decreased by 5. The entire run of marked glyphs will be consumed by a rule;
in the first case, after matching this rule, the set of rules in current lookup
will next be applied starting at the glyph “t”. In the second case, the rules
will next be applied starting at the glyph “period”.</p>

<p><strong>Special notes on contextual kerning</strong></p>

<p>Contextual positioning rules must be in a different lookup than pair positioning
rules, since the rules are of different lookup types. Because each lookup is
applied independently of the other lookup(s) over the entire text stream, the
positioning change specified in a pair kerning rule will be added to the
positioning change specified in a contextual kerning rule, whenever the two
rules match the same glyph pair in the text stream. This effect can be managed
by specifying the contextual kerning rules values so that the sum of the pair
positioning rule value and the contextual positioning rule value add to the
desired value, as in example 3A.</p>

<h6 id="example-3a">Example 3A:</h6>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="n">L</span><span class="w"> </span><span class="n">quoteright</span><span class="w"> </span><span class="p">-</span><span class="mi">150</span><span class="p">;</span><span class="w">
</span><span class="k">position</span><span class="w"> </span><span class="n">quoteright</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="p">-</span><span class="mi">120</span><span class="p">;</span><span class="w">
</span><span class="k">position</span><span class="w"> </span><span class="n">L</span><span class="p">'</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class="n">quoteright</span><span class="p">'</span><span class="w"> </span><span class="mi">70</span><span class="w"> </span><span class="n">A</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>Desired final kern adjustment: <code class="language-plaintext highlighter-rouge">L' -100 quoteright' -50 A;</code></p>

<p>In this example, the intended kern correction for the triplet “L quoteright A”
is an adjustment of -100 to the advance width of the L when followed by
quoteright, and of -50 to the advance width of quoteright when followed by A.
However, since the pair positioning rules will adjust the pair “L quoteright” by
-150 and the pair “quoteright A” by -120, the adjustment values in the
contextual rule for the triplet must be set as shown. This approach is feasible,
but difficult to understand.</p>

<p>Another approach is to simply make all the kerning be contextual by marking the
first glyph or glyph class of each pair positioning rule. Since all the kern
rules will then be in a single lookup, only one rule will match in any context,
and there is no need to figure out which rules add up. This solution is shown in
example 3B using feature file syntax for contextual positioning. Notice,
however, that the triplet rule has to be defined before the other two rules.
Otherwise, the pair positioning rules will block the triplet’s positioning 
adjustment.</p>

<h6 id="example-3b">Example 3B:</h6>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="n">L</span><span class="p">'</span><span class="w"> </span><span class="p">-</span><span class="mi">100</span><span class="w"> </span><span class="n">quoteright</span><span class="p">'</span><span class="w"> </span><span class="p">-</span><span class="mi">50</span><span class="w"> </span><span class="n">A</span><span class="p">;</span><span class="w">
</span><span class="k">position</span><span class="w"> </span><span class="n">L</span><span class="p">'</span><span class="w"> </span><span class="p">-</span><span class="mi">150</span><span class="w"> </span><span class="n">quoteright</span><span class="p">;</span><span class="w">
</span><span class="k">position</span><span class="w"> </span><span class="n">quoteright</span><span class="p">'</span><span class="w"> </span><span class="p">-</span><span class="mi">120</span><span class="w"> </span><span class="n">A</span><span class="p">;</span><span class="w">
</span><span class="k">position</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="n">f</span><span class="p">'</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">period</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>In order to make pair positioning rules easier to read and write as contextual
kern pairs, the feature file syntax will identify a special case of contextual
rule which contains only one marked glyph or glyph class, followed by one or
more unmarked glyph or glyph class, plus a value record. This will be treated as
a contextual pair positioning statement, and will be the only one case where a
value record may follow an unmarked glyph. Example 3B can thus be written as
example 3C. Both examples are exactly equivalent.</p>

<h6 id="example-3c">Example 3C:</h6>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="n">L</span><span class="p">'</span><span class="w"> </span><span class="p">-</span><span class="mi">100</span><span class="w"> </span><span class="n">quoteright</span><span class="p">'</span><span class="w"> </span><span class="p">-</span><span class="mi">50</span><span class="w"> </span><span class="n">A</span><span class="p">;</span><span class="w">
</span><span class="k">position</span><span class="w"> </span><span class="n">L</span><span class="p">'</span><span class="w"> </span><span class="n">quoteright</span><span class="w"> </span><span class="p">-</span><span class="mi">150</span><span class="p">;</span><span class="w">  </span><span class="c"># special cases of contextual positioning</span><span class="w">
</span><span class="k">position</span><span class="w"> </span><span class="n">quoteright</span><span class="p">'</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="p">-</span><span class="mi">120</span><span class="p">;</span><span class="w">  </span><span class="c"># where value record follows unmarked glyph,</span><span class="w">
</span><span class="k">position</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="n">f</span><span class="p">'</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="n">period</span><span class="p">;</span><span class="w">    </span><span class="c"># making them exactly equivalent to 3B.</span><span class="w">
</span></code></pre></div></div>

<p>Note that the following statement (Example 3D) is NOT a pair kerning statement,
and would almost always be an error of intent.</p>

<h6 id="example-3d">Example 3D:</h6>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="n">L</span><span class="p">'</span><span class="w"> </span><span class="n">quoteright</span><span class="p">'</span><span class="w"> </span><span class="p">-</span><span class="mi">150</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>This statement does two things that are not desirable in pair kerning statement.
First, it decreases the advance width of quoteright, not L. Second, it will move
the current glyph pointer forward by 2 glyphs, skipping over the quoteright so
that quoteright will not be examined for matching kern rules.</p>

<p>The FEA syntax will not allow applying positioning lookups of different types in
one contextual rule. For example, if you want to position sukun over
lam_meem_jeem when followed by alef, and kern lam_meem_jeem with alef in this
context, you need to put the mark and kern rules in different lookups.</p>

<h6 id="example-4-2">Example 4:</h6>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">mark</span><span class="w"> </span><span class="n">sukun</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;</span><span class="w"> </span><span class="nc">@TOP_CLASS</span><span class="p">;</span><span class="w">

</span><span class="k">lookup</span> <span class="nf">MARK_POS</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">position</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">lam_meem_jeem</span><span class="p">'</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">625</span><span class="w"> </span><span class="mi">1800</span><span class="p">&gt;</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="nc">@TOP_CLASS</span><span class="w"> </span><span class="n">alef</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">MARK_POS</span><span class="p">;</span><span class="w">

</span><span class="k">lookup</span> <span class="nf">MARK_KERN</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">position</span><span class="w"> </span><span class="n">lam_meem_jeem</span><span class="p">'</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="nc">@TOP_CLASS</span><span class="w">
    </span><span class="n">alef</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">MARK_KERN</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>The rule in lookup MARK_POS will position sukun over lam_meem_jeem when followed
by alef. The second rule will add 5 to the advance width of lam_meem_jeem when
followed by sukun and then by alef.</p>

<h6 id="example-6">Example 6:</h6>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">lookup</span> <span class="nf">a_reduce_sb</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">pos</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">&lt;-</span><span class="mi">80</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">-</span><span class="mi">160</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;;</span><span class="w">
</span><span class="p">}</span> <span class="nf">a_reduce_sb</span><span class="p">;</span><span class="w">

</span><span class="k">lookup</span> <span class="nf">a_raise</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">pos</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">&lt;</span><span class="mi">0</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;;</span><span class="w">
</span><span class="p">}</span> <span class="nf">a_raise</span><span class="p">;</span><span class="w">

</span><span class="k">feature</span> <span class="nf">kern</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">pos</span><span class="w"> </span><span class="n">a</span><span class="p">'</span><span class="w"> </span><span class="k">lookup</span> <span class="nf">a_reduce_sb</span><span class="w"> </span><span class="k">lookup</span> <span class="nf">a_raise</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">test</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>In this example the rule in the kern feature will match the sequence “a b” and apply 
multiple lookups to the input “a”. The first lookup will subtract 80 units from the 
x placement and 160 units from the x advance of “a”. The second lookup will adjust 
the y placement of “a” by 100 units.</p>

<h6 id="example-7">Example 7:</h6>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">lookup</span> <span class="nf">REPHA_SPACE</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">pos</span><span class="w"> </span><span class="n">ka</span><span class="p">-</span><span class="n">gran</span><span class="w"> </span><span class="p">&lt;</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">644</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;;</span><span class="w">
</span><span class="p">}</span> <span class="nf">REPHA_SPACE</span><span class="p">;</span><span class="w">

</span><span class="k">lookup</span> <span class="nf">ANUSVARA_SPACE</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">pos</span><span class="w"> </span><span class="n">ka</span><span class="p">-</span><span class="n">gran</span><span class="w"> </span><span class="p">&lt;</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">510</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;;</span><span class="w">
</span><span class="p">}</span> <span class="nf">ANUSVARA_SPACE</span><span class="p">;</span><span class="w">

</span><span class="k">lookup</span> <span class="nf">ADD70</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">pos</span><span class="w"> </span><span class="n">ka</span><span class="p">-</span><span class="n">gran</span><span class="w"> </span><span class="p">&lt;</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">70</span><span class="w"> </span><span class="mi">0</span><span class="p">&gt;;</span><span class="w">
</span><span class="p">}</span> <span class="nf">ADD70</span><span class="p">;</span><span class="w">

</span><span class="k">lookup</span> <span class="nf">ADD_ADVANCE_WIDTH</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">pos</span><span class="w"> </span><span class="n">ka</span><span class="p">-</span><span class="n">gran</span><span class="p">'</span><span class="w"> </span><span class="k">lookup</span> <span class="nf">REPHA_SPACE</span><span class="w"> </span><span class="k">lookup</span> <span class="nf">ANUSVARA_SPACE</span><span class="w"> </span><span class="k">lookup</span> <span class="nf">ADD70</span><span class="w"> </span><span class="n">repha</span><span class="p">-</span><span class="n">gran</span><span class="w"> </span><span class="n">anusvara</span><span class="p">-</span><span class="n">gran</span><span class="p">;</span><span class="w">
    </span><span class="k">pos</span><span class="w"> </span><span class="n">ka</span><span class="p">-</span><span class="n">gran</span><span class="p">'</span><span class="w"> </span><span class="k">lookup</span> <span class="nf">REPHA_SPACE</span><span class="w"> </span><span class="k">lookup</span> <span class="nf">ADD70</span><span class="w"> </span><span class="n">repha</span><span class="p">-</span><span class="n">gran</span><span class="p">;</span><span class="w">
    </span><span class="k">pos</span><span class="w"> </span><span class="n">ka</span><span class="p">-</span><span class="n">gran</span><span class="p">'</span><span class="w"> </span><span class="k">lookup</span> <span class="nf">ANUSVARA_SPACE</span><span class="w"> </span><span class="k">lookup</span> <span class="nf">ADD70</span><span class="w"> </span><span class="n">anusvara</span><span class="p">-</span><span class="n">gran</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">ADD_ADVANCE_WIDTH</span><span class="p">;</span><span class="w">

</span><span class="k">feature</span> <span class="nf">dist</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">lookup</span> <span class="nf">ADD_ADVANCE_WIDTH</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">dist</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>
<p>In this example the rules in <code class="language-plaintext highlighter-rouge">ADD_ADVANCE_WIDTH</code> will match the sequences “ka-gran repha-gran anusvara-gran”, 
“ka-gran repha-gran”, or “ka-gran anusvara-gran” and apply multiple lookups to the input. Here
each lookup adds advance width to “ka-gran” based on the following glyphs.</p>

<p><a name="6.h.iv"></a></p>
<h4 id="6hiv-specifying-contextual-positioning-with-in-line-cursive-positioning-rules">6.h.iv. Specifying Contextual Positioning with in-line cursive positioning rules</h4>

<p>The contextual form of the cursive positioning rule consists of simply adding
contextual glyphs or glyph classes before the <code class="language-plaintext highlighter-rouge">cursive</code> keyword, and/or after
the anchors. The base glyph must be marked as part of the input sequence; the
others may or may not be marked.</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="nc">@BACKTRACK_GLYPHS_FOR_MEEM</span><span class="w"> </span><span class="k">cursive</span><span class="w">
</span><span class="n">meem</span><span class="p">.</span><span class="n">medial</span><span class="p">'</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="mi">20</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">-</span><span class="mi">20</span><span class="p">&gt;</span><span class="w"> </span><span class="nc">@LOOKAHEAD_GLYPHS_FOR_MEEM</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><a name="6.h.v"></a></p>
<h4 id="6hv-specifying-contextual-positioning-with-in-line-mark-attachment-positioning-rules">6.h.v. Specifying Contextual Positioning with in-line mark attachment positioning rules</h4>

<p>For all three forms of the mark attachment rules - Mark-To-Base,
Mark-To-Ligature, and Mark-To-Mark - the contextual form of the positioning
rules consist of inserting glyph sequences in one or more of three places in the
rule:</p>
<ol>
  <li>
    <table>
      <tbody>
        <tr>
          <td>before the initial ‘base</td>
          <td>ligature</td>
          <td>mark’ keyword</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>after the base glyph or glyph class</li>
  <li>after all the anchor-mark class clauses</li>
</ol>

<p>At least one of the mark classes must be marked as part of the input sequence;
the other glyphs or glyph classes in the contextual sequence may or may not be
marked. There is special treatment of the mark classes. The implementation
creates a glyph class which is the input glyph class to which the positioning
lookup is applied. Each mark class that is marked as part of the input sequence
is added to this glyph class. If the rule has four mark classes, and three are
marked as part of the input sequence. the result is a single glyph class in the
input sequence which contains the glyphs from the three marked mark classes. The
base glyph or glyph class is also always added in the contextual sequence.</p>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">position</span><span class="w"> </span><span class="p">[</span><span class="n">T</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">F</span><span class="p">]</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="n">u</span><span class="p">]</span><span class="w"> </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">250</span><span class="w"> </span><span class="mi">450</span><span class="p">&gt;</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="nc">@TOP_MARKS</span><span class="p">'</span><span class="w">
                                </span><span class="p">&lt;</span><span class="k">anchor</span><span class="w"> </span><span class="mi">250</span><span class="w"> </span><span class="p">-</span><span class="mi">10</span><span class="p">&gt;</span><span class="w"> </span><span class="k">mark</span><span class="w"> </span><span class="nc">@BOTTOM_MARKS</span><span class="p">'</span><span class="w"> </span><span class="nc">@VOWELS</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>This contextual rule will match when the current context matches the 4 item
glyph sequence “[T V F] [a e o u] [top and bottom marks] @VOWELS”. The input
sequence has only one item, a glyph class which consists of all the glyphs from
the two mark classes.</p>

<p><a name="6.h.vi"></a></p>
<h4 id="6hvi-specifying-exceptions-to-the-chain-pos-rule">6.h.vi. Specifying exceptions to the Chain Pos rule</h4>

<p>Exceptions to a chaining contextual positioning rule are expressed by inserting
a statement of the following form anywhere before the chaining contextual rule
and in the same lookup:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ignore</span><span class="w"> </span><span class="k">position</span><span class="w"> </span><span class="p">&lt;</span><span class="n">marked</span><span class="w"> </span><span class="n">glyph</span><span class="w"> </span><span class="n">sequence</span><span class="p">&gt;</span><span class="w"> </span><span class="p">(,</span><span class="w"> </span><span class="p">&lt;</span><span class="n">marked</span><span class="w"> </span><span class="n">glyph</span><span class="w"> </span><span class="n">sequence</span><span class="p">&gt;)*;</span><span class="w">
</span></code></pre></div></div>

<p>This rule works in exactly the same was as specifying exceptions to a chaining
contextual substitution rule [§<a href="#5.f.ii">5.f.ii</a>].</p>

<p><a name="6.i"></a></p>
<h3 id="6i-gpos-lookuptype-9-extension-positioning">6.i. [GPOS LookupType 9] Extension positioning</h3>

<p>The <code class="language-plaintext highlighter-rouge">useExtension</code> keyword specifies creating lookups of this lookup type.
See §<a href="#4.e">4.e</a>.</p>

<p><a name="7"></a></p>
<h2 id="7-ordering-of-lookups-and-rules-in-the-feature-file">7. Ordering of lookups and rules in the feature file</h2>

<p><a name="7.a"></a></p>
<h3 id="7a-an-opentype-layout-engines-layout-algorithm">7.a. An OpenType Layout engine’s layout algorithm</h3>

<p>The following is a reference summary of the algorithm used by an OpenType layout
(OTL) engine to perform substitutions and positionings. The important aspect of
this for a feature file editor is that each lookup corresponds to one “pass”
over the glyph run (see step 4 below). Thus, each lookup has as input the
accumulated result of all previous lookups in the LookupList (whether in the
same feature or in other features).</p>

<p>1.  All glyphs in the client’s glyph run must belong to the same language system.
    (Glyph sequence matching may not occur across language systems.)</p>

<hr />
<p>Do the following first for the GSUB and then for the GPOS:</p>

<p>2.  Assemble all features (including any required feature) for the glyph run’s
language system.</p>

<p>3.  Assemble all lookups in these features, in LookupList order, removing any
    duplicates. (All features and thus all lookups needn’t be applied to every glyph
    in the run.)</p>

<p>4.  For each lookup:</p>

<p>5.  For each glyph in the glyph run:</p>

<p>6.  If the lookup is applied to that glyph and the lookupflag doesn’t indicate
    that that glyph is to be ignored:</p>

<p>7.  For each subtable in the lookup:</p>

<p>8.  If the subtable’s target context is matched:</p>

<p>9.  Do the glyph substitution or positioning,</p>

<hr />
<p>OR:</p>

<p>If this is a (chain) contextual lookup do the following [(10)-(11)] in the
subtable’s Subst/PosLookupRecord order:</p>

<p>10. For each (sequenceIndex, lookupListIndex) pair:</p>

<p>11. Apply lookup[lookupListIndex] at input sequence[sequenceIndex]
    [steps(7)-(11)]</p>

<p>12. Goto the glyph after the input sequence matched in (8)
    (i.e. skip any remaining subtables in the lookup).</p>

<p>The “target context” in step 8 above comprises the input sequence and any
backtrack and lookahead sequences.</p>

<p>The input sequence must be matched entirely within the lookup’s “application
range” at that glyph (that contiguous subrun of glyphs including and around the
current glyph on which the lookup is applied). There is no such restriction on
the backtrack and lookahead sequences.</p>

<p>“Matching” includes matching any glyphs designated to be skipped in the lookup’s
LookupFlag.</p>

<p><a name="7.b"></a></p>
<h3 id="7b-ordering-of-lookups-and-subtables">7.b. Ordering of lookups and subtables</h3>

<p>A lookup in the OpenType font will be created from each named lookup block
[§<a href="#4.e">4.e</a>] or each run of rules with the same feature, script, language,
lookupflag and lookup type attribute.</p>

<p>Lookups will be created in the GSUB/GPOS table’s LookupList in the same order as
the corresponding named lookup blocks or runs of rules in the feature file,
except for the lookups that comprise the <code class="language-plaintext highlighter-rouge">aalt</code> feature. These will always be
created before all other features [§<a href="#8.a">8.a</a>].</p>

<p>A lookup may contain one or more subtables. Subtable breaks may have been
inserted by the implementation software due to format restrictions, or they may
have been explicitly requested by the editor [§<a href="#4.f">4.f</a>]. In either case,
subtables will be created in the same order as the corresponding subtables in
the feature file, if the order is relevant to OT layout. If the order is
irrelevant, the implementation may choose to order subtables within a lookup in
any manner.</p>

<p>Note that the lookup sharing mechanism (i.e. a <code class="language-plaintext highlighter-rouge">lookup</code> reference statement that
refers to a named lookup block) is implemented simply by referring to the
LookupList index of the lookup as many times as needed in the Feature tables.</p>

<p><a name="7.c"></a></p>
<h3 id="7c-ordering-of-rules-within-a-lookup">7.c. Ordering of rules within a lookup</h3>

<p>In the feature file, the ordering of rules within a lookup is important only for
chaining contextual substitution and chaining contextual positioning rules. This
is because in all other cases of LookupTypes (including ligature substitutions,
see [§<a href="#5.d">5.d</a>]), the appropriate ordering is automatically deduced, and the
implementation sorts the rules accordingly when writing them to the font file.</p>

<p><a name="8"></a></p>
<h2 id="8-specially-handled-features">8. Specially handled features</h2>

<p><a name="8.a"></a></p>
<h3 id="8a-the-all-alternates-feature-aalt">8.a. The all alternates feature (<code class="language-plaintext highlighter-rouge">aalt</code>)</h3>

<p>The <code class="language-plaintext highlighter-rouge">aalt</code> feature consists of a feature definition block which contains a
series of statements in the form:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">feature</span> <span class="err">&lt;</span><span class="nf">feature</span><span class="w"> </span><span class="n">tag</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>followed by one or more single and alternates substitution rules.</p>

<p>The feature file parser should create the <code class="language-plaintext highlighter-rouge">aalt</code> feature from the feature file
definition as follows:</p>

<ol>
  <li>
    <p>Considering only features indicated by:</p>

    <p><code class="language-plaintext highlighter-rouge">feature &lt;feature tag&gt;;</code></p>

    <p>in the <code class="language-plaintext highlighter-rouge">aalt</code> specification feature block (see example below), combine all
single and alternate substitutions in those features (including single
substitutions that appear within a chaining contextual rule) into groups
with the first glyph in the group being the target glyph of the
substitution. Subsequent elements of the group will be ordered by the order
of the relevant rule in the feature file. Duplicate glyphs will be removed.</p>

    <p>The <code class="language-plaintext highlighter-rouge">aalt</code> feature block must appear before the feature block of any
<code class="language-plaintext highlighter-rouge">&lt;feature tag&gt;</code> it references in the above manner. It will also always be
created as the first feature in the font (i.e. its lookups will be at the
beginning of the GSUB LookupList).</p>
  </li>
  <li>
    <p>Add any additional single and alternate substitutions in the <code class="language-plaintext highlighter-rouge">aalt</code>
specification to the groups that were created algorithmically, by step 1. This
facility is provided to fine-tune the semantic groups, for instance, if certain
glyphs weren’t referenced in any of the features indicated in step 1 above. This
can also be used to override substitutions specified by including other
features: for any target glyph, the alternate glyphs specified by this mechanism
precede in order any other alternate glyphs.</p>
  </li>
  <li>
    <p>If there are only two glyphs in a group, create a single substitution in the
<code class="language-plaintext highlighter-rouge">aalt</code> feature, with the first glyph being the target glyph and the second glyph
being the replacement glyph. If there are more than two glyphs in a group,
create an alternate substitution in the <code class="language-plaintext highlighter-rouge">aalt</code> feature, with the first glyph
being the target glyph and the remaining glyphs being the alternate set. These
alternate glyphs will be sorted in the order that the source features are named
in the <code class="language-plaintext highlighter-rouge">aalt</code> definition, <em>not</em> the order of the feature definitions in the
file. Alternates defined explicitly, as in step 2 above, will precede all
others.</p>
  </li>
</ol>

<h6 id="the-useextension-keyword">The <code class="language-plaintext highlighter-rouge">useExtension</code> keyword:</h6>

<p>The <code class="language-plaintext highlighter-rouge">useExtension</code> keyword may optionally precede <code class="language-plaintext highlighter-rouge">{</code> in the feature block
syntax. The <code class="language-plaintext highlighter-rouge">aalt</code> lookups will be created with the GSUB Extension lookup type
if and only if the <code class="language-plaintext highlighter-rouge">useExtension</code> keyword is used. Note that since the Extension
lookup types were added in OpenType specification v1.3, they will not be
recognized by all OpenType layout parsers.</p>

<h6 id="specifying-language-system">Specifying language system:</h6>

<p>This feature will be registered under all language systems specified by
<code class="language-plaintext highlighter-rouge">languagesystem</code> statements; see §<a href="#4.b.i">4.b.i</a> above.</p>

<p>The following are not allowed in the <code class="language-plaintext highlighter-rouge">aalt</code> feature definition: <code class="language-plaintext highlighter-rouge">script</code>,
<code class="language-plaintext highlighter-rouge">language</code>, <code class="language-plaintext highlighter-rouge">lookupflag</code>, and <code class="language-plaintext highlighter-rouge">subtable</code> statements; named lookup blocks and
lookup reference statements. The <code class="language-plaintext highlighter-rouge">aalt</code> lookups will be created with LookupFlag
0.</p>

<p><em>Examples:</em></p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">languagesystem</span><span class="w"> </span><span class="n">DFLT</span><span class="w"> </span><span class="n">dflt</span><span class="p">;</span><span class="w">
</span><span class="k">languagesystem</span><span class="w"> </span><span class="n">latn</span><span class="w"> </span><span class="n">dflt</span><span class="p">;</span><span class="w">
</span><span class="k">languagesystem</span><span class="w"> </span><span class="n">latn</span><span class="w"> </span><span class="n">TRK</span><span class="p">;</span><span class="w">
</span><span class="k">languagesystem</span><span class="w"> </span><span class="n">cyrl</span><span class="w"> </span><span class="n">dflt</span><span class="p">;</span><span class="w">

</span><span class="k">feature</span> <span class="nf">aalt</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">feature</span> <span class="nf">salt</span><span class="p">;</span><span class="w">
    </span><span class="k">feature</span> <span class="nf">smcp</span><span class="p">;</span><span class="w">
    </span><span class="k">substitute</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">alt</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">aalt</span><span class="p">;</span><span class="w">

</span><span class="k">feature</span> <span class="nf">smcp</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">sub</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">-</span><span class="n">c</span><span class="p">]</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="p">[</span><span class="n">A</span><span class="p">.</span><span class="n">sc</span><span class="p">-</span><span class="n">C</span><span class="p">.</span><span class="n">sc</span><span class="p">];</span><span class="w">
    </span><span class="k">sub</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">f_i</span><span class="p">;</span><span class="w">     </span><span class="c"># not considered for aalt</span><span class="w">
</span><span class="p">}</span> <span class="nf">smcp</span><span class="p">;</span><span class="w">

</span><span class="k">feature</span> <span class="nf">salt</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">sub</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">.</span><span class="n">alt1</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">alt2</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">alt3</span><span class="p">];</span><span class="w">
    </span><span class="k">sub</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">[</span><span class="n">c</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="n">e</span><span class="p">]'</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="p">[</span><span class="n">c</span><span class="p">.</span><span class="n">mid</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">mid</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">mid</span><span class="p">];</span><span class="w">
    </span><span class="k">sub</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">alt</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">salt</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">aalt</code> lookups from the above example will be registered under the default
language systems of the <code class="language-plaintext highlighter-rouge">DFLT</code>, <code class="language-plaintext highlighter-rouge">latn</code> and <code class="language-plaintext highlighter-rouge">cyrl</code> scripts, and also under the
<code class="language-plaintext highlighter-rouge">latn</code>/<code class="language-plaintext highlighter-rouge">TRK </code> language systems. The <code class="language-plaintext highlighter-rouge">aalt</code> created would be the same as if the
font editor had specified:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">feature</span> <span class="nf">aalt</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">sub</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">.</span><span class="n">alt1</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">alt2</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">alt3</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">sc</span><span class="p">];</span><span class="w">
    </span><span class="k">sub</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">[</span><span class="n">b</span><span class="p">.</span><span class="n">alt</span><span class="w"> </span><span class="n">B</span><span class="p">.</span><span class="n">sc</span><span class="p">];</span><span class="w">
    </span><span class="k">sub</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">[</span><span class="n">c</span><span class="p">.</span><span class="n">mid</span><span class="w"> </span><span class="n">C</span><span class="p">.</span><span class="n">sc</span><span class="p">];</span><span class="w">
    </span><span class="k">sub</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">[</span><span class="n">d</span><span class="p">.</span><span class="n">alt</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">mid</span><span class="p">];</span><span class="w">
    </span><span class="k">sub</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">mid</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">aalt</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>The following example will result in the <code class="language-plaintext highlighter-rouge">aalt</code> lookups being created with the
GSUB Extension lookup type:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">feature</span> <span class="nf">aalt</span><span class="w"> </span><span class="k">useExtension</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">feature</span> <span class="nf">salt</span><span class="p">;</span><span class="w">
    </span><span class="k">feature</span> <span class="nf">smcp</span><span class="p">;</span><span class="w">
    </span><span class="k">substitute</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">alt</span><span class="p">;</span><span class="w">
    </span><span class="c"># ... other rules</span><span class="w">
</span><span class="p">}</span> <span class="nf">aalt</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><a name="8.b"></a></p>
<h3 id="8b-the-optical-size-feature-size">8.b. The optical size feature (<code class="language-plaintext highlighter-rouge">size</code>)</h3>

<p>This feature is unique in that it contains no substitution or positioning rules
(the LookupCount field in its Feature table will always be 0).</p>

<p>The feature’s data is accessed instead through the FeatureParams value of its
Feature table.</p>

<p>Thus, the syntax for this feature is different from all other features. The
feature block must contain:</p>

<ul>
  <li>one <code class="language-plaintext highlighter-rouge">parameters</code> statement</li>
  <li>and zero or more <code class="language-plaintext highlighter-rouge">sizemenuname</code> statements.</li>
</ul>

<p>No other feature file statements, blocks or keywords are permitted. (Comments
are allowed.)</p>

<p>This feature will be created in the GPOS table and will be registered under all
language systems specified by <code class="language-plaintext highlighter-rouge">languagesystem</code> statements (see §<a href="#4.b.i">4.b.i</a>
above).</p>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">feature</span> <span class="nf">size</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">parameters</span><span class="w"> </span><span class="mi">100</span><span class="w">  </span><span class="c"># design size (decipoints)</span><span class="w">
                 </span><span class="mi">3</span><span class="w">  </span><span class="c"># subfamily identifier</span><span class="w">
                </span><span class="mi">80</span><span class="w">  </span><span class="c"># range start (exclusive, decipoints)</span><span class="w">
               </span><span class="mi">139</span><span class="p">;</span><span class="w"> </span><span class="c"># range end (inclusive, decipoints)</span><span class="w">
    </span><span class="k">sizemenuname</span><span class="w"> </span><span class="s">"Win MinionPro Size Name"</span><span class="p">;</span><span class="w">
    </span><span class="k">sizemenuname</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="s">"Mac MinionPro Size Name"</span><span class="p">;</span><span class="w">
    </span><span class="k">sizemenuname</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">21</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="s">"Mac MinionPro Size Name"</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">size</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>See the OpenType feature tag registry for a description of the <code class="language-plaintext highlighter-rouge">parameters</code>
statement fields. “decipoints” is a unit of 1/10 of a point.</p>

<p>These values may also be specified more directly as decimal point values, but a
decimal point and following value is then required. For example, “8.0” and “80”
will both result in the same value being stored in the font.</p>

<p>The parameter <code class="language-plaintext highlighter-rouge">sizemenuname</code> provides the menu name to be used for a group of
fonts with the same subfamily identifier.</p>

<p>If the font is part of such a group, then the <code class="language-plaintext highlighter-rouge">sizemenuname</code> statement must be
provided in order for the members of the group to be grouped together in a
sub-menu under the specified menu name.</p>

<p>In this case, we strongly recommend providing at least the two entries for
Windows and Macintosh platform Roman script name strings. You may also include
any another localized name strings that may be useful.</p>

<p>If the font is not part of such a group, then the <code class="language-plaintext highlighter-rouge">sizemenuname</code> statements must
be omitted, and all fields but the first (design size) for the parameter
statement must be set to 0. This form may be abbreviated by setting the
subfamily identifier to 0, and omitting the two remaining zeros. For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">parameters</span><span class="w"> </span><span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">  </span><span class="c"># Indicate intended design size to be 10 pts.</span><span class="w">
</span></code></pre></div></div>

<p>This can be used to indicate the intended design size for a font, even when it
is not part of an optical size group.</p>

<p>The syntax of the <code class="language-plaintext highlighter-rouge">sizemenuname</code> statement follows that of the name table name
strings, as described in §<a href="#9.e">9.e</a>.</p>

<p>The names specified by the <code class="language-plaintext highlighter-rouge">sizemenuname</code> statement are actually stored in the
name table, with name IDs starting at the first unused name ID at or after 256.</p>

<p><a name="8.c"></a></p>
<h3 id="8c-descriptive-names-for-stylistic-set-features-ss01---ss20">8.c. Descriptive names for Stylistic Set features (<code class="language-plaintext highlighter-rouge">ss01</code> - <code class="language-plaintext highlighter-rouge">ss20</code>)</h3>

<p>As of the OpenType specification 1.6, descriptive names are allowed for
stylistic substitution features. These names are specified within a feature
block for a Stylistic Set feature. The implementation will store the name
strings in the name table, and will create a feature parameter data block which
references them.</p>

<p>A single Stylistic Set feature block may contain more than one descriptive name
in order to support different languages. These names are defined within a
<code class="language-plaintext highlighter-rouge">featureNames</code> block that must be inside the stylistic set feature block, and
must precede any of the rules in the feature. The syntax for a <code class="language-plaintext highlighter-rouge">featureNames</code>
block is:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">featureNames</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">name</span><span class="w"> </span><span class="p">&lt;</span><span class="n">platform</span><span class="w"> </span><span class="n">ID</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">script</span><span class="w"> </span><span class="n">ID</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">language</span><span class="w"> </span><span class="n">ID</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">text</span><span class="w"> </span><span class="n">string</span><span class="p">&gt;;</span><span class="w">
    </span><span class="c"># This name entry is repeated for every script and language to be supported.</span><span class="w">
</span><span class="p">}</span><span class="err">;
</span></code></pre></div></div>

<p>The syntax for the individual name string entries is similar to that of the
name table nameID entries (see §<a href="#9.e">9.e</a>) - the only difference is that the
introductory keyword is <code class="language-plaintext highlighter-rouge">name</code>, and the name ID value is omitted, since the
nameID value is auto-generated by the feature compiler.</p>

<h6 id="example-1">Example:</h6>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">feature</span> <span class="nf">ss01</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">featureNames</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="k">name</span><span class="w"> </span><span class="s">"Feature description for MS Platform, script Unicode, language English"</span><span class="p">;</span><span class="w">
        </span><span class="c"># Without platform ID, script ID, or language ID specified,</span><span class="w">
        </span><span class="c"># the implementation assumes (3,1,0x409).</span><span class="w">

        </span><span class="k">name</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="n">x411</span><span class="w"> </span><span class="s">"Feature description for MS Platform, script Unicode, language Japanese"</span><span class="p">;</span><span class="w">
        </span><span class="k">name</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="s">"Feature description for Apple Platform, script Roman, language unspecified"</span><span class="p">;</span><span class="w">
        </span><span class="c"># When only platform ID is specified, the implementation assumes script and language</span><span class="w">
        </span><span class="c"># is Latin. For Apple this is (1,0,0).</span><span class="w">

        </span><span class="k">name</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="s">"Feature description for Apple Platform, script Japanese, language Japanese"</span><span class="p">;</span><span class="w">
    </span><span class="p">}</span><span class="err">;
        # --- </span><span class="nf">rules</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">feature</span> <span class="err">---
} </span><span class="nf">ss01</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><a name="8.d"></a></p>
<h3 id="8d-ui-label-names-for-character-variant-features-cv01---cv99">8.d. UI Label names for Character Variant features (<code class="language-plaintext highlighter-rouge">cv01</code> - <code class="language-plaintext highlighter-rouge">cv99</code>)</h3>

<p>As of the OpenType specification 1.6, UI label names are allowed for Character
Variant features. These names are specified within the feature block for a
Character Variant feature. The implementation will store the name strings in the
name table, and will create a feature parameter data block which references
them.</p>

<p>A set of NameID entries are specified within a parameter block entry. The
parameter block must precede any of the rules in the feature. There are four
distinct NameID entry types. The <code class="language-plaintext highlighter-rouge">ParamUILabelNameID</code> entry may be omitted or
repeated as often as needed. The other NameID types may be omitted, or defined
only once. The NameID entries must be specified in the order listed below. A
single Character Variant NameID entry may contain more than one name string
entry in order to support different languages and platforms.</p>

<p>Following the set of NameID entries, a series of 24 bit Unicode values may be
specified. These provide Unicode values for the base glyphs referenced by the
feature. The developer may specify none, some, or all of the Unicode values for
the base glyphs. The Unicode value may be written with either decimal or
hexadecimal notation: the value must be preceded by ‘0x’ if it is a hexadecimal
value. The 24 bit field means that the largest Unicode value allowed is ((1«24)
-1), aka, 0xFFFFFF</p>

<p>The intent of the NameID entries is described in the OpenType spec document:
<a href="https://docs.microsoft.com/en-us/typography/opentype/spec/features_ae#cv01-cv99">OpenType Layout tag registry — section on feature tags, tag name <code class="language-plaintext highlighter-rouge">cv01</code> -
<code class="language-plaintext highlighter-rouge">cv99</code></a>.</p>

<p><strong>Note:</strong> The <code class="language-plaintext highlighter-rouge">ParamUILabelNameID</code> entries are used when one base glyph is mapped
to more than one variant; the font designer may then specify one
<code class="language-plaintext highlighter-rouge">ParamUILabelNameID</code> for each variant, in order to uniquely describe that
variant. If any <code class="language-plaintext highlighter-rouge">ParamUILabelNameID</code> entries are specified, the number of
<code class="language-plaintext highlighter-rouge">ParamUILabelNameID</code> entries must match the number of variants for each base
glyph. If the Character Variant feature specifies more than one base glyph, then
the set of NameID entries in the parameter block will be used for each base
glyph and its variants.</p>

<p>The syntax for a <code class="language-plaintext highlighter-rouge">cvParameters</code> block is:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cvParameters</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">FeatUILabelNameID</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="k">name</span><span class="w"> </span><span class="p">&lt;</span><span class="n">platform</span><span class="w"> </span><span class="n">ID</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">script</span><span class="w"> </span><span class="n">ID</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">language</span><span class="w"> </span><span class="n">ID</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">text</span><span class="w"> </span><span class="n">string</span><span class="p">&gt;;</span><span class="w">
    </span><span class="p">}</span><span class="err">;
    </span><span class="nf">FeatUITooltipTextNameID</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="k">name</span><span class="w"> </span><span class="p">&lt;</span><span class="n">platform</span><span class="w"> </span><span class="n">ID</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">script</span><span class="w"> </span><span class="n">ID</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">language</span><span class="w"> </span><span class="n">ID</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">text</span><span class="w"> </span><span class="n">string</span><span class="p">&gt;;</span><span class="w">
    </span><span class="p">}</span><span class="err">;
    </span><span class="nf">SampleTextNameID</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="k">name</span><span class="w"> </span><span class="p">&lt;</span><span class="n">platform</span><span class="w"> </span><span class="n">ID</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">script</span><span class="w"> </span><span class="n">ID</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">language</span><span class="w"> </span><span class="n">ID</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">text</span><span class="w"> </span><span class="n">string</span><span class="p">&gt;;</span><span class="w">
    </span><span class="p">}</span><span class="err">;
    </span><span class="nf">ParamUILabelNameID</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="k">name</span><span class="w"> </span><span class="p">&lt;</span><span class="n">platform</span><span class="w"> </span><span class="n">ID</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">script</span><span class="w"> </span><span class="n">ID</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">language</span><span class="w"> </span><span class="n">ID</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">text</span><span class="w"> </span><span class="n">string</span><span class="p">&gt;;</span><span class="w">
    </span><span class="p">}</span><span class="err">;

    </span><span class="nf">Character</span><span class="w"> </span><span class="p">&lt;</span><span class="n">Unicode</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">string</span><span class="p">&gt;;</span><span class="w">
</span><span class="p">}</span><span class="err">;
</span></code></pre></div></div>

<p>The syntax for the individual name string entries within a NameID entry is
similar to that of the name table nameID entries (see §<a href="#9.e">9.e</a>) - the only
difference is that the introductory keyword is <code class="language-plaintext highlighter-rouge">name</code>, and the name ID value is
omitted, since the nameID value is auto-generated by the feature compiler.</p>

<h6 id="example-2">Example:</h6>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">feature</span> <span class="nf">cv01</span><span class="w"> </span><span class="p">{</span><span class="w">

    </span><span class="n">cvParameters</span><span class="w"> </span><span class="p">{</span><span class="w">

        </span><span class="n">FeatUILabelNameID</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="k">name</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="n">x0409</span><span class="w"> </span><span class="s">"uilabel simple a"</span><span class="p">;</span><span class="w">  </span><span class="c"># English US</span><span class="w">
            </span><span class="k">name</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="s">"uilabel simple a"</span><span class="p">;</span><span class="w">  </span><span class="c"># Mac English</span><span class="w">
        </span><span class="p">}</span><span class="err">;

        </span><span class="nf">FeatUITooltipTextNameID</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="k">name</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="n">x0409</span><span class="w"> </span><span class="s">"tool tip simple a"</span><span class="p">;</span><span class="w">  </span><span class="c"># English US</span><span class="w">
            </span><span class="k">name</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="s">"tool tip simple a"</span><span class="p">;</span><span class="w">  </span><span class="c"># Mac English</span><span class="w">
        </span><span class="p">}</span><span class="err">;

        </span><span class="nf">SampleTextNameID</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="k">name</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="n">x0409</span><span class="w"> </span><span class="s">"sample text simple a"</span><span class="p">;</span><span class="w">  </span><span class="c"># English US</span><span class="w">
            </span><span class="k">name</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="s">"sample text simple a"</span><span class="p">;</span><span class="w">  </span><span class="c"># Mac English</span><span class="w">
        </span><span class="p">}</span><span class="err">;

        </span><span class="nf">ParamUILabelNameID</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="k">name</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="n">x0409</span><span class="w"> </span><span class="s">"param1 text simple a"</span><span class="p">;</span><span class="w">  </span><span class="c"># English US</span><span class="w">
            </span><span class="k">name</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="s">"param1 text simple a"</span><span class="p">;</span><span class="w">  </span><span class="c"># Mac English</span><span class="w">
        </span><span class="p">}</span><span class="err">;

        </span><span class="nf">ParamUILabelNameID</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="k">name</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="n">x0409</span><span class="w"> </span><span class="s">"param2 text simple a"</span><span class="p">;</span><span class="w">  </span><span class="c"># English US</span><span class="w">
            </span><span class="k">name</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="s">"param2 text simple a"</span><span class="p">;</span><span class="w">  </span><span class="c"># Mac English</span><span class="w">
        </span><span class="p">}</span><span class="err">;

        </span><span class="nf">Character</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w">
        </span><span class="n">Character</span><span class="w"> </span><span class="mi">0</span><span class="n">x5DDE</span><span class="p">;</span><span class="w">

    </span><span class="p">}</span><span class="err">;

    # --- </span><span class="nf">rules</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">feature</span> <span class="err">---
} </span><span class="nf">cv01</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><a name="9"></a></p>
<h2 id="9-specifying-or-overriding-table-values">9. Specifying or overriding table values</h2>

<p>In addition to GSUB and GPOS OpenType layout features, the feature file syntax
enables specifying or overriding values in certain other tables. These are
specified within the corresponding table block:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="err">&lt;</span><span class="nf">table</span><span class="w"> </span><span class="n">tag</span><span class="p">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c"># ...</span><span class="w">
</span><span class="p">}</span> <span class="err">&lt;</span><span class="nf">table</span><span class="w"> </span><span class="n">tag</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>The following table values are currently supported:</p>

<p><a name="9.a"></a></p>
<h3 id="9a-base-table">9.a. BASE table</h3>

<p>If no BASE table entry is specified in the feature file, no BASE table is
created in the OpenType font.</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">BASE</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">HorizAxis</span><span class="p">.</span><span class="n">BaseTagList</span><span class="w"> </span><span class="p">&lt;</span><span class="n">baseline</span><span class="w"> </span><span class="n">tag</span><span class="p">&gt;</span><span class="err">+</span><span class="p">;</span><span class="w">
    </span><span class="n">HorizAxis</span><span class="p">.</span><span class="n">BaseScriptList</span><span class="w"> </span><span class="p">&lt;</span><span class="k">script</span><span class="w"> </span><span class="n">record</span><span class="p">&gt;</span><span class="w"> </span><span class="p">(,</span><span class="w"> </span><span class="p">&lt;</span><span class="k">script</span><span class="w"> </span><span class="n">record</span><span class="p">&gt;)*;</span><span class="w">
    </span><span class="n">HorizAxis</span><span class="p">.</span><span class="n">MinMax</span><span class="w"> </span><span class="p">&lt;</span><span class="n">minmax</span><span class="w"> </span><span class="n">record</span><span class="p">&gt;;</span><span class="w">

    </span><span class="n">VertAxis</span><span class="p">.</span><span class="n">BaseTagList</span><span class="w"> </span><span class="p">&lt;</span><span class="n">baseline</span><span class="w"> </span><span class="n">tag</span><span class="p">&gt;</span><span class="err">+</span><span class="p">;</span><span class="w">
    </span><span class="n">VertAxis</span><span class="p">.</span><span class="n">BaseScriptList</span><span class="w"> </span><span class="p">&lt;</span><span class="k">script</span><span class="w"> </span><span class="n">record</span><span class="p">&gt;</span><span class="w"> </span><span class="p">(,</span><span class="w"> </span><span class="p">&lt;</span><span class="k">script</span><span class="w"> </span><span class="n">record</span><span class="p">&gt;)*;</span><span class="w">
    </span><span class="n">VertAxis</span><span class="p">.</span><span class="n">MinMax</span><span class="w"> </span><span class="p">&lt;</span><span class="n">minmax</span><span class="w"> </span><span class="n">record</span><span class="p">&gt;;</span><span class="w">
</span><span class="p">}</span> <span class="nf">BASE</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>A <code class="language-plaintext highlighter-rouge">&lt;script record&gt;</code> is of the form:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="k">script</span><span class="w"> </span><span class="n">tag</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">default</span><span class="w"> </span><span class="n">baseline</span><span class="w"> </span><span class="n">tag</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">base</span><span class="w"> </span><span class="n">coord</span><span class="p">&gt;</span><span class="err">+</span><span class="w">
</span></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">&lt;base coord&gt;</code> can take several formats: <em>[ Currently only format A is implemented ]</em></p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Format A</span><span class="w">
</span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;</span><span class="w">

</span><span class="c"># Format B</span><span class="w">
</span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;</span><span class="w">

</span><span class="c"># Format C</span><span class="w">
</span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">device</span><span class="p">&gt;</span><span class="w">
</span></code></pre></div></div>

<p>The baseline tags for each <code class="language-plaintext highlighter-rouge">BaseTagList</code> must be sorted in increasing ASCII
order.</p>

<p>The number of baseline values for a particular script should be the same as
the number of baseline tags in the corresponding <code class="language-plaintext highlighter-rouge">BaseTagList</code>.</p>

<p>A <code class="language-plaintext highlighter-rouge">&lt;minmax record&gt;</code> <em>[ currently not implemented ]</em> is of the form:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="k">script</span><span class="w"> </span><span class="n">tag</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="k">language</span><span class="w"> </span><span class="n">tag</span><span class="p">&gt;</span><span class="w">  </span><span class="c"># Defines the language system</span><span class="w">
    </span><span class="p">&lt;</span><span class="n">base</span><span class="w"> </span><span class="n">coord</span><span class="p">&gt;,</span><span class="w">            </span><span class="c"># Min value for this language system</span><span class="w">
    </span><span class="p">&lt;</span><span class="n">base</span><span class="w"> </span><span class="n">coord</span><span class="p">&gt;</span><span class="w">             </span><span class="c"># Max value for this language system</span><span class="w">
    </span><span class="p">[,</span><span class="w">
    </span><span class="p">&lt;</span><span class="k">feature</span> <span class="nf">tag</span><span class="p">&gt;</span><span class="w">            </span><span class="c"># (Optional) feature tag</span><span class="w">
    </span><span class="p">&lt;</span><span class="n">base</span><span class="w"> </span><span class="n">coord</span><span class="p">&gt;,</span><span class="w">            </span><span class="c"># Min value for this feature tag</span><span class="w">
    </span><span class="p">&lt;</span><span class="n">base</span><span class="w"> </span><span class="n">coord</span><span class="p">&gt;]</span><span class="w">            </span><span class="c"># Max value for this feature tag</span><span class="w">
    </span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>An example of a simple BASE table is:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">BASE</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">HorizAxis</span><span class="p">.</span><span class="n">BaseTagList</span><span class="w">     </span><span class="n">ideo</span><span class="w"> </span><span class="n">romn</span><span class="p">;</span><span class="w">
    </span><span class="n">HorizAxis</span><span class="p">.</span><span class="n">BaseScriptList</span><span class="w">  </span><span class="n">latn</span><span class="w">   </span><span class="n">romn</span><span class="w">   </span><span class="p">-</span><span class="mi">120</span><span class="w">    </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">cyrl</span><span class="w">   </span><span class="n">romn</span><span class="w">   </span><span class="p">-</span><span class="mi">120</span><span class="w">    </span><span class="mi">0</span><span class="p">,</span><span class="w">
                              </span><span class="n">grek</span><span class="w">   </span><span class="n">romn</span><span class="w">   </span><span class="p">-</span><span class="mi">120</span><span class="w">    </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">hani</span><span class="w">   </span><span class="n">ideo</span><span class="w">   </span><span class="p">-</span><span class="mi">120</span><span class="w">    </span><span class="mi">0</span><span class="p">,</span><span class="w">
                              </span><span class="n">kana</span><span class="w">   </span><span class="n">ideo</span><span class="w">   </span><span class="p">-</span><span class="mi">120</span><span class="w">    </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">hang</span><span class="w">   </span><span class="n">ideo</span><span class="w">   </span><span class="p">-</span><span class="mi">120</span><span class="w">    </span><span class="mi">0</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">BASE</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><a name="9.b"></a></p>
<h3 id="9b-gdef-table">9.b. GDEF table</h3>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">GDEF</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">GlyphClassDef</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyphclass</span><span class="p">&gt;*,</span><span class="w">  </span><span class="c"># base glyphs</span><span class="w">
                  </span><span class="p">&lt;</span><span class="n">glyphclass</span><span class="p">&gt;*,</span><span class="w">  </span><span class="c"># ligature glyphs</span><span class="w">
                  </span><span class="p">&lt;</span><span class="n">glyphclass</span><span class="p">&gt;*,</span><span class="w">  </span><span class="c"># mark glyphs</span><span class="w">
                  </span><span class="p">&lt;</span><span class="n">glyphclass</span><span class="p">&gt;;</span><span class="w">   </span><span class="c"># component glyphs</span><span class="w">
    </span><span class="k">Attach</span><span class="w">        </span><span class="p">&lt;</span><span class="n">glyph</span><span class="err">|</span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;</span><span class="err">+</span><span class="p">;</span><span class="w"> </span><span class="c"># &lt;number&gt; is a contour point index</span><span class="w">

    </span><span class="k">LigatureCaretByDev</span><span class="w"> </span><span class="c"># Currently not implemented</span><span class="w">
    </span><span class="k">LigatureCaretByPos</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="err">|</span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">caret</span><span class="w"> </span><span class="k">position</span><span class="w"> </span><span class="n">value</span><span class="p">&gt;</span><span class="err">+</span><span class="p">;</span><span class="w">
    </span><span class="k">LigatureCaretByIndex</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="err">|</span><span class="n">glyphclass</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">caret</span><span class="w"> </span><span class="k">contour</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="n">value</span><span class="p">&gt;</span><span class="err">+</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">GDEF</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>The number of <code class="language-plaintext highlighter-rouge">&lt;caret value&gt;</code>s specified for a LigatureCaret must be: (number of
ligature components) - 1.</p>

<p>Only one <code class="language-plaintext highlighter-rouge">LigatureCaret</code> rule may be specified per glyph, whether it is
<code class="language-plaintext highlighter-rouge">LigatureCaretByPos</code> or <code class="language-plaintext highlighter-rouge">LigatureCaretByIndex</code>.</p>

<p>Here is an example of a GDEF table block:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">GDEF</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">GlyphClassDef</span><span class="w"> </span><span class="nc">@BASE</span><span class="p">,</span><span class="w"> </span><span class="nc">@LIGATURES</span><span class="p">,</span><span class="w"> </span><span class="nc">@MARKS</span><span class="p">,</span><span class="w"> </span><span class="nc">@COMPONENT</span><span class="p">;</span><span class="w">
    </span><span class="k">Attach</span><span class="w"> </span><span class="n">noon</span><span class="p">.</span><span class="n">final</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w">
    </span><span class="k">Attach</span><span class="w"> </span><span class="n">noon</span><span class="p">.</span><span class="n">initial</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w">
    </span><span class="k">LigatureCaretByPos</span><span class="w"> </span><span class="n">f_f_l</span><span class="w"> </span><span class="mi">400</span><span class="w"> </span><span class="mi">600</span><span class="p">;</span><span class="w">
    </span><span class="k">LigatureCaretByPos</span><span class="w"> </span><span class="p">[</span><span class="n">c_t</span><span class="w"> </span><span class="n">c_s</span><span class="p">]</span><span class="w"> </span><span class="mi">500</span><span class="p">;</span><span class="w">
    </span><span class="k">LigatureCaretByIndex</span><span class="w"> </span><span class="n">f_f_i</span><span class="w"> </span><span class="mi">23</span><span class="w"> </span><span class="mi">46</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">GDEF</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>The four class names following <code class="language-plaintext highlighter-rouge">GlyphClassDef</code> must be separated by commas. Any
classes can be omitted, but all the commas are required. According to the OpenType
specification, any glyph not included in one of the class definitions will be
assigned glyph class index 0, and will not be included in any of the <code class="language-plaintext highlighter-rouge">GlyphClassDef</code>
classes.</p>

<p>The <strong>MarkAttach</strong> classes of the GDEF table may not be specified explicitly in
feature file syntax. They are instead created by the implementation from use of
the <code class="language-plaintext highlighter-rouge">lookupflag MarkAttachmentType &lt;class name&gt;</code> statements. The class names may
be from either regular classes definitions or mark class definitions.</p>

<p>The <strong>MarkGlyphSets</strong> classes of the GDEF table may not be specified explicitly in
feature file syntax. They are instead created by the implementation from use of
the <code class="language-plaintext highlighter-rouge">lookupflag UseMarkFilteringSet &lt;class name&gt;</code> statements. The class names
may be from either regular classes definitions or mark class definitions.</p>

<p>If any mark class has been defined, or if any of the lookup flags for skipping
glyphs of a certain class have been seen, the implementation will check if the
GDEF keywords for defining the <code class="language-plaintext highlighter-rouge">GlyphClassDef</code> has been seen. If not, the
implementation will fill them from the substitution and positioning rules, and
will create a GDEF table even if there is no GDEF definition in the feature
file. The LIGATURE and COMPONENT classes will be filled from the glyphs used in
any GSUB Lookup Type 4, Ligature Substitution. The MARKS class will be filled
from all the glyphs in any of the mark classes used in positioning rules.</p>

<p><a name="9.c"></a></p>
<h3 id="9c-head-table">9.c. head table</h3>

<p>The head table <code class="language-plaintext highlighter-rouge">FontRevision</code> value is used as the overall font version number,
and should be incremented whenever any data in the fonts is changed. It is both
specified and reported as a decimal number with three significant decimal
places. The actual value stored in the font will, however, be a Fixed number
(16.16 bit format). Due to the limited precision of this format, the value
stored may differ by a small decimal fraction from that specified, but will
always round to the same value when rounded to three fractional decimal places.</p>

<p>This value is also used as the source for the font version string in the name
table name string ID 5 “Version”.</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">head</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">FontRevision</span><span class="w"> </span><span class="p">&lt;</span><span class="n">fixed</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">three</span><span class="w"> </span><span class="n">fractional</span><span class="w"> </span><span class="n">decimal</span><span class="w"> </span><span class="n">places</span><span class="p">&gt;;</span><span class="w">
</span><span class="p">}</span> <span class="nf">head</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<h6 id="example-1-4">Example 1:</h6>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">head</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">FontRevision</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">head</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>This format is supported, but will cause a warning that the specification will
be converted to “1.100”. It will be stored in the font as 0x0001199A. A more
exact decimal representation would be 1.10000610352, but it will be reported as
“1.100”.</p>

<h6 id="example-2-4">Example 2:</h6>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">head</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">FontRevision</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">001</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">head</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>This value be stored in the font as 0x00010042. A more exact decimal
representation is 1.001007, but it will be reported as “1.001”.</p>

<h6 id="example-3-2">Example 3:</h6>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">head</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">FontRevision</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">500</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">head</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>This value be stored in the font as 0x00018000, and will be reported as “1.500”.
The decimal and Fixed values are equal in this case.</p>

<p><a name="9.d"></a></p>
<h3 id="9d-hhea-table">9.d. hhea table</h3>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">hhea</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">CaretOffset</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">Ascender</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">Descender</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">LineGap</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;;</span><span class="w">
</span><span class="p">}</span> <span class="nf">hhea</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">hhea</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">CaretOffset</span><span class="w"> </span><span class="p">-</span><span class="mi">50</span><span class="p">;</span><span class="w">
    </span><span class="k">Ascender</span><span class="w"> </span><span class="mi">800</span><span class="p">;</span><span class="w">
    </span><span class="k">Descender</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span><span class="w">
    </span><span class="k">LineGap</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">hhea</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><a name="9.e"></a></p>
<h3 id="9e-name-table">9.e. name table</h3>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">name</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c"># name records</span><span class="w">
</span><span class="p">}</span> <span class="nf">name</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>A name record is of the form:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">nameid</span><span class="w"> </span><span class="p">&lt;</span><span class="n">id</span><span class="p">&gt;</span><span class="w"> </span><span class="p">[&lt;</span><span class="n">string</span><span class="w"> </span><span class="n">attribute</span><span class="p">&gt;]</span><span class="w"> </span><span class="p">&lt;</span><span class="n">string</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>An <code class="language-plaintext highlighter-rouge">&lt;id&gt;</code> is a number specifying the ID of the name string to be added to the
name table. Note that IDs 2 and 6 (Family, Subfamily, Unique, Full, Version, and
FontName) are reserved by the implementation and cannot be overridden; doing so
will elicit a warning message and the record will be ignored.</p>

<p>An optional <code class="language-plaintext highlighter-rouge">&lt;string attribute&gt;</code> is one or three space delimited numbers that
specify the platform, platform-specific, and language IDs to be stored in the
name record of the name table. If only one number is specified it represents the
platform ID. The platform ID may be either 1 or 3, corresponding to the
Macintosh or Microsoft (hereafter called Windows) platforms, respectively. The
other ID numbers must be in the range 0-65535 but are not otherwise validated.</p>

<p>Consult the OpenType specification to obtain
<a href="https://docs.microsoft.com/en-us/typography/opentype/spec/name#windows-encoding-ids">Windows platform IDs</a>,
<a href="https://docs.microsoft.com/en-us/typography/opentype/spec/name#windows-language-ids">Windows language IDs</a>,
<a href="https://docs.microsoft.com/en-us/typography/opentype/spec/name#macintosh-encoding-ids-script-manager-codes">Macintosh platform IDs</a> and
<a href="https://docs.microsoft.com/en-us/typography/opentype/spec/name#macintosh-language-ids">Macintosh language IDs</a>.</p>

<p>Decimal numbers must begin with a non-0 digit, octal numbers with a 0 digit, and
hexadecimal numbers with a 0x prefix to numbers and hexadecimal letters a-f or
A-F.</p>

<p>If some or all of the string attribute ID numbers aren’t specified their values
are defaulted as follows:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">platform</span><span class="w"> </span><span class="n">id</span><span class="w">      </span><span class="mi">3</span><span class="w"> </span><span class="p">(</span><span class="n">Windows</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Windows platform selected:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">platspec</span><span class="w"> </span><span class="n">id</span><span class="w">      </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="n">Unicode</span><span class="p">)</span><span class="w">
</span><span class="k">language</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="mi">0</span><span class="n">x0409</span><span class="w"> </span><span class="p">(</span><span class="n">Windows</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">English</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Macintosh platform selected:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">platspec</span><span class="w"> </span><span class="n">id</span><span class="w">      </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="n">Roman</span><span class="p">)</span><span class="w">
</span><span class="k">language</span><span class="w"> </span><span class="n">id</span><span class="w">      </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="n">English</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Putting this all together gives the following valid nameID formats and the IDs
that are assigned.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>representation              id  platform id platspec id language id
--------------------------- --- ----------- ----------- -----------
nameid 1 &lt;string&gt;;          1   3           1           0x0409
nameid 1 3 &lt;string&gt;;        1   3           1           0x0409
nameid 1 3 S L &lt;string&gt;;    1   3           S           L
nameid 1 1 &lt;string&gt;;        1   1           0           0
nameid 1 1 S L &lt;string&gt;;    1   1           S           L
</code></pre></div></div>

<p>A string is composed of UTF-8 characters enclosed by ASCII double quote
characters (<code class="language-plaintext highlighter-rouge">"</code>). Newlines embedded within the string are removed from the
character sequence to be stored.</p>

<p>Strings are converted to UTF-16 for the Windows platform. Unicode values for
the Windows platform may also be specified using a special character sequence
of a backslash character (<code class="language-plaintext highlighter-rouge">\</code>) followed by exactly four hexadecimal numbers (of
either case) which may not all be zero, e.g. \4e2d.  The ASCII backslash
character must be represented as the sequence \005c or \005C and the ASCII
double quote character must be represented as the sequence \0022.</p>

<p>There is no corresponding conversion to Unicode for the Macintosh platform but
character codes in the range 128-255 may be specified using a special character
sequence of a backslash character (<code class="language-plaintext highlighter-rouge">\</code>) followed by exactly two hexadecimal
numbers (of either case) which may not both be zero, e.g. \83. The ASCII
backslash character must be represented as the sequence \5c or \5C and the ASCII
double quote character must be represented as the sequence \22.</p>

<h6 id="example-add-designers-name-that-includes-non-ascii-characters-for-mac-and-windows-platforms">Example (add designer’s name that includes non-ASCII characters for Mac and Windows platforms):</h6>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">name</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">nameid</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="s">"Joachim Müller-Lancé"</span><span class="p">;</span><span class="w">            </span><span class="c"># Windows (Unicode), UTF-8 input</span><span class="w">
</span><span class="p">}</span> <span class="nf">name</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">name</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">nameid</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="s">"Joachim M</span><span class="se">\00</span><span class="s">fcller-Lanc</span><span class="se">\00</span><span class="s">e9"</span><span class="p">;</span><span class="w">    </span><span class="c"># Windows (Unicode), escaped Unicode values</span><span class="w">
    </span><span class="k">nameid</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="s">"Joachim M</span><span class="err">\</span><span class="s">9fller-Lanc</span><span class="err">\</span><span class="s">8e"</span><span class="p">;</span><span class="w">      </span><span class="c"># Macintosh (Mac Roman)</span><span class="w">
</span><span class="p">}</span> <span class="nf">name</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><a name="9.f"></a></p>
<h3 id="9f-os2-table">9.f. OS/2 table</h3>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">OS/2</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">FSType</span><span class="w"> </span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">Panose</span><span class="w"> </span><span class="p">&lt;</span><span class="n">panose</span><span class="w"> </span><span class="n">number</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">UnicodeRange</span><span class="w"> </span><span class="p">&lt;</span><span class="n">Unicode</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">list</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">CodePageRange</span><span class="w"> </span><span class="p">&lt;</span><span class="n">code</span><span class="w"> </span><span class="n">page</span><span class="w"> </span><span class="n">list</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">TypoAscender</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">TypoDescender</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">TypoLineGap</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">winAscent</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">winDescent</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">XHeight</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">CapHeight</span><span class="w"> </span><span class="p">&lt;</span><span class="n">metric</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">WeightClass</span><span class="w"> </span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">WidthClass</span><span class="w"> </span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">Vendor</span><span class="w"> </span><span class="p">&lt;</span><span class="n">string</span><span class="p">&gt;;</span><span class="w">
    </span><span class="n">LowerOpSize</span><span class="w"> </span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;;</span><span class="w">
    </span><span class="n">UpperOpSize</span><span class="w"> </span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;;</span><span class="w">
</span><span class="p">}</span> <span class="nf">OS/2</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">Vendor</code> should be 4 characters long. If a shorter vendor ID is given, it is
automatically padded with spaces. A longer vendor ID causes an error.</p>

<p><code class="language-plaintext highlighter-rouge">&lt;panose number&gt;</code> is ten (decimal) numbers separated by spaces.</p>

<p><code class="language-plaintext highlighter-rouge">&lt;Unicode range list&gt;</code> is a space-separated list of Unicode bit numbers from the
OpenType specification for the <a href="https://docs.microsoft.com/en-us/typography/opentype/spec/os2#ur"><strong>ulUnicodeRange1-4</strong> in the OS/2 table</a>.</p>

<p><code class="language-plaintext highlighter-rouge">&lt;code page list&gt;</code> is a space-separated list of Windows code page numbers from the
OpenType specification for the <a href="https://docs.microsoft.com/en-us/typography/opentype/spec/os2#cpr"><strong>ulCodePageRange1-2</strong> in the OS/2 table</a>.</p>

<p><code class="language-plaintext highlighter-rouge">LowerOpSize</code> and <code class="language-plaintext highlighter-rouge">UpperOpSize</code> set the <strong>usLowerOpticalPointSize</strong> and
<strong>usUpperOpticalPointSize</strong> fields. If these are set, then the OS/2 version must be
set to at least 5 by the implementation. Note that the values for these fields
are set in units of TWIPS, or 20 × point size.</p>

<h6 id="example-3">Example:</h6>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">OS/2</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">FSType</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w">
    </span><span class="k">Panose</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w">
    </span><span class="k">TypoAscender</span><span class="w"> </span><span class="mi">800</span><span class="p">;</span><span class="w">
    </span><span class="k">TypoDescender</span><span class="w"> </span><span class="p">-</span><span class="mi">200</span><span class="p">;</span><span class="w"> </span><span class="c"># Note that TypoDescender is negative for descent below the baseline.</span><span class="w">
    </span><span class="k">winAscent</span><span class="w"> </span><span class="mi">832</span><span class="p">;</span><span class="w">
    </span><span class="k">winDescent</span><span class="w"> </span><span class="mi">321</span><span class="p">;</span><span class="w"> </span><span class="c"># Note that winDescent is positive for descent below the baseline.</span><span class="w">
    </span><span class="k">UnicodeRange</span><span class="w">
        </span><span class="mi">0</span><span class="w">   </span><span class="c"># Basic Latin</span><span class="w">
        </span><span class="mi">1</span><span class="w">   </span><span class="c"># Latin-1 Supplement</span><span class="w">
        </span><span class="mi">9</span><span class="w">   </span><span class="c"># Cyrillic</span><span class="w">
        </span><span class="mi">55</span><span class="w">  </span><span class="c"># CJK Compatibility</span><span class="w">
        </span><span class="mi">59</span><span class="w">  </span><span class="c"># CJK Unified Ideographs</span><span class="w">
        </span><span class="mi">60</span><span class="w">  </span><span class="c"># Private Use Area</span><span class="w">
        </span><span class="p">;</span><span class="w">
    </span><span class="k">CodePageRange</span><span class="w">
        </span><span class="mi">1252</span><span class="w">    </span><span class="c"># Latin 1</span><span class="w">
        </span><span class="mi">1251</span><span class="w">    </span><span class="c"># Cyrillic</span><span class="w">
        </span><span class="mi">932</span><span class="w">     </span><span class="c"># JIS/Japan</span><span class="w">
        </span><span class="p">;</span><span class="w">
    </span><span class="k">XHeight</span><span class="w"> </span><span class="mi">400</span><span class="p">;</span><span class="w">
    </span><span class="k">CapHeight</span><span class="w"> </span><span class="mi">600</span><span class="p">;</span><span class="w">
    </span><span class="k">WeightClass</span><span class="w"> </span><span class="mi">800</span><span class="p">;</span><span class="w">
    </span><span class="k">WidthClass</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">
    </span><span class="k">Vendor</span><span class="w"> </span><span class="s">"ADBE"</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">OS/2</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>Note that for the codepage ranges, the list numbers may be separated by any
amount of white space. Note that the terminal semicolon cannot follow a comment
character on a line, as all text on a line following the comment character is
removed before processing.</p>

<p><a name="9.g"></a></p>
<h3 id="9g-vhea-table">9.g. vhea table</h3>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">vhea</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">VertTypoAscender</span><span class="w"> </span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">VertTypoDescender</span><span class="w"> </span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">VertTypoLineGap</span><span class="w"> </span><span class="p">&lt;</span><span class="n">number</span><span class="p">&gt;;</span><span class="w">
</span><span class="p">}</span> <span class="nf">vhea</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">vhea</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">VertTypoAscender</span><span class="w"> </span><span class="mi">500</span><span class="p">;</span><span class="w">
    </span><span class="k">VertTypoDescender</span><span class="w"> </span><span class="p">-</span><span class="mi">500</span><span class="p">;</span><span class="w">
    </span><span class="k">VertTypoLineGap</span><span class="w"> </span><span class="mi">1000</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">vhea</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><a name="9.h"></a></p>
<h3 id="9h-vmtx-table">9.h. vmtx table</h3>

<p>In OpenType, each glyph may have a unique vertical origin y coordinate and a
unique vertical advance width. By default, for each glyph the vertical origin y
coordinate is set to the value of the <strong>OS/2.TypoAscender</strong> field, and the vertical
advance width is set to the distance between the values of the of
<strong>OS/2.TypoAscender</strong> and the <strong>OS/2.TypoDescender</strong>. However, other values may be
assigned to a glyph as follows:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">vmtx</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">VertOriginY</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">number1</span><span class="p">&gt;;</span><span class="w">
    </span><span class="k">VertAdvanceY</span><span class="w"> </span><span class="p">&lt;</span><span class="n">glyph</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">number2</span><span class="p">&gt;;</span><span class="w">
</span><span class="p">}</span> <span class="nf">vmtx</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>This would result in the glyph’s vertical origin y coordinate and the glyph’s
vertical advance width being set as shown. The value set here for the vertical
origin y coordinate will also set the <strong>topSideBearing</strong> value in the <code class="language-plaintext highlighter-rouge">vmtx</code> table
and the vertical origin y value in the <code class="language-plaintext highlighter-rouge">VORG</code> table for the named glyph.</p>

<p>For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">vmtx</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">VertOriginY</span><span class="w"> </span><span class="err">\</span><span class="mi">711</span><span class="w"> </span><span class="mi">864</span><span class="p">;</span><span class="w">
    </span><span class="k">VertOriginY</span><span class="w"> </span><span class="err">\</span><span class="mi">712</span><span class="w"> </span><span class="mi">867</span><span class="p">;</span><span class="w">
    </span><span class="k">VertOriginY</span><span class="w"> </span><span class="err">\</span><span class="mi">713</span><span class="w"> </span><span class="mi">866</span><span class="p">;</span><span class="w">
</span><span class="p">}</span> <span class="nf">vmtx</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>A special case for the vertical advance width is the set of glyphs referenced by
the <code class="language-plaintext highlighter-rouge">vrt2</code> feature. The default vertical advance for these glyphs is the
horizontal advance of their corresponding target (upright) glyphs. These values
will also be overridden by <code class="language-plaintext highlighter-rouge">VertAdvanceY</code> values.</p>

<p><a name="9.i"></a></p>
<h3 id="9i-stat-table">9.i. STAT table</h3>
<p>The STAT table is organized as follows:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">STAT</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c"># Elided fallback name</span><span class="w">
    </span><span class="c"># Design axes</span><span class="w">
    </span><span class="c"># Axis values</span><span class="w">
</span><span class="p">}</span> <span class="nf">STAT</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<h4 id="elided-fallback-name">Elided fallback name</h4>
<p>Elided fallback name must be defined and at most once. It can be
defined using full name entries or an existing name ID.</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ElidedFallbackName</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">name</span><span class="w"> </span><span class="p">&lt;</span><span class="k">name</span><span class="w"> </span><span class="n">spec</span><span class="p">&gt;;</span><span class="err">+</span><span class="w">
</span><span class="p">}</span><span class="err">;
</span></code></pre></div></div>

<p>The syntax for the individual name string entries is similar to that of the
name table <code class="language-plaintext highlighter-rouge">nameID</code> entries (see §<a href="#9.e">9.e</a>) - the only difference is that
the introductory keyword is <code class="language-plaintext highlighter-rouge">name</code>, and the name ID value is omitted, since the
name ID value is auto-generated by the feature compiler.</p>

<p>Alternatively, if the name string matches one of the pre-existing names in the
<code class="language-plaintext highlighter-rouge">name</code> table, the name ID can be specified directly and it must be be present
in the <code class="language-plaintext highlighter-rouge">name</code> table.</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ElidedFallbackNameID</span><span class="w"> </span><span class="p">&lt;</span><span class="k">name</span><span class="w"> </span><span class="n">ID</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<h4 id="design-axes">Design axes</h4>
<p>There can be one or more design axes specified in the <code class="language-plaintext highlighter-rouge">STAT</code> table.</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">DesignAxis</span><span class="w"> </span><span class="p">&lt;</span><span class="n">axisTag</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">axisOrdering</span><span class="w"> </span><span class="n">num</span><span class="p">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="k">name</span><span class="w"> </span><span class="p">&lt;</span><span class="k">name</span><span class="w"> </span><span class="n">spec</span><span class="p">&gt;;</span><span class="err">+</span><span class="w">
</span><span class="p">}</span><span class="err">;+
</span></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">axisTag</code> is a four-letter tag. <code class="language-plaintext highlighter-rouge">axisOrdering</code> is a signed number.</p>

<p>The syntax for individual name string entries is the same as above.</p>

<h4 id="axis-values">Axis values</h4>
<p>There can be one or more axis values specified in the <code class="language-plaintext highlighter-rouge">STAT</code> table.</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">AxisValue</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">flag</span><span class="w"> </span><span class="p">&lt;</span><span class="n">FLAG</span><span class="p">&gt;</span><span class="err">+</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="k">name</span><span class="w"> </span><span class="p">&lt;</span><span class="k">name</span><span class="w"> </span><span class="n">string</span><span class="p">&gt;;</span><span class="err">+</span><span class="w">
    </span><span class="n">location</span><span class="w"> </span><span class="p">...;</span><span class="err">+</span><span class="w">
</span><span class="p">}</span><span class="err">;+
</span></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">flag</code> is optional, and defaults to 0 when omitted. Possible flags are
<code class="language-plaintext highlighter-rouge">ElidableAxisValueName</code> and <code class="language-plaintext highlighter-rouge">OlderSiblingFontAttribute</code>, and more than one flag
can be specified, for example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">flag</span><span class="w"> </span><span class="n">ElidableAxisValueName</span><span class="w"> </span><span class="n">OlderSiblingFontAttribute</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">location</code> statement takes several formats:</p>

<h5 id="location-format-a">location format A</h5>
<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">location</span><span class="w"> </span><span class="p">&lt;</span><span class="n">axisTag</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">value</span><span class="p">&gt;;</span><span class="err">+</span><span class="w">
</span></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">axisTag</code> is a 4-letter tag and must correspond to one of the defined design
axes in the table. <code class="language-plaintext highlighter-rouge">value</code> is a signed number and can be specified using
decimal, hex and octal formats as well (see §<a href="#9.e">9.e</a>).</p>

<p>There can be more than one <code class="language-plaintext highlighter-rouge">location</code> statement when this format is used (in
this case the axis value will be <code class="language-plaintext highlighter-rouge">STAT</code> format 4 <code class="language-plaintext highlighter-rouge">AxisValue</code>, and format 1
otherwise).</p>

<h5 id="location-format-b">location format B</h5>
<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">location</span><span class="w"> </span><span class="p">&lt;</span><span class="n">axisTag</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">nominalValue</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">rangeMinValue</span><span class="p">&gt;</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="p">&lt;</span><span class="n">rangeMaxValue</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>Format for <code class="language-plaintext highlighter-rouge">axisTag</code> and the other values as above, and there must be space
before the <code class="language-plaintext highlighter-rouge">-</code> to distinguish it from possible minus sign for
<code class="language-plaintext highlighter-rouge">&lt;rangeMaxValue&gt;</code>.</p>

<p>There can be only one <code class="language-plaintext highlighter-rouge">location</code> statement when this format is used (the axis
value will be <code class="language-plaintext highlighter-rouge">STAT</code> format 2 <code class="language-plaintext highlighter-rouge">AxisValue</code>).</p>

<h5 id="location-format-c">location format C</h5>
<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">location</span><span class="w"> </span><span class="p">&lt;</span><span class="n">axisTag</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">value</span><span class="p">&gt;</span><span class="w"> </span><span class="p">&lt;</span><span class="n">linkedValue</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p>Format for <code class="language-plaintext highlighter-rouge">axisTag</code> and the other values as above.</p>

<p>There can be only one <code class="language-plaintext highlighter-rouge">location</code> statement when this format is used (the axis
value will be <code class="language-plaintext highlighter-rouge">STAT</code> format 3 <code class="language-plaintext highlighter-rouge">AxisValue</code>).</p>

<h4 id="example-1-5">Example 1:</h4>
<p>These examples are for illustrative purposes only; they won’t all be in a 
single STAT table. See Example 2 for a fully defined STAT table.</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">STAT</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="n">ElidedFallbackName</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">name</span><span class="w"> </span><span class="s">"Regular"</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="err">;

   </span><span class="nf">DesignAxis</span><span class="w"> </span><span class="n">wght</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">name</span><span class="w"> </span><span class="s">"Weight"</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="err">;
   </span><span class="nf">DesignAxis</span><span class="w"> </span><span class="n">ital</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">name</span><span class="w"> </span><span class="s">"Italic"</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="err">;

   # </span><span class="nf">format</span><span class="w"> </span><span class="mi">1</span><span class="w">
   </span><span class="n">AxisValue</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">location</span><span class="w"> </span><span class="n">wght</span><span class="w"> </span><span class="mi">400</span><span class="p">;</span><span class="w">
      </span><span class="k">name</span><span class="w"> </span><span class="s">"Regular"</span><span class="p">;</span><span class="w">
      </span><span class="k">name</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="n">x411</span><span class="w"> </span><span class="s">"</span><span class="se">\5</span><span class="s">B9A</span><span class="se">\671</span><span class="s">F</span><span class="se">\76</span><span class="s">84"</span><span class="p">;</span><span class="w">
      </span><span class="n">flag</span><span class="w"> </span><span class="n">ElidableAxisValueName</span><span class="p">;</span><span class="w">
   </span><span class="p">}</span><span class="err">;

   # </span><span class="nf">format</span><span class="w"> </span><span class="mi">2</span><span class="w">
   </span><span class="n">AxisValue</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">location</span><span class="w"> </span><span class="n">wght</span><span class="w"> </span><span class="mi">400</span><span class="w"> </span><span class="mi">300</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="mi">500</span><span class="p">;</span><span class="w">
      </span><span class="k">name</span><span class="w"> </span><span class="s">"Regular"</span><span class="p">;</span><span class="w">
      </span><span class="n">flag</span><span class="w"> </span><span class="n">ElidableAxisValueName</span><span class="p">;</span><span class="w">
   </span><span class="p">}</span><span class="err">;

   # </span><span class="nf">format</span><span class="w"> </span><span class="mi">3</span><span class="w">
   </span><span class="n">AxisValue</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">location</span><span class="w"> </span><span class="n">wght</span><span class="w"> </span><span class="mi">400</span><span class="w"> </span><span class="mi">700</span><span class="p">;</span><span class="w">
      </span><span class="k">name</span><span class="w"> </span><span class="s">"Regular"</span><span class="p">;</span><span class="w">
      </span><span class="n">flag</span><span class="w"> </span><span class="n">ElidableAxisValueName</span><span class="p">;</span><span class="w">
   </span><span class="p">}</span><span class="err">;

   # </span><span class="nf">format</span><span class="w"> </span><span class="mi">3</span><span class="w">
   </span><span class="n">AxisValue</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">location</span><span class="w"> </span><span class="n">ital</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
      </span><span class="k">name</span><span class="w"> </span><span class="s">"Regular"</span><span class="p">;</span><span class="w">
      </span><span class="n">flag</span><span class="w"> </span><span class="n">ElidableAxisValueName</span><span class="p">;</span><span class="w">
   </span><span class="p">}</span><span class="err">;

   # </span><span class="nf">format</span><span class="w"> </span><span class="mi">4</span><span class="w">
   </span><span class="n">AxisValue</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">location</span><span class="w"> </span><span class="n">wght</span><span class="w"> </span><span class="mi">500</span><span class="p">;</span><span class="w">
      </span><span class="n">location</span><span class="w"> </span><span class="n">ital</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
      </span><span class="k">name</span><span class="w"> </span><span class="s">"MediumItalic"</span><span class="p">;</span><span class="w">
      </span><span class="n">flag</span><span class="w"> </span><span class="n">ElidableAxisValueName</span><span class="p">;</span><span class="w">
   </span><span class="p">}</span><span class="err">;
} </span><span class="nf">STAT</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>
<h4 id="example-2-5">Example 2:</h4>
<p>This example shows a fully defined STAT table with two axes in format 2.</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">table</span> <span class="nf">STAT</span><span class="w"> </span><span class="p">{</span><span class="w">

   </span><span class="n">ElidedFallbackName</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">name</span><span class="w"> </span><span class="s">"Regular"</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="err">;

   </span><span class="nf">DesignAxis</span><span class="w"> </span><span class="n">wght</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">name</span><span class="w"> </span><span class="s">"Weight"</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="err">;
   </span><span class="nf">DesignAxis</span><span class="w"> </span><span class="n">opsz</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">name</span><span class="w"> </span><span class="s">"Optical"</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="err">;

   </span><span class="nf">AxisValue</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">location</span><span class="w"> </span><span class="n">wght</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="mi">250</span><span class="p">;</span><span class="w">
      </span><span class="k">name</span><span class="w"> </span><span class="s">"ExtraLight"</span><span class="p">;</span><span class="w">
   </span><span class="p">}</span><span class="err">;

   </span><span class="nf">AxisValue</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">location</span><span class="w"> </span><span class="n">wght</span><span class="w"> </span><span class="mi">300</span><span class="w"> </span><span class="mi">250</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="mi">350</span><span class="p">;</span><span class="w">
      </span><span class="k">name</span><span class="w"> </span><span class="s">"Light"</span><span class="p">;</span><span class="w">
   </span><span class="p">}</span><span class="err">;

   </span><span class="nf">AxisValue</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">location</span><span class="w"> </span><span class="n">wght</span><span class="w"> </span><span class="mi">400</span><span class="w"> </span><span class="mi">350</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="mi">450</span><span class="p">;</span><span class="w">
      </span><span class="k">name</span><span class="w"> </span><span class="s">"Regular"</span><span class="p">;</span><span class="w">
      </span><span class="n">flag</span><span class="w"> </span><span class="n">ElidableAxisValueName</span><span class="p">;</span><span class="w">
   </span><span class="p">}</span><span class="err">;

   </span><span class="nf">AxisValue</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">location</span><span class="w"> </span><span class="n">wght</span><span class="w"> </span><span class="mi">600</span><span class="w"> </span><span class="mi">550</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="mi">650</span><span class="p">;</span><span class="w">
      </span><span class="k">name</span><span class="w"> </span><span class="s">"Semibold"</span><span class="p">;</span><span class="w">
   </span><span class="p">}</span><span class="err">;

   </span><span class="nf">AxisValue</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">location</span><span class="w"> </span><span class="n">wght</span><span class="w"> </span><span class="mi">700</span><span class="w"> </span><span class="mi">650</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="mi">750</span><span class="p">;</span><span class="w">
      </span><span class="k">name</span><span class="w"> </span><span class="s">"Bold"</span><span class="p">;</span><span class="w">
   </span><span class="p">}</span><span class="err">;

   </span><span class="nf">AxisValue</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">location</span><span class="w"> </span><span class="n">wght</span><span class="w"> </span><span class="mi">900</span><span class="w"> </span><span class="mi">800</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="mi">900</span><span class="p">;</span><span class="w">
      </span><span class="k">name</span><span class="w"> </span><span class="s">"Black"</span><span class="p">;</span><span class="w">
   </span><span class="p">}</span><span class="err">;

   </span><span class="nf">AxisValue</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">location</span><span class="w">
      </span><span class="n">opsz</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span><span class="w">
      </span><span class="k">name</span><span class="w"> </span><span class="s">"Caption"</span><span class="p">;</span><span class="w">
   </span><span class="p">}</span><span class="err">;

   </span><span class="nf">AxisValue</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">location</span><span class="w">
      </span><span class="n">opsz</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="mi">24</span><span class="p">;</span><span class="w">
      </span><span class="k">name</span><span class="w"> </span><span class="s">"Text"</span><span class="p">;</span><span class="w">
      </span><span class="n">flag</span><span class="w"> </span><span class="n">ElidableAxisValueName</span><span class="p">;</span><span class="w">
   </span><span class="p">}</span><span class="err">;

   </span><span class="nf">AxisValue</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">location</span><span class="w">
      </span><span class="n">opsz</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="p">-</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w">
      </span><span class="k">name</span><span class="w"> </span><span class="s">"Display"</span><span class="p">;</span><span class="w">
   </span><span class="p">}</span><span class="err">;

} </span><span class="nf">STAT</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p><a name="10"></a></p>
<h2 id="10-specifying-anonymous-data-blocks">10. Specifying anonymous data blocks</h2>

<p>The feature file can contain <code class="language-plaintext highlighter-rouge">anonymous</code> tagged blocks of data that must be
passed back to the client of the implementation software. These blocks of data
typically contain information needed to specify custom or unsupported tables.
The parser will not attempt to parse the data. Each such block is specified as
follows:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">anonymous</span> <span class="err">&lt;</span><span class="nf">tag</span><span class="p">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c"># ...</span><span class="w">
</span><span class="p">}</span> <span class="err">&lt;</span><span class="nf">tag</span><span class="p">&gt;;</span><span class="w">
</span></code></pre></div></div>

<p><strong>Note:</strong> The keyword <code class="language-plaintext highlighter-rouge">anonymous</code> can be abbreviated as <code class="language-plaintext highlighter-rouge">anon</code>. For example:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">anon</span> <span class="nf">sbit</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="p">/*</span><span class="w"> </span><span class="n">sbit</span><span class="w"> </span><span class="k">table</span> <span class="nf">specifications</span><span class="w"> </span><span class="p">*/</span><span class="w">
    </span><span class="mi">72</span><span class="w">  </span><span class="p">%</span><span class="w"> </span><span class="n">dpi</span><span class="w">
    </span><span class="n">sizes</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">all</span><span class="w"> </span><span class="s">"Generic/JGeneric"</span><span class="w">
        </span><span class="p">}</span>
    <span class="err">}
} </span><span class="nf">sbit</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>The closing brace, tag, and semicolon must all be on the same line to indicate
the end of the anonymous block to the parser. White space may be used between
tokens on this line, and a comment may follow the semicolon. The <code class="language-plaintext highlighter-rouge">include</code>
directive will not be recognized within the block, starting from <code class="language-plaintext highlighter-rouge">anonymous</code> and
ending at the end of the closing line, so the entire block must exist within the
same file.</p>

<p>The data that is passed back to the client starts at the beginning of the line
after the opening brace and ends at (and includes) the newline before the
closing brace. In the example above, the client is passed back the following
data:</p>

<div class="language-fea highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">/*</span><span class="w"> </span><span class="n">sbit</span><span class="w"> </span><span class="k">table</span> <span class="nf">specifications</span><span class="w"> </span><span class="p">*/</span><span class="w">
</span><span class="mi">72</span><span class="w">  </span><span class="p">%</span><span class="w"> </span><span class="n">dpi</span><span class="w">
</span><span class="n">sizes</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">all</span><span class="w"> </span><span class="s">"Generic/JGeneric"</span><span class="w">
   </span><span class="p">}</span>
<span class="err">}
</span></code></pre></div></div>

<p>along with the tag <code class="language-plaintext highlighter-rouge">sbit</code>.</p>

<p><a name="11"></a></p>
<h2 id="11-document-revisions">11. Document revisions</h2>

<p><strong>v1.25.0 [22 May 2020]:</strong></p>

<ul>
  <li>Added syntax for STAT table as discussed in
<a href="https://github.com/adobe-type-tools/afdko/issues/176">GitHub issue #176</a>.</li>
  <li>Updated Chaining Contextual lookups to allow application of more than one 
lookup at the same position as explained in
<a href="https://github.com/adobe-type-tools/afdko/issues/1119">GitHub issue #1119</a>.
See <a href="#5.f.i">GSUB LookupType 6</a> and <a href="#6.h.i">GPOS LookupType 8</a>.</li>
  <li>Fixed numbering on <a href="#7.a">Summary of OpenType layout algorithm</a>.</li>
  <li>Fixed typos.</li>
</ul>

<p><strong>v1.24 [21 Mar 2019]:</strong></p>

<ul>
  <li>Converted formatting to Markdown.</li>
  <li>Minor content changes and improvements.</li>
</ul>

<p><strong>v1.23 [1 Oct 2018]:</strong></p>

<ul>
  <li>Clarified the resolution of include file paths, as described in
<a href="https://github.com/adobe-type-tools/afdko/issues/164">GitHub issue #164</a>.</li>
  <li>Raised the maximum include depth from 5 to 50.</li>
</ul>

<p><strong>v1.22 [20 July 2018]:</strong></p>

<ul>
  <li>Removed the restriction that <code class="language-plaintext highlighter-rouge">DFLT</code> script is allowed to have only the
<code class="language-plaintext highlighter-rouge">dflt</code> language. This now matches the changes made in version 1.8.2 of
the OpenType spec.</li>
  <li>Removed the restriction that all mark-to-base and mark-to-mark statements
in a lookup must reference the same set of mark glyph classes.</li>
</ul>

<p><strong>v1.21.1 [24 Jun 2018]:</strong></p>

<ul>
  <li>Minor updates to TOC.</li>
  <li>Fixed typos.</li>
  <li>Updated link to OpenType specification.</li>
</ul>

<p><strong>v1.21 [7 Nov 2017]:</strong></p>

<ul>
  <li>Updated Pair Pos Format A: It is now supported. Corrected syntax of example.
See <a href="#6.b.i">class pair kerning</a>.</li>
  <li>Updated description of the <code class="language-plaintext highlighter-rouge">UseMarkFilteringSet</code> lookup flag.
It is now widely supported. See <a href="#4.d">lookupflag</a>.</li>
  <li>Relaxed limitations on name table name IDs: only 2 and 6 are now reserved.
See <a href="#9.e">name table</a>.</li>
</ul>

<p><strong>v1.20 [6 Feb 2017]:</strong></p>

<ul>
  <li>Updated glyph name rules in section <a href="#2.f.i">2.f.i glyph name</a> to allow
additional characters for development names.</li>
</ul>

<p><strong>v1.19 [26 April 2016]:</strong></p>

<ul>
  <li>Corrected statement about assigning glyphs to GDEF mark GlyphClass in section
<a href="#4.f">4.f markClass</a>.</li>
  <li>Added statement about single vs enum kern pair priorities when kern pair
position rules conflict: see section <a href="#6.b.ii">6.b.ii Enumerating pairs</a>.</li>
  <li>Fixed missing angle brackets in ValueRecordDef example.</li>
  <li>Clarified that languagesystem rules cannot be used in standalone lookups.</li>
  <li>Clarified <code class="language-plaintext highlighter-rouge">ignore sub</code> syntax.</li>
  <li>Clarified keyword scoping rules.</li>
  <li>Clarified that a glyph can have only either one position or index caret rule,
as well as one device caret position rule. in the GDEF table, and fixed example.</li>
</ul>

<p><strong>v1.18 [16 Mar 2016]:</strong></p>

<ul>
  <li>Clarified use of commas in ignore statement.</li>
  <li>Fixed spelling errors: example at end of section <a href="#9.e">9.e</a> name table, example 1
in section <a href="#5.f.ii">5.f.ii</a> ignore sub.</li>
  <li>Increased maximum length of glyph names and named glyph classes from 31 to 63.</li>
</ul>

<p><strong>v1.17 [6 Jan 2016]:</strong></p>

<ul>
  <li>Fixed bug in example for salt feature in section <a href="#8.a">8.a</a>, and in example for
contextual lookup specification in section <a href="#6.h.ii">6.h.ii</a>.</li>
</ul>

<p><strong>v1.16 [9 Dec 2015]:</strong></p>

<ul>
  <li>For value record format A, specify that the single value represents a y
advance change for vpal, vhal, and valt features, as well as vkrn.</li>
</ul>

<p><strong>v1.15 [12 June 2015]:</strong></p>

<ul>
  <li>Added documentation for Character Variant (cv01-cv99) features.</li>
</ul>

<p><strong>v1.14 [16 April 2015]:</strong></p>

<ul>
  <li>Fix typo in GDEF table spec, reported by Khaled Hosny.</li>
</ul>

<p><strong>v1.13 [28 July 2014]:</strong></p>

<ul>
  <li>Clarified that the subtable break keyword is intended for use only with
class kerning lookups.</li>
  <li>Corrected lookup flag syntax description: lookupflag values are separated
by a space character, not a comma.</li>
</ul>

<p><strong>v1.12 [21 March 2014]:</strong></p>

<ul>
  <li>Clarified that specific glyph pairs should precede class kern pairs, in section <a href="#6.b.i">6.b.i</a>.</li>
  <li>Removed excessive white space in section <a href="#4.d">4.d</a> lookupflag.</li>
  <li>Added two new keywords to set the OS/2 table fields usLowerOpticalPointSize
and usUpperOpticalPointSize. These fields were added in version 5 of the
OS/2 table.</li>
</ul>

<p><strong>v1.11 [4 Sept 2012]:</strong></p>

<ul>
  <li>Added clarification of backtrack sequence order in chaining contextual
lookup rules.</li>
</ul>

<p><strong>v1.10 [31 March 2010]:</strong></p>

<ul>
  <li>Fixed typo in example in section <a href="#4.d">4.d</a>: lookFlag values are separated by
spaces, not commas.</li>
  <li>Fixed typo in example in section <a href="#8.c">8.c</a> on stylistic names; examples:
quotes around name string need to be matching double quotes.</li>
  <li>Fixed typo in example in section <a href="#5.f.i">5.f.i</a> on Chain Sub rules; second line
was missing the target glyph “s”.</li>
</ul>

<p><strong>v1.9 [4 May 2009]:</strong></p>

<ul>
  <li>Fixed minor typo in Anchor statement, clarified that both mark class and
regular glyph class names can be used with the lookupflag keyword.</li>
</ul>

<p><strong>v1.8 [16 Dec 2008]:</strong></p>

<ul>
  <li>Revised syntax for mark attachment lookups and the GDEF table.</li>
  <li>Revised syntax for the lookupflag statement.</li>
  <li>Added new syntax for contextual rules.</li>
  <li>Revised the description of how language systems work.</li>
  <li>Revised syntax to allow standalone lookups.</li>
  <li>Added syntax for named value records and anchors.</li>
  <li>Added syntax for descriptive names for stylistic substitution features.</li>
</ul>

<p><strong>v1.7 [25 Oct 2006]:</strong></p>

<ul>
  <li>Fixed incorrect sign for winAscent keyword.</li>
  <li>Extended documentation of DFLT script tag and useExtension keyword.</li>
  <li>Fixed minor typos.</li>
</ul>

<p><strong>v1.6 [28 March 2006]:</strong></p>

<ul>
  <li>Added documentation of contextual chaining positioning, and how it is supported.</li>
  <li>Extended documentation of size feature.</li>
  <li>Fixed minor typos.</li>
</ul>

<p><strong>v1.5 [23 November 2005]:</strong></p>

<ul>
  <li>Expanded documentation of languagesystem, script, and language keywords to
describe newly added support for DFLT script, and correctly describe
handling of <code class="language-plaintext highlighter-rouge">dflt</code> lookups.</li>
  <li>Added OS/2 keywords winAscent, winDescent, and hhea keywords Ascender,
Descender, and LineGap.</li>
  <li>Added supported size table values as decimal fractions as well as decipoints,
e.g “10.0” as well as “100” for a point size of 10.</li>
  <li>Added supported OS/2 keyword <code class="language-plaintext highlighter-rouge">fsType</code> as well as <code class="language-plaintext highlighter-rouge">FSType</code>.</li>
  <li>in GPOS positioning statements, allow single value for value record in
all positioning statements; the case of all but pair positioning statements,
this stands for a change to the x-advance of the preceding glyph name.</li>
</ul>

<p><strong>v1.4 [23 January 2003; supported by HOT library v01.00.36]:</strong></p>

<ul>
  <li>Added new vmtx table overrides, in order to permit setting vertical metrics
for pre-rotated proportional glyphs that are specifically designed and are
not simply rotated forms of proportional glyphs.</li>
  <li>
    <p>Added new OS/2 overrides to set the Unicode and Windows code page range fields:</p>

    <ul>
      <li>UnicodeRange</li>
      <li>CodePageRange</li>
    </ul>
  </li>
  <li>Updated language keywords to be consistent with OpenType spec, i.e using
<code class="language-plaintext highlighter-rouge">dflt</code> instead of <code class="language-plaintext highlighter-rouge">DFLT</code>. Expanded section explaining use of language and
script default keywords. Old keywords still work, but cause a warning
to be emitted.</li>
</ul>

<p><strong>v1.3 [23 May 2002]:</strong></p>

<ul>
  <li>Added support for Vendor tag in OS/2 table.</li>
</ul>

<p><strong>v1.2 [7 March 2001; HOT library v01.00.29]:</strong></p>

<ul>
  <li>
    <p>Replaced <code class="language-plaintext highlighter-rouge">except</code> clause by separate <code class="language-plaintext highlighter-rouge">ignore substitute</code> or <code class="language-plaintext highlighter-rouge">ignore
position</code> statement; e.g. from <code class="language-plaintext highlighter-rouge">except a @LET sub a by a.end;</code> to <code class="language-plaintext highlighter-rouge">do not
sub a @LET; sub a' by a.end;</code>. (Note that the second rule is now required to
be marked to identify it as a Chain Sub and not a Single Sub rule.) <code class="language-plaintext highlighter-rouge">except</code>
clauses will still be handled correctly, but a message will be emitted
encouraging users to update the syntax.</p>

    <p>(This change was made since the <code class="language-plaintext highlighter-rouge">except</code> syntax was misleading in that it
(implied that the exception sequences were exceptions only to the rule at that
(same statement, whereas in fact they are exceptions to all subsequent rules
(until the end of the lookup.)</p>
  </li>
  <li>
    <p>Value record, anchor, device, contour point, and caret values: changed to a
consistent syntax that removes ambiguities and is more human-readable. (They
are now enclosed within angle brackets; the <code class="language-plaintext highlighter-rouge">anchor</code>, <code class="language-plaintext highlighter-rouge">contourpoint</code>, and
<code class="language-plaintext highlighter-rouge">caret</code> keywords are introduced; commas now separate device ppem/number
pairs from each other.)</p>
  </li>
</ul>

<p><strong>Note:</strong> Of the above changes, only value record format B in a Single Pos
statement is actually implemented. For example, <code class="language-plaintext highlighter-rouge">pos a 80 0 -160 0;</code> was changed
to <code class="language-plaintext highlighter-rouge">pos a &lt;80 0 -160 0&gt;;</code>. Previous syntax will still be handled correctly, but
a message will be emitted encouraging users to update the syntax.</p>

<ul>
  <li>Value records and anchors in GPOS rules (except for the AFM-style Pair Pos
format) now immediately follow the glyphs they correspond to; no commas are
needed. GDEF LigatureCaret statement: removed commas between caret values.
(Implementation not affected, since these sections were implemented.)</li>
  <li>Added ability to handle Single Sub rules with a single replacement glyph for
2 or more glyphs in the target glyph class; e.g. <code class="language-plaintext highlighter-rouge">sub [one.fitted
one.oldstyle one.tab.oldstyle] by one</code>.</li>
  <li>Added support for named <code class="language-plaintext highlighter-rouge">lookupflag</code> attributes e.g.
<code class="language-plaintext highlighter-rouge">lookupflag IgnoreLigatures;</code>.</li>
  <li>Updated the OT layout algorithm pseudo-code.</li>
  <li>Clarified that a pair positioning rule is treated as a class pair if and
only if at least one glyph class is present, even if that class is a
singleton glyph class.</li>
</ul>

<p><strong>v1.1 [1 December 2000; HOT library v01.00.28]:</strong></p>

<ul>
  <li>Added support for <code class="language-plaintext highlighter-rouge">languagesystem</code> statement. Note that this entailed
removing support for script, language, and named lookup blocks/statements
in the <code class="language-plaintext highlighter-rouge">size</code> feature, and removing support for script and language
statements in the <code class="language-plaintext highlighter-rouge">aalt</code> feature.</li>
  <li>Added implementation note at end of Syntax: Glyph Classes section.</li>
  <li>Updated OTL engine algorithm and lookup ordering section.</li>
  <li>Specified that the <code class="language-plaintext highlighter-rouge">vmtx</code> table overrides are recorded in the <code class="language-plaintext highlighter-rouge">VORG</code> table
as well.</li>
</ul>

<p><strong>v1.0 [29 September 2000; HOT library v01.00.24]:</strong></p>

<ul>
  <li>Added useExtension keyword support for lookup blocks and the <code class="language-plaintext highlighter-rouge">aalt</code>
feature block.</li>
</ul>

<p><strong>v0.9 [25 April 2000; HOT library v01.00.23]:</strong></p>

<ul>
  <li>Added vmtx table keyword VertOriginY.</li>
  <li>Changed description of <code class="language-plaintext highlighter-rouge">aalt</code> feature to describe sorting of alternate
glyphs.</li>
  <li>Added description of head.fontRevision setting and reporting.</li>
  <li>Changed syntax for feature parameters.</li>
</ul>

<p><strong>v0.8 [24 February 2000; HOT library v01.00.23]:</strong></p>

<ul>
  <li>Added syntax for feature parameters.</li>
  <li>Various miscellaneous description changes.</li>
</ul>

<p><strong>v0.7 [11 October 1999; HOT library v01.00.22]:</strong></p>

<ul>
  <li>Added grammar for completely specifying GSUB, GPOS, BASE and GDEF:
full-fledged value records, device tables, anchors, required features,
GPOS LookupTypes 3-6 and 8, generalized GSUB LookupType 6, subtable breaks.
Indicated all parts not currently supported in [brackets].</li>
  <li><code class="language-plaintext highlighter-rouge">aalt</code> creation: specified that <code class="language-plaintext highlighter-rouge">aalt</code> will be created after all other
features; special script rules.</li>
  <li>Added OS/2.FSType, WeightClass and WidthClass overrides.</li>
</ul>

<p><strong>v0.6 [22 March 1999; HOT library v119]:</strong></p>

<ul>
  <li>Added subtable keyword.</li>
</ul>

<p><strong>v0.5 [29 January 1999]:</strong></p>

<ul>
  <li>Added name table overrides.</li>
</ul>

<p><strong>v0.4 [20 January 1999]:</strong></p>

<ul>
  <li>HTML-formatted the document.</li>
  <li>Updated glyph name attributes.</li>
  <li>MM metrics can be represented by a single number if constant across masters.</li>
  <li>OS/2.XHeight, CapHeight, TypoLineGap overrides.</li>
  <li>hhea.CaretOffset override.</li>
  <li>vhea.VertTypoAscender, VertTypoDescender, VertTypoLineGap overrides.</li>
</ul>

<p><strong>v0.3 [9 October 1998]:</strong></p>

<ul>
  <li>Revised <code class="language-plaintext highlighter-rouge">aalt</code> creation algorithm.</li>
  <li>Revised table field override support: OS/2.Panose, OS/2.TypoAscender,
OS/2.TypoDescender, head.FontRevision.</li>
  <li>Added chaining contextual substitutions.</li>
  <li>Added support for anonymous data blocks.</li>
  <li>Changed glyph class expansion rules.</li>
</ul>

<p><strong>v0.2 [18 March 1998]:</strong></p>

<ul>
  <li>Changed keyword <code class="language-plaintext highlighter-rouge">replace</code> to <code class="language-plaintext highlighter-rouge">substitute</code> (or <code class="language-plaintext highlighter-rouge">sub</code>); introduced keyword
<code class="language-plaintext highlighter-rouge">position</code> (or <code class="language-plaintext highlighter-rouge">pos</code>).</li>
  <li>Added section on ordering of lookups and rules</li>
  <li>Added <code class="language-plaintext highlighter-rouge">lookupflag</code> attribute.</li>
  <li>Expanded Syntax section: lists of keywords, special characters, and glyph
name, glyph class name and lookup label name restrictions.</li>
</ul>

<p><strong>v0.1 [6 February 1998]: First version</strong></p>


      
      <div class="footer border-top border-gray-light mt-5 pt-3 text-right text-gray">
        This site is open source. <a href="https://github.com/adobe-type-tools/afdko/edit/gh-pages/OpenTypeFeatureFileSpecification.md">Improve this page</a>.
      </div>
      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
    
  </body>
</html>
